;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="af6943f9-25ea-7a03-5fd3-1e2f2a209926")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,310487,e=>{"use strict";let t=e=>{switch(e){case 0:default:return"Unknown";case 1:return"Buy More";case 2:return"First Buy";case 3:return"Sell Partial";case 4:return"Sell All";case 5:return"Add Liquidity";case 6:return"Remove Liquidity"}};function r(e){let t=JSON.parse(e);return{walletAddress:String(t[1]??""),balance:Number(t[2]??0),timestamp:Number(t[3]??0)}}function s(e){let r=JSON.parse(e),s=String(r[6]??""),a=r[21]??"";"string"==typeof a&&a&&!a.includes("https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/")?a=`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${s}.webp`:a||(a=`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${s}.webp`);let l=Number(r[22]??18),n=Number(r[23]??0),o=Number(r[9]??0);return{transactionTime:new Date(r[1]).toString(),walletAddress:String(r[2]??""),signature:String(r[3]??""),detailedType:t(r[4]),pairAddress:String(r[5]??""),tokenAddress:s,currBalance:null,lastActiveTime:new Date(r[1]).toString(),priceCurrency:Number(r[7]??0),priceUsd:Number(r[8]??0),tokenAmount:o/10**l,totalCurrency:Number(r[10]??0),totalUsd:Number(r[11]??0),fees:Number(r[13]??0),type:String(r[14]??""),pairCreatedAt:r[15]?new Date(Number(r[15])).toString():"",averageMcBought:Number(r[16]??0),averageMcSold:Number(r[17]??0),pnlCurrency:Number(r[18]??0),tokenName:String(r[19]??""),tokenTicker:String(r[20]??""),tokenImage:String(a),tokenDecimals:l,supply:n/10**l,realProtocol:String(r[24]??""),isMigrated:!!r[25],liquidityCurrency:Number(r[26]??0),innerIndex:"number"==typeof r[29]?r[29]:null,outerIndex:"number"==typeof r[30]?r[30]:null,currency:"bnb"}}function a(e){let r=JSON.parse(e),s=r[20]??"",a=r[5];s.includes("https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/")||(s=`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${a}.webp`);let l={transactionTime:new Date(r[0]).toString(),walletAddress:r[1],signature:r[2],detailedType:t(r[3]),pairAddress:r[4],tokenAddress:a,currBalance:null,lastActiveTime:null,priceCurrency:r[7]??0,priceUsd:r[8]??0,tokenAmount:r[9]??0,totalCurrency:r[10]??0,totalUsd:r[11]??0,fees:r[12]??0,type:r[13]??"",pairCreatedAt:r[14]?new Date(r[14]).toString():"",averageMcBought:r[15]??0,averageMcSold:r[16]??0,pnlCurrency:r[17]??0,tokenName:r[18]??"",tokenTicker:r[19]??"",tokenImage:s,tokenDecimals:r[21]??0,supply:r[22]??0,realProtocol:r[23]??"",isMigrated:r[24]??!1,liquidityCurrency:r[25]??0,innerIndex:r[26]??null,outerIndex:r[27]??null,currency:"sol"};if(r[6]){let[e,t]=r[6].split(":");l.currBalance=Number(t),l.lastActiveTime=e}return l}e.s(["convertToWalletTrackerBalanceUpdateBnb",()=>r,"convertToWalletTrackerTransaction",()=>a,"convertToWalletTrackerTransactionBnb",()=>s])},717744,e=>{"use strict";function t(e){let t=50+e%30,r=30+e%20;return[`hsl(${e%360}, ${t}%, ${r}%)`,`hsl(${(e+120)%360}, ${t}%, ${r+10}%)`,`hsl(${(e+240)%360}, ${t}%, ${r+5}%)`]}function r(e){if(!e)return"/images/default_banner.png";let r=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return Math.abs(t)}(e),[s,a]=t(r),l=function(e){let r=e%4,[,s,a]=t(e);switch(r){case 0:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
            <rect x="0" y="0" width="40" height="40" fill="${s}" opacity="0.1"/>
            <line x1="0" y1="40" x2="40" y2="0" stroke="${a}" stroke-width="2" opacity="0.3"/>
          </pattern>
        </defs>
      `;case 1:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse">
            <circle cx="15" cy="15" r="3" fill="${a}" opacity="0.2"/>
          </pattern>
        </defs>
      `;case 2:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
            <rect x="10" y="10" width="15" height="15" fill="${a}" opacity="0.15"/>
            <circle cx="35" cy="35" r="8" fill="${s}" opacity="0.15"/>
          </pattern>
        </defs>
      `;default:return`
        <defs>
          <pattern id="pattern-${e}" x="0" y="0" width="100" height="20" patternUnits="userSpaceOnUse">
            <path d="M0 10 Q 25 5, 50 10 T 100 10" stroke="${a}" stroke-width="2" fill="none" opacity="0.2"/>
          </pattern>
        </defs>
      `}}(r),n=`
    <svg width="800" height="200" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad-${r}" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:${s};stop-opacity:1" />
          <stop offset="100%" style="stop-color:${a};stop-opacity:1" />
        </linearGradient>
      </defs>
      ${l}
      <rect width="800" height="200" fill="url(#grad-${r})" />
      <rect width="800" height="200" fill="url(#pattern-${r})" />
    </svg>
  `;return`data:image/svg+xml,${encodeURIComponent(n)}`}e.s(["generateDefaultBanner",()=>r])},415823,751380,227905,664727,916316,622435,657421,648357,639972,e=>{"use strict";var t=e.i(416600),r=e.i(268804);let s=async({queryKey:e})=>{let[,t]=e;return await r.socialApi.get("user-friends-with-status",void 0,t)};e.s(["useSocialInfo",0,(e,r)=>(0,t.useSettableQuery)(["socialInfo",e??"",r??""],s,{enabled:!!e&&!!r})],415823);var a=e.i(247167),l=e.i(672464),n=e.i(271645),o=e.i(241458),i=e.i(91204),c=e.i(639372);let u="tab_leader",d=(0,c.atom)(!1);var x=e.i(542119),p=e.i(555702),m=e.i(392335),f=e.i(750214),h=e.i(741124),b=e.i(569692),g=e.i(490257),y=e.i(563150),v=e.i(441019);let w={discover:"Discover",pulse:"Pulse",trackers:"Trackers",rewards:"Rewards",vision:"Vision",meme:"Meme",perpetuals:"Perpetuals",yield:"Yield",portfolio:"Portfolio",Unknown:"Unknown"};var j=e.i(458768),k=e.i(404289),N=e.i(618566),S=e.i(940096),P=e.i(419006);let A=()=>{let e=(0,l.useAtomValue)(x.userIdAtom),t=(0,l.useAtomValue)(x.usernameAtom),r=(0,l.useAtomValue)(m.followedLobbyUserAtom),s=(0,l.useSetAtom)(m.followedLobbyUserAtom),i=(0,l.useSetAtom)(m.pauseFollowedLobbyUserAtom),c=(0,n.useRef)(null),u=(0,n.useMemo)(()=>{if(a.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&e)return{"localhost-password":a.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":e}},[e]),{sendJsonMessage:d,readyState:f}=(0,o.default)(e&&t?p.FRIENDS_URL:null,{shouldReconnect:()=>!0,reconnectInterval:250,queryParams:u,share:!0,reconnectAttempts:50,retryOnError:!0});(0,n.useEffect)(()=>{let e=c.current!==o.ReadyState.OPEN,t=f===o.ReadyState.OPEN;c.current=f,e&&t&&r&&d({type:"startFollowing",targetUserId:r})},[f,r,d]),(0,n.useEffect)(()=>{let e=()=>{r&&f===o.ReadyState.OPEN&&d({type:"stopFollowing",targetUserId:r})};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[r,f,d]);let h=(0,n.useCallback)(e=>{r&&r!==e&&f===o.ReadyState.OPEN&&d({type:"stopFollowing",targetUserId:r}),f===o.ReadyState.OPEN&&d({type:"startFollowing",targetUserId:e}),s(e),i(!1)},[r,f,d,s,i]),b=(0,n.useCallback)(()=>{r&&f===o.ReadyState.OPEN&&d({type:"stopFollowing",targetUserId:r}),s(null),i(!1)},[r,f,d,s,i]);return{followedLobbyUser:r,startFollowing:h,stopFollowing:b}},C=e=>{let{followedLobbyUser:t,startFollowing:r,stopFollowing:s}=A(),{handleFollowNavigation:a}=T(),l=(0,n.useMemo)(()=>t===e.userProfile.userId,[t,e.userProfile.userId]),o=(0,n.useMemo)(()=>"offline"!==e.presence,[e.presence]),i=(0,n.useCallback)(()=>{if(l)s();else{r(e.userProfile.userId);let t=e.currentChain??"sol";a(e.currentPage??"discover",e.currentSubpage,t)}},[l,r,s,e.userProfile.userId,e.currentChain,e.currentPage,e.currentSubpage,a]);return{isFollowingUser:l,handleFollowLobby:i,canFollowUser:o}},T=()=>{let e=(0,N.useRouter)(),t=(0,l.useSetAtom)(S.tabAtom),r=(0,l.useSetAtom)(P.currentPerpAtom);return{handleFollowNavigation:(0,n.useCallback)((s,a,l)=>{"discover"===s&&a&&"tab"in a?(t(a.tab),e.push(`/discover?chain=${l}`)):"perpetuals"===s&&a&&"currentPerp"in a?(r(a.currentPerp),e.push("/perpetuals")):"meme"===s&&a&&"pairAddress"in a?e.push(`/meme/${a.pairAddress}?chain=${l}`):e.push(`/${s}?chain=${l}`)},[e,t,r])}};e.s(["useFollowUser",0,C,"useFollowingActions",0,A,"useHandleFollowLobby",0,T],751380);var I=e.i(391735),M=e.i(60166),$=e.i(800473),B=e.i(851388);e.i(255730);var L=e.i(885438),U=e.i(754825),F=e.i(828073),E=e.i(472660),R=e.i(564012),_=e.i(877710),z=e.i(324077),D=e.i(738864),H=e.i(562406);let O=()=>{let e=(0,N.usePathname)(),t=(0,n.useRef)(e);(0,n.useEffect)(()=>{t.current=e},[e]);let r=(0,n.useCallback)(()=>t.current,[]),s=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(S.tabAtom),[])),a=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(P.currentPerpAtom),[])),l=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(P.currentCtxAtom),[])),o=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(h.currentChainAtom),[])),i=(0,f.useAtomCallback)((0,n.useCallback)(e=>{let t=e(h.currentChainAtom);return e("sol"===t?E.pairAtomSol:_.pairAtomBnb)},[])),c=(0,f.useAtomCallback)((0,n.useCallback)(e=>{let t=e(h.currentChainAtom);switch(t){case"sol":return e(E.lastTransactionAtomSol)?.priceSol;case"bnb":return e(_.lastTransactionAtomBnb)?.priceBnb;default:(0,R.assertUnreachable)(t)}},[])),u=(0,n.useCallback)(()=>{let e,t=r();if(!t)return null;let n=t.split("/").filter(Boolean);if(0===n.length)return{page:"Unknown"};let u=s(),d=a(),x=o(),p=i(),m=n[0].toLowerCase();if("discover"===m){if(!u)return null;e={tab:u}}else if("meme"===m){if(!p)return null;let t="sol"===x?(0,z.getRealProtocol)(p.protocol,p.extra,p.protocolDetails):(0,D.getRealProtocol)(p.protocol,H.BNB_PROTOCOL_INFO,p.extra),r=c();e={pairAddress:p.pairAddress,tokenAddress:p.tokenAddress,ticker:p.tokenTicker,name:p.tokenName,protocol:t,isMigrated:!!p.extra?.migratedFrom,supply:Number(p.supply),price:Number(r??0)}}else if("perpetuals"===m){if(!d)return null;e={currentPerp:d,price:Number(l()?.ctx.markPx??0)}}return{page:m,subpage:e,chain:x}},[r,l,c,s,a,i,o]);return(0,n.useMemo)(()=>({generatePathMessage:u}),[u])};e.s(["useFriendWebsocket",0,()=>{let e,t,r,s,c,A=(0,l.useAtomValue)(x.userIdAtom),C=(0,l.useSetAtom)(m.followerIdsAtom),{isLeader:R}=function(){let[e,t]=(0,l.useAtom)(d),r=(0,n.useRef)(null),s=(0,n.useRef)(null),a=(0,n.useRef)(null),o=(0,n.useRef)(null),c=(0,n.useRef)(null),x=(0,n.useRef)(0);return(0,n.useEffect)(()=>{let e=!1;a.current=new BroadcastChannel(u),o.current=crypto.randomUUID(),a.current.onmessage=async e=>{"new_focus"===e.data.type&&e.data.tabId!==o.current&&(c.current=e,s.current?.abort(),s.current=null,r.current?.(),r.current=null,c.current===e&&(await (0,i.sleep)(3e3),n(!1)))};let l=()=>{a.current?.postMessage({type:"new_focus",tabId:o.current})},n=async a=>{if(!("locks"in navigator)){console.warn("Web Locks API not supported - defaulting to leader"),t(!0);return}if(x.current>0){a&&l();return}x.current++;let n=new AbortController;s.current=n;try{let s=navigator.locks.request(u,{mode:"exclusive",signal:n.signal},async()=>{e||(t(!0),await new Promise(e=>{r.current=e}),t(!1))});a&&l(),await s}catch(e){return e instanceof Error&&"AbortError"!==e.name&&console.error("Error acquiring tab leader lock:",e),!1}finally{s.current===n&&(s.current=null),x.current--}},d=async()=>{n(!0)},p=async()=>{document.hidden||n(!0)};return window.addEventListener("focus",d),document.addEventListener("visibilitychange",p),document.hidden||n(!0),()=>{e=!0,s.current?.abort(),s.current=null,r.current?.(),r.current=null,window.removeEventListener("focus",d),window.removeEventListener("pageshow",d),document.removeEventListener("visibilitychange",p),a.current?.close(),a.current=null}},[]),{isLeader:e}}(),z=p.FRIENDS_URL;a.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&A&&(e={"localhost-password":a.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":A});let{updateIncomingFriend:D,updateFriendRequestAccepted:H,updateFriendPageUpdate:W,updateFriendRemoved:V,updateFriendProfile:q,updateFriendPresence:G}=(()=>{let e=(0,l.useSetAtom)(b.incomingFriendListAtom),t=(0,l.useSetAtom)(b.sentFriendListAtom),{acceptFriendRequest:r}=(0,k.useSocialTracker)(),s=(0,l.useSetAtom)(b.relationshipToFriendAtom),a=(0,l.useSetAtom)(b.usernameToDataAtom),o=(0,l.useSetAtom)(b.userIdToDataAtom),i=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(y.userLobbySettingsAtom),[])),c=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(b.userProfileIdAtom),[])),u=(0,n.useCallback)(t=>{e(e=>{let r=new Map(e);return r.set(t.profile.username,{relationshipId:t.relationshipId,userProfile:t.profile,createdAt:t.timestamp}),r});let l={username:t.profile.username,relationshipId:t.relationshipId,userId:t.profile.userId,relationshipType:"incoming"};s(e=>{let r=new Map(e);return r.set(t.relationshipId,l),r}),a(e=>{let r=new Map(e);return r.set(t.profile.username,l),r}),o(e=>{let r=new Map(e);return r.set(t.profile.userId,l),r}),i().disableFriendRequestToasts||j.default.social(t.profile.avatarUrl,t.profile.username,"sent you a friend request",void 0,void 0,"Accept",()=>{r(t.relationshipId,t.profile.username)},{duration:i().toastDuration}),g.relationshipEvents.emitIncomingRequest({relationshipId:t.relationshipId,profile:{userId:t.profile.userId,username:t.profile.username,avatarUrl:t.profile.avatarUrl??null,bannerUrl:t.profile.bannerUrl??null,color:t.profile.color??null,socialLinks:t.profile.socialLinks??{twitterHandle:null,youtubeHandle:null,twitchHandle:null}},createdAt:t.timestamp,requestUsername:t.profile.username}),g.relationshipEvents.emitCountChange("incoming",1)},[e,s,a,o,r,i]),{handleFollowNavigation:d}=T(),x=(0,f.useAtomCallback)((0,n.useCallback)((e,t,r)=>{try{if(!(r.page in w))return void console.error("Invalid page:",r.page);let s=r.page;if("meme"===r.page){let e=r.subpage;if(!e)return void console.error("Pair subpage data not found");let t=(0,v.isValidSolanaAddress)(e.pairAddress)||(0,v.isValidEvmAddress)(e.pairAddress),s=(0,v.isValidSolanaAddress)(e.tokenAddress)||(0,v.isValidEvmAddress)(e.tokenAddress),a=e.ticker&&e.ticker.length>0&&e.ticker.length<=20,l=e.name&&e.name.length>0&&e.name.length<=50,n=r.chain&&r.chain in h.chainToInfoMap;if(!t||!s||!a||!l||!n)return}else if("discover"===s){let e=r.subpage;if(!e||!e.tab)return void console.error("Discover tab not found")}else if("perpetuals"===s){let e=r.subpage;if(!e||!e.currentPerp)return void console.error("Perp not found")}let a=e(b.userIdToDataAtom).get(r.userId);a&&(t(b.friendListAtom,e=>{let t=new Map(e),l=t.get(a.username);return l&&t.set(a.username,{...l,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now(),presence:"online"}),t}),t(b.friendProfileDataAtom,e=>e?.userProfile.userId===r.userId?{...e,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now(),presence:"online"}:e));let l=e(m.lobbyUserMapAtom).get(r.userId);l&&(t(m.lobbyUserMapAtom,e=>{let t=new Map(e);return t.set(r.userId,{...l,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now()}),t}),t(m.myLobbyInfoAtom,e=>e?{...e,members:e.members.map(e=>e.userProfile.userId===r.userId?{...e,currentPage:s,currentSubpage:r.subpage,currentChain:r.chain||null,lastUpdatedTimestamp:Date.now()}:e)}:e));let n=e(m.followedLobbyUserAtom),o=e(m.pauseFollowedLobbyUserAtom);n!==r.userId||o||d(s,r.subpage,r.chain||"sol")}catch(e){console.error("Error parsing subpage:",e);return}},[d])),p=(0,f.useAtomCallback)((0,n.useCallback)((e,r,l)=>{let{profile:n,relationshipId:c,presence:u,page:d,subpage:p,chain:m}=l,{userId:f,username:h}=n,y=e(b.relationshipToFriendAtom).get(c),v=e(b.sentFriendListAtom).get(h),w=e(b.incomingFriendListAtom).get(h),k=y?.relationshipType==="outgoing"||!!v,N=y?.relationshipType==="incoming"||!!w;r(b.friendListAtom,e=>{let t=new Map(e);return t.set(h,{currentPage:d||"Unknown",currentSubpage:p,currentChain:m||null,relationshipId:c,lastUpdatedTimestamp:Date.now(),userProfile:{avatarUrl:n.avatarUrl??null,bannerUrl:n.bannerUrl??null,color:n.color??null,userId:f,username:h,socialLinks:n.socialLinks??{twitterHandle:null,youtubeHandle:null,twitchHandle:null}},presence:u||"online"}),t}),v&&t(e=>{let t=new Map(e);return t.delete(h),t}),w&&r(b.incomingFriendListAtom,e=>{let t=new Map(e);return t.delete(h),t});let S={username:h,relationshipId:c,userId:f,relationshipType:"accepted"};s(e=>{let t=new Map(e);return y?.relationshipId&&y.relationshipId!==c&&t.delete(y.relationshipId),t.set(c,S),t}),a(e=>{let t=new Map(e);return t.set(h,S),t}),o(e=>{let t=new Map(e);return t.set(f,S),t}),i().disableFriendRequestToasts||j.default.social(n.avatarUrl||null,h,N&&!k?"is now your friend":"accepted your friend request",void 0,void 0,void 0,void 0,{duration:i().toastDuration}),k&&(g.relationshipEvents.emitRemoveOutgoingRequest(f),g.relationshipEvents.emitCountChange("outgoing",-1)),N&&(g.relationshipEvents.emitRemoveIncomingRequest(f),g.relationshipEvents.emitCountChange("incoming",-1)),x({type:"friendPageUpdate",timestamp:l.timestamp,userId:f,page:d,subpage:p,chain:m})},[t,s,a,o,i,x])),N=(0,f.useAtomCallback)((0,n.useCallback)(async(e,t,r)=>{let s=e(b.usernameToDataAtom),a=s.get(r.username);if(!a)return;let l=new Map(s);l.delete(r.username),t(b.usernameToDataAtom,l);let n=new Map(e(b.relationshipToFriendAtom));if(!a.relationshipId)return;n.delete(a.relationshipId),t(b.relationshipToFriendAtom,n);let o=new Map(e(b.userIdToDataAtom));switch(o.delete(a.userId),t(b.userIdToDataAtom,o),a.relationshipType){case"accepted":{let s=new Map(e(b.friendListAtom));s.delete(r.username),t(b.friendListAtom,s);break}case"incoming":{let s=new Map(e(b.incomingFriendListAtom));s.delete(r.username),t(b.incomingFriendListAtom,s);break}case"outgoing":{let s=new Map(e(b.sentFriendListAtom));s.delete(r.username),t(b.sentFriendListAtom,s);break}case"blocked":{let s=new Map(e(b.blockedFriendListAtom));s.delete(r.username),t(b.blockedFriendListAtom,s);break}default:console.error("Unknown relationship type:",a.relationshipType)}},[])),S=(0,f.useAtomCallback)((0,n.useCallback)((e,t,r)=>{let s=e(b.userIdToDataAtom).get(r.userId);if(s){let e=s.username,a=e;if(r.username&&r.username!==e){let l=r.username,n={...s,username:l};t(b.usernameToDataAtom,t=>{let r=new Map(t);return r.delete(e),r.set(l,n),r}),t(b.relationshipToFriendAtom,e=>{let t=new Map(e);return s.relationshipId?t.set(s.relationshipId,n):console.error("Friend relationship not found"),t}),t(b.userIdToDataAtom,e=>{let t=new Map(e);return t.set(r.userId,n),t}),a=l}t(b.friendListAtom,t=>{let s=new Map(t),l=s.get(e);return l&&(s.delete(e),s.set(a,{...l,userProfile:{avatarUrl:r.avatar||l.userProfile.avatarUrl,bannerUrl:r.banner||l.userProfile.bannerUrl,color:r.color||l.userProfile.color,userId:r.userId||l.userProfile.userId,username:a,socialLinks:r.socialLinks||l.userProfile.socialLinks},presence:r.presence||l.presence})),s})}let a=e(m.lobbyUserMapAtom).get(r.userId);if(a){let e={...a.userProfile,avatarUrl:r.avatar||a.userProfile.avatarUrl,bannerUrl:r.banner||a.userProfile.bannerUrl,bio:r.bio||a.userProfile.bio,color:r.color||a.userProfile.color,socialLinks:{twitterHandle:r.socialLinks?.twitterHandle||a.userProfile.socialLinks?.twitterHandle,youtubeHandle:r.socialLinks?.youtubeHandle||a.userProfile.socialLinks?.youtubeHandle,twitchHandle:r.socialLinks?.twitchHandle||a.userProfile.socialLinks?.twitchHandle},username:r.username||a.userProfile.username};t(m.lobbyUserMapAtom,t=>{let s=new Map(t);return s.set(r.userId,{...a,userProfile:e,presence:r.presence||a.presence}),s}),t(m.myLobbyInfoAtom,t=>t?{...t,members:t.members.map(t=>t.userProfile.userId===r.userId?{...t,userProfile:e,presence:r.presence||t.presence}:t)}:t)}r.userId===c()&&t(b.userProfileAtom,e=>e?{...e,avatarUrl:r.avatar||e.avatarUrl,bannerUrl:r.banner||e.bannerUrl,bio:r.bio||e.bio,color:r.color||e.color,socialLinks:r.socialLinks||e.socialLinks,userId:r.userId||e.userId,username:r.username||e.username}:e)},[c])),P=(0,f.useAtomCallback)((0,n.useCallback)((e,t,r)=>{let s=e(b.userIdToDataAtom).get(r.userId);if(!s)return;t(b.friendListAtom,e=>{let t=new Map(e),a=t.get(s.username);return a&&t.set(s.username,{...a,presence:r.presence,lastUpdatedTimestamp:r.timestamp}),t}),t(b.friendProfileDataAtom,e=>e?.userProfile.userId===r.userId?{...e,presence:r.presence,lastUpdatedTimestamp:r.timestamp}:e);let a=e(m.lobbyUserMapAtom).get(r.userId);a&&(t(m.lobbyUserMapAtom,e=>{let t=new Map(e);return t.set(r.userId,{...a,presence:r.presence,lastUpdatedTimestamp:r.timestamp}),t}),t(m.myLobbyInfoAtom,e=>e?{...e,members:e.members.map(e=>e.userProfile.userId===r.userId?{...e,presence:r.presence,lastUpdatedTimestamp:r.timestamp}:e)}:e))},[]));return(0,n.useMemo)(()=>({updateIncomingFriend:u,updateFriendRequestAccepted:p,updateFriendPageUpdate:x,updateFriendRemoved:N,updateFriendProfile:S,updateFriendPresence:P}),[u,p,x,N,S,P])})(),{handleLobbyInviteReceived:K,handleLobbyInviteExpired:Y,handleLobbyRequestReceived:X,handleLobbyRequestExpired:J,handleUserJoinedLobby:Q,handleUserLeftLobby:Z,handleLobbyOwnershipTransferred:ee,handleLobbyUpdated:et,handleKickedFromLobby:er,handleFriendLobbyInfoUpdated:es,handleLobbyChatMessage:ea,handleLobbySharePnlMessage:el,handleLobbyMemberRemovedWallets:en,handleLobbyMemberBalanceUpdate:eo,handleLobbyBannerUpdated:ei,handleResetPnl:ec,handleLobbyTokenAlert:eu,handleLobbyTokenAlertDeleted:ed}=(()=>{let e=(0,l.useSetAtom)(m.lobbyInvitesAtom),t=(0,l.useSetAtom)(m.lobbyRequestsAtom),r=(0,l.useSetAtom)(m.myLobbyInfoAtom),s=(0,l.useSetAtom)(m.lobbyUserMapAtom),a=(0,l.useAtomValue)(m.lobbyUserMapAtom),o=(0,l.useSetAtom)(b.friendListAtom),i=(0,l.useAtomValue)(b.friendListAtom),c=(0,l.useSetAtom)(m.friendLobbyDataAtom),u=(0,l.useAtomValue)(b.userIdToDataAtom),d=(0,l.useSetAtom)(M.lobbyChatMessagesAtom),x=(0,l.useSetAtom)($.alertsMigratedAtom),p=(0,l.useSetAtom)(M.messageAuthorsAtom),h=(0,l.useSetAtom)($.lobbyAlertsAtom),g=(0,l.useSetAtom)($.lobbyAlertsCurrentPriceAtom),v=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(y.userLobbySettingsAtom),[])),w=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(b.userProfileIdAtom),[])),k=(0,l.useSetAtom)(M.lastChatCursorAtom),S=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(m.myLobbyInfoAtom),[])),P=(0,l.useSetAtom)(m.sharedSolWalletsAtom),A=(0,l.useSetAtom)(m.sharedBnbWalletsAtom),{acceptLobbyInvite:C,acceptLobbyRequest:T,promoteLobbyRequest:L}=(0,I.useLobbyApi)(),U=(0,N.useRouter)(),F=(0,n.useCallback)(t=>{let r=!1;if(e(e=>{let s=new Map(e),a=`${t.lobbyId}-${t.inviterUserId}`;return s.has(a)||(r=!0),s.set(a,{lobbyId:t.lobbyId,lobbyName:t.lobbyName,inviterUserId:t.inviterUserId,inviterUsername:t.inviterUsername,lobbyMemberCount:t.lobbyMemberCount,lobbyMemberUsernames:t.lobbyMemberUsernames,createdAt:t.timestamp}),s}),r&&v().receiveLobbyToast){let e=u.get(t.inviterUserId),r=null;if(e){let t=i.get(e.username);r=t?.userProfile.avatarUrl||null}j.default.social(r,t.inviterUsername,`invited you to join ${t.lobbyName}`,void 0,void 0,"Join",()=>{C(t.lobbyId)},{duration:v().toastDuration})}},[e,C,u,i,v]),E=(0,n.useCallback)(t=>{e(e=>{let r=new Map(e),s=`${t.lobbyId}-${t.inviterUserId}`;return r.delete(s),r})},[e]),R=(0,n.useCallback)(e=>{let r=!1;if(t(t=>{let s=new Map(t),a=s.get(e.lobbyId)||[];return a.some(t=>t.requesterUserId===e.requesterUserId)||(r=!0,s.set(e.lobbyId,[...a,{lobbyId:e.lobbyId,requesterUserId:e.requesterUserId,requesterUsername:e.requesterUsername,requesteeUserId:"",referredByUserId:e.referredByUserId,referredByUsername:e.referredByUsername,createdAt:e.timestamp}])),s}),r&&v().receiveLobbyToast){let t=e.referredByUsername?`wants to join (via ${e.referredByUsername})`:"wants to join your lobby",r=u.get(e.requesterUserId),s=null;if(r){let e=i.get(r.username);s=e?.userProfile.avatarUrl||null}let a=S(),l=w();if(a?.leaderUserId===l)j.default.social(s,e.requesterUsername,t,void 0,void 0,"Approve",()=>{T(e.requesterUserId)},{duration:v().toastDuration});else{let r=u.get(e.requesterUserId),a=r?.relationshipId;a&&j.default.social(s,e.requesterUsername,t,void 0,void 0,"Forward to Owner",()=>{L(a)},{duration:v().toastDuration})}}},[t,T,L,u,i,v,S,w]),_=(0,n.useCallback)(e=>{t(t=>{let r=new Map(t),s=(r.get(e.lobbyId)||[]).filter(t=>t.requesterUserId!==e.requesterUserId);return s.length>0?r.set(e.lobbyId,s):r.delete(e.lobbyId),r})},[t]),z=(0,n.useCallback)(e=>{let a=!1,l={userProfile:{userId:e.userId,username:e.username,avatarUrl:e.avatarUrl},currentPage:e.currentPage,currentSubpage:e.currentSubpage,currentChain:e.currentChain,presence:"online",lastUpdatedTimestamp:Date.now(),isOnline:!0,sharedWallets:e.sharedWallets};r(t=>!t||t.members.some(t=>t.userProfile.userId===e.userId)?t:(a=!0,{...t,members:[...t.members,l]})),s(t=>{let r=new Map(t);return r.set(e.userId,l),r}),t(t=>{let r=new Map(t);for(let[t,s]of r.entries()){let a=s.filter(t=>t.requesterUserId!==e.userId);a.length>0?r.set(t,a):r.delete(t)}return r}),p(t=>{let r=new Map(t);return r.set(e.userId,{userId:e.userId,username:e.username,avatarUrl:e.avatarUrl}),r}),a&&v().receiveLobbyToast&&j.default.social(e.avatarUrl,e.username,"joined the lobby",void 0,void 0,void 0,void 0,{duration:v().toastDuration})},[r,s,t,v,p]),D=(0,n.useCallback)(e=>{let t=!1,l=a.get(e.userId);r(r=>r?(r.members.some(t=>t.userProfile.userId===e.userId)&&(t=!0),{...r,members:r.members.filter(t=>t.userProfile.userId!==e.userId),aggregateStats:{sol:{totalPnl:e.lobbyStats.sol?.totalPnl??0,totalBalance:e.lobbyStats.sol?.totalBalance??0},bnb:{totalPnl:e.lobbyStats.bnb?.totalPnl??0,totalBalance:e.lobbyStats.bnb?.totalBalance??0}}}):r),s(t=>{let r=new Map(t);return r.delete(e.userId),r}),t&&v().receiveLobbyToast&&j.default.social(l?.userProfile.avatarUrl||null,e.username,"left the lobby",void 0,void 0,void 0,void 0,{duration:v().toastDuration})},[r,s,a,v]),H=(0,n.useCallback)(e=>{let t=!1,s=a.get(e.newOwnerUserId);r(r=>r?(r.leaderUserId!==e.newOwnerUserId&&(t=!0),{...r,leaderUserId:e.newOwnerUserId,name:e.newLobbyName}):r),t&&v().receiveLobbyToast&&j.default.social(s?.userProfile.avatarUrl||null,e.newOwnerUsername,"is now the lobby leader",void 0,void 0,void 0,void 0,{duration:v().toastDuration})},[r,a,v]),O=(0,n.useCallback)(a=>{r(e=>(e&&e.lobbyId!==a.lobbyInfo.lobbyId&&(d([]),p(new Map),h([]),g(new Map),x(new Map)),a.lobbyInfo)),a.lobbyInfo.messageAuthors&&p(new Map(a.lobbyInfo.messageAuthors.map(e=>[e.userId,e]))),s(new Map(a.lobbyInfo.members.map(e=>[e.userProfile.userId,e])));let l=new Map;if(a.lobbyInfo.activeAlerts){h(a.lobbyInfo.activeAlerts.map((e,t)=>({alertId:t,pairAddress:e.pairAddress,tokenAddress:e.tokenAddress,tokenName:e.tokenName,tokenTicker:e.tokenTicker,tokenImage:e.tokenImage,protocol:e.proto,isMigrated:e.isMigrated,callPriceNative:e.priceNative,callMarketCap:e.mc,supply:e.supply,timestamp:e.createdAt,decimals:e.decimals,userId:e.createdByUserId,holderIds:e.boughtInUsers,chain:e.chain})).reverse());let e=new Map;for(let t of a.lobbyInfo.activeAlerts){let r=e.get(t.pairAddress);r||(r=new Map,e.set(t.pairAddress,r)),r.set(t.feedItemId,{price:t.currentPriceNative,ATH:t.allTimeHighPriceNative})}g(e);let t=new Map;for(let e of a.lobbyInfo.activeAlerts)t.set(e.tokenAddress,{isMigrated:e.isMigrated,pairAddress:e.pairAddress}),l.set(e.feedItemId,{isMigrated:e.isMigrated,protocol:e.proto,supply:e.supply,pairAddress:e.pairAddress});x(t)}if(a.lobbyInfo.feed?.items){let e=(0,B.convertFeedToMessages)(a.lobbyInfo.feed.items);for(let t of e)if("call"===t.t&&t.feedItemId){let e=l.get(t.feedItemId);e&&(t.isMigrated=e.isMigrated,t.proto=e.protocol,t.tokenSupply=e.supply,t.pairAddress=e.pairAddress)}d(e)}e(e=>{let t=new Map(e);for(let[e,r]of t.entries())r.lobbyId===a.lobbyInfo.lobbyId&&t.delete(e);return t});let n=a.lobbyInfo.incomingRequests;n&&n.length>0?t(e=>{let t=new Map(e);return t.set(a.lobbyInfo.lobbyId,n),t}):t(e=>{let t=new Map(e);return t.delete(a.lobbyInfo.lobbyId),t}),k(a.lobbyInfo.feed?.nextCursor??null)},[r,e,d,p,s,h,g,x,k,t]),W=(0,n.useCallback)(e=>{r(t=>(t&&t.lobbyId===e.oldLobbyId&&j.default.error("You were kicked from the lobby"),t)),d([]),p(new Map),r(e.newLobbyInfo)},[r,d,p]),V=(0,n.useCallback)(e=>{let t=u.get(e.userId);t?(o(r=>{let s=r.get(t.username);if(!s)return r;let a=new Map(r);return a.set(t.username,{...s,lobbyInfo:1===e.memberCount?null:{lobbyId:e.lobbyId,name:e.lobbyName,memberCount:e.memberCount}}),a}),c(t=>{let r=new Map(t);return 1===e.memberCount?r.delete(e.userId):r.set(e.userId,{lobbyId:e.lobbyId,lobbyName:e.lobbyName,memberCount:e.memberCount}),r})):console.error("User not found in userIdToData! userId:",e.userId)},[o,c,u]),q=(0,n.useCallback)(e=>{d(t=>{let r=t.findIndex(t=>"chat"===t.t&&t.pending&&t.uid===e.userId&&t.clientId===e.clientId);if(-1!==r){let s=t[r];if("chat"===s.t){let a=Math.max(0,175-(Date.now()-s.ts));if(a>0)return setTimeout(()=>{d(t=>{let r=t.findIndex(e=>e===s);if(-1===r)return t;let a=[...t];return a[r]={t:"chat",ts:e.timestamp,uid:s.uid,m:s.m,pending:!1},a})},a),t;let l=[...t];return l[r]={t:"chat",ts:e.timestamp,uid:s.uid,m:s.m,pending:!1},l}return t}return t.some(t=>"chat"===t.t&&t.uid===e.userId&&t.m===e.message&&t.ts===e.timestamp)?t:[...t,{t:"chat",ts:e.timestamp,uid:e.userId,m:e.message}]})},[d]),G=(0,n.useCallback)(e=>{d(t=>{let r=t.findIndex(t=>"sharePnl"===t.t&&t.pending&&t.uid===e.userId&&t.tokenAddress===e.tokenAddress&&1e-4>Math.abs(t.totalPnl-e.totalPnl));if(-1!==r){let s=[...t],a=s[r];return"sharePnl"===a.t&&(s[r]={...a,ts:e.timestamp,pending:!1,username:e.username,rewardsLevel:e.rewardsLevel||void 0}),s}return t.some(t=>"sharePnl"===t.t&&t.uid===e.userId&&t.tokenAddress===e.tokenAddress&&5e3>Math.abs(t.ts-e.timestamp))?t:[...t,{t:"sharePnl",ts:e.timestamp,uid:e.userId,chain:e.chain,totalPnl:e.totalPnl,totalInvested:e.totalInvested,totalPosition:e.totalPosition,tokenAddress:e.tokenAddress,pairAddress:e.pairAddress,tokenTicker:e.tokenTicker,tokenName:e.tokenName,tokenImage:e.tokenImage,username:e.username,rewardsLevel:e.rewardsLevel||void 0,pnlCurrency:e.pnlCurrency,m:e.message}]})},[d]),K=(0,n.useCallback)(e=>{if(r(t=>t?{...t,aggregateStats:{...t.aggregateStats,[e.chain]:e.lobbyStats},members:t.members.map(t=>{if(t.userProfile.userId!==e.userId)return t;let r=t.sharedWallets[e.chain];if(!r?.sharedWalletBalances)return t;let s={...r.sharedWalletBalances};for(let t of e.wallets)delete s[t];return{...t,sharedWallets:{...t.sharedWallets,[e.chain]:{sharedWalletBalances:s,stats:e.userStats}}}})}:t),e.userId===w()){let t=new Set(e.wallets);"sol"===e.chain?P(e=>[...e||[]].filter(e=>!t.has(e))):"bnb"===e.chain&&A(e=>[...e||[]].filter(e=>!t.has(e)))}},[r,P,A,w]),Y=(0,n.useCallback)(e=>{r(t=>{try{if(!t)return t;return{...t,aggregateStats:{...t.aggregateStats,[e.chain]:e.lobbyStats},members:t.members.map(t=>{if(t.userProfile.userId!==e.userId)return t;let r=t.sharedWallets[e.chain],s={...r?.sharedWalletBalances||{},...e.wallets};return{...t,sharedWallets:{...t.sharedWallets,[e.chain]:{sharedWalletBalances:s,stats:e.userStats}}}})}}catch(e){return console.error("Error updating lobby member balance:",e),t}}),e.userId===w()&&("sol"===e.chain?P(t=>Array.from(new Set([...t||[],...Object.keys(e.wallets)]))):"bnb"===e.chain&&A(t=>Array.from(new Set([...t||[],...Object.keys(e.wallets)]))))},[r,P,A,w]),X=(0,n.useCallback)(e=>{r(t=>t?{...t,banner:e.banner}:t)},[r]),J=(0,n.useCallback)(e=>{j.default.success("P&L has been reset for all lobby members"),r(e=>e?{...e,aggregateStats:{sol:{...e.aggregateStats.sol,totalPnl:0},bnb:{...e.aggregateStats.bnb,totalPnl:0}},members:e.members.map(e=>({...e,sharedWallets:{sol:{...e.sharedWallets.sol,stats:{...e.sharedWallets.sol.stats,totalPnl:0}},bnb:{...e.sharedWallets.bnb,stats:{...e.sharedWallets.bnb.stats,totalPnl:0}}}}))}:e)},[r]),Q=(0,n.useCallback)(e=>{let t={alertId:Date.now(),pairAddress:e.pairAddress,tokenAddress:e.tokenAddress,tokenName:e.tokenName,tokenTicker:e.tokenTicker,tokenImage:e.tokenImage,protocol:e.proto,isMigrated:e.isMigrated,callPriceNative:e.priceNative,callMarketCap:e.mc,supply:e.supply,timestamp:e.timestamp,decimals:e.decimals,userId:e.userId,holderIds:[],chain:e.chain};h(e=>[t,...e]),g(t=>{let r=new Map(t),s=new Map(r.get(e.pairAddress)??[]);return s.set(e.feedItemId,{price:e.priceNative,ATH:e.priceNative}),r.set(e.pairAddress,s),r}),x(t=>{let r=new Map(t);return r.set(e.tokenAddress,{isMigrated:e.isMigrated,pairAddress:e.pairAddress}),r});let r={t:"call",ts:e.timestamp,uid:e.userId,chain:e.chain,tokenName:e.tokenName,tokenTicker:e.tokenTicker,tokenAddress:e.tokenAddress,pairAddress:e.pairAddress,tokenImage:e.tokenImage,tokenSupply:e.supply,tokenDecimals:e.decimals,mc:e.mc,proto:e.proto,isMigrated:e.isMigrated,feedItemId:e.feedItemId};d(e=>[...e,r]);let s=a.get(e.userId),l=s?.userProfile.userId===w();s&&v().receiveLobbyToast&&!l&&j.default.social(s?.userProfile.avatarUrl||null,s?.userProfile.username||"","called",e.tokenImage,e.tokenTicker,"View",()=>{let t=`/meme/${e.pairAddress}?chain=${e.chain}`;U.push(t)},{duration:v().toastDuration})},[h,g,d,U,a,v,w,x]),Z=(0,n.useCallback)(e=>{h(t=>t.filter(t=>t.alertId!==e.alertId))},[h]);return(0,n.useMemo)(()=>({handleLobbyInviteReceived:F,handleLobbyInviteExpired:E,handleLobbyRequestReceived:R,handleLobbyRequestExpired:_,handleUserJoinedLobby:z,handleUserLeftLobby:D,handleLobbyOwnershipTransferred:H,handleLobbyUpdated:O,handleKickedFromLobby:W,handleFriendLobbyInfoUpdated:V,handleLobbyChatMessage:q,handleLobbySharePnlMessage:G,handleLobbyMemberRemovedWallets:K,handleLobbyMemberBalanceUpdate:Y,handleLobbyBannerUpdated:X,handleResetPnl:J,handleLobbyTokenAlert:Q,handleLobbyTokenAlertDeleted:Z}),[F,E,R,_,z,D,H,O,W,V,q,G,K,Y,X,J,Q,Z])})(),ex=(0,n.useCallback)(e=>{let t=JSON.parse(e);"friendRequestSent"===t.type?D(t):"friendRequestAccepted"===t.type?H(t):"friendPageUpdate"===t.type?W(t):"friendRemoved"===t.type?V(t):"friendProfileUpdate"===t.type?q(t):"userPresenceUpdate"===t.type?G(t):"lobbyInviteReceived"===t.type?K(t):"lobbyInviteExpired"===t.type?Y(t):"lobbyRequestReceived"===t.type?X(t):"lobbyRequestExpired"===t.type?J(t):"userJoinedLobby"===t.type?Q(t):"userLeftLobby"===t.type?Z(t):"lobbyOwnershipTransferred"===t.type?ee(t):"lobbyUpdated"===t.type?et(t):"kickedFromLobby"===t.type?er(t):"friendLobbyInfoUpdated"===t.type?es(t):"lobbyChatMessage"===t.type?ea(t):"lobbySharePnlMessage"===t.type?el(t):"lobbyMemberRemovedWallets"===t.type?en(t):"lobbyMemberBalanceUpdate"===t.type?eo(t):"lobbyBannerUpdated"===t.type?ei(t):"lobbyPnlReset"===t.type?ec(t):"lobbyTokenAlertMessage"===t.type?eu(t):"lobbyAlertDeleted"===t.type?ed(t):"followersUpdate"===t.type&&C(t.followers)},[D,H,W,V,q,G,K,Y,X,J,Q,Z,ee,et,er,es,ea,el,en,eo,ei,ec,eu,ed,C]),ep=(0,n.useRef)(!0),{generatePathMessage:em}=O(),{createBalanceDumpUpdate:ef}=(t=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(m.sharedSolWalletsAtom),[])),r=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(m.sharedBnbWalletsAtom),[])),s=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(U.solBalancesAtom),[])),c=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(L.evmBalancesAtom),[])),{createBalanceDumpUpdate:(0,n.useCallback)(()=>{let e={},a=t(),l=r(),n=s(),o=c();if(a)for(let t of a){let r=n.data.get(t);r&&(e[t]=r.balanceSol)}let i={};if(l)for(let e of l){let t=o.data.get(e.toLowerCase());t&&(i[e]=new F.default(t.balanceWei).dividedBy(1e18).toNumber())}return{sol:e,bnb:i}},[t,r,s,c])}),{sendMessage:eh,sendJsonMessage:eb,readyState:eg}=(0,o.default)(A?z:null,{shouldReconnect:()=>!0,reconnectInterval:250,queryParams:e,share:!0,reconnectAttempts:50,retryOnError:!0,onOpen:()=>{if(ep.current){ep.current=!1;return}if(R){let e=em();e&&eb({type:"pageUpdate",...e});let t=ef();t&&(Object.keys(t.sol).length>0||Object.keys(t.bnb).length>0)&&eb({type:"walletUpdate",action:"balance",...Object.keys(t.sol).length>0&&{sol:t.sol},...Object.keys(t.bnb).length>0&&{bnb:t.bnb}})}},onClose:()=>{},onError:e=>{console.error("WebSocket connection error:",{url:z,error:e instanceof Error?e.message:e,readyState:o.ReadyState[eg],timestamp:new Date().toISOString()})},onMessage:e=>{ex(e.data)}});(({isLeader:e,sendJsonMessage:t})=>{let r=(0,N.usePathname)(),s=(0,l.useAtomValue)(S.tabAtom),a=(0,l.useAtomValue)(P.currentPerpAtom),o=(0,l.useAtomValue)(h.currentChainAtom),i=(0,l.useAtomValue)("sol"===o?E.pairAtomSol:_.pairAtomBnb),c=(0,l.useAtomValue)(b.userProfileIdAtom),u=(0,l.useSetAtom)(m.myLobbyInfoAtom),{generatePathMessage:d}=O();return(0,n.useEffect)(()=>{if(e){let e=d();e&&(t({type:"pageUpdate",...e}),u(t=>t?{...t,members:t.members.map(t=>t.userProfile.userId===c?{...t,currentPage:e.page,...void 0!==e.subpage&&{currentSubpage:e.subpage},currentChain:e.chain??null,lastUpdatedTimestamp:Date.now()}:t)}:t))}},[e,d,t,r,u,c,s,i?.pairAddress,o,a]),(0,n.useMemo)(()=>({generatePathMessage:d}),[d])})({isLeader:R,sendJsonMessage:eb}),(({sendMessage:e})=>{let t=(0,n.useCallback)(()=>{e(".")},[e]);(0,n.useEffect)(()=>{let e=setInterval(()=>{t()},p.UPDATE_HEARTBEAT_INTERVAL);return()=>{clearInterval(e)}},[t])})({sendMessage:eh}),(({isLeader:e,sendJsonMessage:t})=>{let r=(0,l.useAtomValue)(L.totalMonitoredEvmBalanceAtom),s=(0,l.useAtomValue)(U.totalMonitoredSolBalanceAtom),a=(0,l.useAtomValue)(L.monitoredEvmWalletsAtom),o=(0,l.useAtomValue)(U.monitoredSolWalletsAtom),i=(0,l.useAtomValue)(L.evmBalancesAtom),c=(0,l.useAtomValue)(U.solBalancesAtom),u=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(U.solBalancesAtom),[])),d=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(L.evmBalancesAtom),[])),x=(0,l.useAtomValue)(m.sharedSolWalletsAtom),h=(0,l.useAtomValue)(m.sharedBnbWalletsAtom),b=(0,f.useAtomCallback)((0,n.useCallback)(e=>new Set(e(m.sharedSolWalletsAtom)),[])),g=(0,f.useAtomCallback)((0,n.useCallback)(e=>new Set(e(m.sharedBnbWalletsAtom)),[])),y=(0,n.useRef)(new F.default(r)),v=(0,n.useRef)(new F.default(s)),w=(0,n.useRef)(new Map),j=(0,n.useRef)(new Map),k=(0,n.useRef)(new Set),N=(0,n.useRef)(new Set),[S,P]=(0,n.useState)({updateSol:new Map,updateBnb:new Map,hideSol:new Set,hideBnb:new Set});!function({time:e,state:t,comp:r,act:s}){let a=(0,n.useRef)(void 0),l=(0,n.useRef)(null),o=(0,n.useRef)(!1),i=(0,n.useRef)(s),c=(0,n.useRef)(r);(0,n.useEffect)(()=>{i.current=s},[s]),(0,n.useEffect)(()=>{c.current=r},[r]),(0,n.useEffect)(()=>{let r=a.current;if(a.current=t,!(!c.current||c.current(r,t)))return;if(l.current){o.current=!0;return}i.current();let s=Math.max(0,e),n=()=>{if(o.current){o.current=!1,i.current(),l.current=setTimeout(n,s);return}l.current=null};return l.current=setTimeout(n,s),()=>{}},[e,t]),(0,n.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[])}({time:p.BALANCE_UPDATE_INTERVAL,state:S,comp:(e,t)=>t.updateSol.size>0||t.updateBnb.size>0||t.hideSol.size>0||t.hideBnb.size>0,act:()=>{if(!e)return;let r=(e,t)=>Object.fromEntries(Array.from(e.entries()).filter(([e])=>!t.has(e))),s=r(S.updateSol,S.hideSol),a=r(S.updateBnb,S.hideBnb),l=Array.from(S.hideSol).reduce((e,t)=>(e[t]=0,e),{}),n=Array.from(S.hideBnb).reduce((e,t)=>(e[t]=0,e),{});(Object.keys(s).length>0||Object.keys(a).length>0)&&t({type:"walletUpdate",action:"balance",...Object.keys(s).length>0&&{sol:s},...Object.keys(a).length>0&&{bnb:a}}),(Object.keys(l).length>0||Object.keys(n).length>0)&&t({type:"walletUpdate",action:"hide",...Object.keys(l).length>0&&{sol:l},...Object.keys(n).length>0&&{bnb:n}}),P({updateSol:new Map,updateBnb:new Map,hideSol:new Set,hideBnb:new Set})}});let A=(0,n.useCallback)(()=>{let e=new F.default(r),t=new F.default(s),l=e.minus(y.current).abs(),n=t.minus(v.current).abs(),u=b(),d=g();if(u&&d){if(l.isGreaterThan(p.BALANCE_UPDATE_THRESHOLD.bnb)||n.isGreaterThan(p.BALANCE_UPDATE_THRESHOLD.sol)){let e=new Map;for(let t of a){if(!d.has(t.publicKey))continue;let r=i.data.get(t.publicKey.toLowerCase());if(!r)continue;let s=w.current.has(t.publicKey.toLowerCase()),a=w.current.get(t.publicKey.toLowerCase()),l=new F.default(r?.balanceWei??0).dividedBy(1e18),n=l.toString();s&&a===n||(e.set(t.publicKey,l.toNumber()),w.current.set(t.publicKey.toLowerCase(),n))}let t=new Map;for(let e of o){if(!u.has(e.publicKey))continue;let r=c.data.get(e.publicKey);if(!r)continue;let s=j.current.has(e.publicKey),a=j.current.get(e.publicKey),l=new F.default(r?.balanceSol??0),n=l.toString();s&&a===n||(t.set(e.publicKey,l.toNumber()),j.current.set(e.publicKey,n))}let r=e.size>0,s=t.size>0;(r||s)&&P(r=>({...r,updateBnb:e,updateSol:t}))}y.current=e,v.current=t}},[r,s,a,o,i,c,g,b]);(0,n.useEffect)(()=>{A()},[A]),(0,n.useEffect)(()=>{if(!x||!h)return;let e=new Set(x),t=new Set(h),r=u(),s=d();P(a=>{let l=Array.from(k.current).filter(t=>!e.has(t)),n=Array.from(N.current).filter(e=>!t.has(e)),o=new Set([...a.hideSol,...l]),i=new Set([...a.hideBnb,...n]),c=Array.from(x).filter(e=>!k.current.has(e)),u=Array.from(h).filter(e=>!N.current.has(e)),d=new Map,p=new Map;if(c.length>0||u.length>0){for(let e of c){let t=r.data.get(e);if(t){let r=new F.default(t.balanceSol??0);d.set(e,r.toNumber()),j.current.set(e,r.toString()),o.has(e)&&o.delete(e)}}for(let e of u){let t=s.data.get(e.toLowerCase());if(t){let r=new F.default(t.balanceWei??0).dividedBy(1e18);p.set(e,r.toNumber()),w.current.set(e.toLowerCase(),r.toString()),i.has(e)&&i.delete(e)}}}return k.current=new Set(x),N.current=new Set(h),{updateSol:d,updateBnb:p,hideSol:o,hideBnb:i}})},[x,h,u,d])})({isLeader:R,sendJsonMessage:eb})}],227905);var W=e.i(843476),V=e.i(657688),q=e.i(914717),G=e.i(846932),K=e.i(174080),Y=e.i(592846);e.i(490156);var X=e.i(682382),J=e.i(879197),Q=e.i(78390);let Z=(0,n.memo)(function({selectedChain:e,onChainChange:t,hasSolPresets:r,hasBnbPresets:s}){return r&&s?(0,W.jsx)("div",{className:"flex items-center gap-1",children:["sol","bnb"].map(r=>{let s=h.chainToInfoMap[r],a=r===e;return(0,W.jsx)("button",{type:"button",onClick:()=>t(r),className:`
              relative flex items-center justify-center
              w-[32px] h-[32px] rounded-full
              transition-all duration-150
              ${a?"bg-primaryStroke":"hover:bg-primaryStroke/30 opacity-60 hover:opacity-100 scale-90"}
            `,"aria-label":`Switch to ${s.full}`,children:(0,W.jsx)(V.default,{draggable:!1,src:s.icon,alt:s.ticker,width:20,height:20,className:a?"":"grayscale-[0.3]"})},r)})}):null});e.s(["ChainSelector",0,Z],664727);let ee=(0,n.memo)(function({className:e}){let{t}=(0,Y.useTranslation)(),[r,s]=(0,n.useState)("sol"),a=(0,l.useAtomValue)(U.fullSolWallet),o=(0,l.useAtomValue)(L.fullEvmWalletsAtom),[i,c]=(0,l.useAtom)(m.sharedSolWalletsAtom),[u,d]=(0,l.useAtom)(m.sharedBnbWalletsAtom),x=(0,l.useAtomValue)(b.userProfileIdAtom),p=(0,l.useSetAtom)(m.myLobbyInfoAtom),f=(0,l.useAtomValue)(U.solBalancesAtom),g=(0,l.useAtomValue)(L.evmBalancesAtom),y=(0,n.useRef)(!1),v=(0,n.useMemo)(()=>"sol"===r?a:o,[r,a,o]),[w,k]=(0,n.useState)(()=>new Set(i)),[N,S]=(0,n.useState)(()=>new Set(u)),P=(0,n.useRef)(null);(0,n.useEffect)(()=>{P.current||k(new Set(i))},[i]),(0,n.useEffect)(()=>{P.current||S(new Set(u))},[u]);let A=(0,n.useMemo)(()=>"sol"===r?w:N,[r,w,N]),C=(0,n.useMemo)(()=>{let e=0;for(let t of w)e+=f.data.get(t)?.balanceSol??0;return e},[w,f]),T=(0,n.useMemo)(()=>{let e=0;for(let t of N){let r=g.data.get(t.toLowerCase())?.balanceWei;r&&(e+=new F.default(r).dividedBy(1e18).toNumber())}return e},[N,g]),I=(0,n.useCallback)(e=>e.length<=10?e:`${e.slice(0,6)}...${e.slice(-4)}`,[]),M=(0,n.useCallback)((e,t)=>{y.current&&(c(Array.from(e)),d(Array.from(t)),p(r=>{if(!r||!x)return r;let s={};for(let t of e){let e=f.data.get(t);e&&(s[t]=new F.default(e.balanceSol??0).toNumber())}let a={};for(let e of t){let t=g.data.get(e.toLowerCase());t&&(a[e]=new F.default(t.balanceWei??0).dividedBy(1e18).toNumber())}return{...r,members:r.members.map(e=>e.userProfile.userId===x?{...e,sharedWallets:{sol:{sharedWalletBalances:s,stats:e.sharedWallets.sol?.stats||{totalPnl:0,totalBalance:0}},bnb:{sharedWalletBalances:a,stats:e.sharedWallets.bnb?.stats||{totalPnl:0,totalBalance:0}}}}:e)}}))},[c,d,p,x,f,g]),$=(0,n.useCallback)(e=>{let t=w,s=N;if(y.current=!0,"sol"===r){let r=new Set(w);r.has(e)?r.delete(e):r.add(e),k(r),t=r}else{let t=new Set(N);t.has(e)?t.delete(e):t.add(e),S(t),s=t}P.current&&clearTimeout(P.current),P.current=setTimeout(()=>{M(t,s),y.current=!1,P.current=null},500)},[r,w,N,M]);(0,n.useEffect)(()=>()=>{P.current&&clearTimeout(P.current)},[]);let B=(0,n.useMemo)(()=>v.filter(e=>e.publicKey!==X.VANISH_WALLET_ADDRESS).map(e=>{let t=0;if("sol"===r)t=f.data.get(e.publicKey)?.balanceSol??0;else{let r=g.data.get(e.publicKey.toLowerCase())?.balanceWei;t=r?new F.default(r).dividedBy(1e18).toNumber():0}return{...e,balance:t}}),[v,r,f,g]);return(0,W.jsxs)("div",{className:`flex flex-col ${e}`,children:[(0,W.jsxs)("div",{className:"flex flex-row px-[16px] items-center justify-between w-full flex-shrink-0 border-b border-secondaryStroke pb-[12px]",children:[(0,W.jsx)(Z,{selectedChain:r,onChainChange:s,hasSolPresets:!0,hasBnbPresets:!0}),(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,W.jsxs)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[6px] pr-[6px] gap-[4px] justify-center items-center rounded-full",children:[(0,W.jsx)("i",{className:"ri-wallet-line text-[14px] text-textTertiary"}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-medium",children:w.size}),(0,W.jsx)(V.default,{src:h.chainToInfoMap.sol.icon,alt:h.chainToInfoMap.sol.ticker,width:16,height:16}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-medium",dangerouslySetInnerHTML:{__html:(0,J.getFormattedNumber)(C,4)}})]}),(0,W.jsxs)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[6px] pr-[6px] gap-[4px] justify-center items-center rounded-full",children:[(0,W.jsx)("i",{className:"ri-wallet-line text-[14px] text-textTertiary"}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-medium",children:N.size}),(0,W.jsx)(V.default,{src:h.chainToInfoMap.bnb.icon,alt:h.chainToInfoMap.bnb.ticker,width:16,height:16}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-medium",dangerouslySetInnerHTML:{__html:(0,J.getFormattedNumber)(T,4)}})]})]})]}),(0,W.jsxs)("div",{className:"flex flex-col max-h-[352px] overflow-y-auto",children:[B.map((e,s)=>{let a=A.has(e.publicKey);return(0,W.jsxs)("button",{type:"button",onClick:()=>$(e.publicKey),className:"group hover:bg-secondaryStroke/10 flex flex-row justify-start items-center cursor-pointer w-full text-left flex-shrink-0",children:[(0,W.jsx)("div",{className:"flex flex-row gap-[0px] p-[16px] pr-[16px] items-start",children:(0,W.jsx)(Q.Toggle,{isSelected:a,onClick:t=>{t.stopPropagation(),$(e.publicKey)},activeColor:e.isPrimary?"bg-[rgb(247,147,26)]":void 0,activeBorderColor:e.isPrimary?"border-[rgb(247,147,26)]":void 0})}),(0,W.jsxs)("div",{className:`border-secondaryStroke/50 ${s===B.length-1?"":"border-b-[1px]"} flex flex-1 flex-row h-[56px] gap-[0px] pl-[0px] justify-between items-center pr-[16px]`,children:[(0,W.jsxs)("div",{className:"flex flex-col flex-1 gap-[4px] justify-start items-start pr-[16px] min-w-[100px]",children:[(0,W.jsx)("span",{className:`text-nowrap text-[14px] leading-[18px] font-medium ${e.isPrimary?"text-[rgb(247,147,26)]":"text-textPrimary"}`,children:e.name}),(0,W.jsxs)("button",{type:"button",onClick:r=>{r.stopPropagation(),navigator.clipboard.writeText(e.publicKey).then(()=>{j.default.success({message:t("Address copied to clipboard"),icon:(0,W.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})},{duration:1500})}).catch(()=>{j.default.error(t("Failed to copy to clipboard"))})},className:"group/address flex flex-row gap-[2px] justify-start items-center rounded-[4px] transition-all duration-150 ease-in-out flex-shrink-0",children:[(0,W.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-medium group-hover/address:text-textSecondary transition-all duration-150 ease-in-out",children:I(e.publicKey)}),(0,W.jsx)("i",{className:"ri-file-copy-line text-[12px] leading-[16px] font-normal text-textTertiary group-hover/address:text-textSecondary transition-all duration-150 ease-in-out"})]})]}),(0,W.jsxs)("div",{className:"border border-secondaryStroke/50 flex flex-row h-[26px] pl-[6px] pr-[6px] gap-[4px] justify-end items-center rounded-full",children:[(0,W.jsx)(V.default,{src:h.chainToInfoMap[r].icon,alt:h.chainToInfoMap[r].ticker,width:16,height:16}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",dangerouslySetInnerHTML:{__html:(0,J.getFormattedNumber)(e.balance,4)}})]})]})]},e.publicKey)}),0===v.length&&(0,W.jsx)("span",{className:"text-[11px] text-textSecondary",children:"No wallets available"})]})]})});e.s(["SharedWalletSettings",0,ee],916316);let et={"open-owner-friends":{icon:(0,W.jsx)("i",{className:"ri-team-line"}),iconSubscription:(0,W.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!0,label:"Friends only",subLabel:"Only your friends can join the lobby"},"invite-only-lobby-members":{icon:(0,W.jsx)("i",{className:"ri-group-3-line"}),iconSubscription:(0,W.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!1,label:"Members invites",subLabel:"Lobby members can invite their friends"},"open-lobby-members-friends":{icon:(0,W.jsx)("i",{className:"ri-lock-unlock-line"}),iconSubscription:(0,W.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!0,label:"Open",subLabel:"Anyone can join the lobby"},"invite-only-owner":{icon:(0,W.jsx)("i",{className:"ri-lock-line"}),iconSubscription:(0,W.jsx)("i",{className:"ri-subscribers-line"}),autoJoin:!1,label:"Closed",subLabel:"Only people you invite can join"}},er=(0,n.memo)(function(){let e=(0,l.useAtomValue)(m.myLobbyInfoAtom),{updateLobby:t}=(0,I.useLobbyApi)(),r=async e=>{await t({lobbyType:e})},s=(0,n.useMemo)(()=>e?.lobbyType||"open-owner-friends",[e?.lobbyType]);return(0,W.jsxs)("div",{className:"flex flex-col flex-1 w-full pb-[20px] gap-[16px] px-[16px]",children:[(0,W.jsx)("div",{className:"flex flex-col gap-[4px]",children:(0,W.jsx)("span",{className:"text-[14px] text-textTertiary",children:"Choose who can join your lobby"})}),(0,W.jsxs)("div",{className:"grid grid-cols-2 gap-[16px]",children:[(0,W.jsx)(es,{lobbyType:"open-lobby-members-friends",selectedLobbyType:s,onSelect:()=>r("open-lobby-members-friends")}),(0,W.jsx)(es,{lobbyType:"open-owner-friends",selectedLobbyType:s,onSelect:()=>r("open-owner-friends")}),(0,W.jsx)(es,{lobbyType:"invite-only-lobby-members",selectedLobbyType:s,onSelect:()=>r("invite-only-lobby-members")}),(0,W.jsx)(es,{lobbyType:"invite-only-owner",selectedLobbyType:s,onSelect:()=>r("invite-only-owner")})]})]})}),es=(0,n.memo)(function({lobbyType:e,onSelect:t,selectedLobbyType:r}){let s=(0,n.useMemo)(()=>r===e,[r,e]),a=et[e];return a.autoJoin,a.autoJoin,(0,W.jsxs)("button",{type:"button","aria-pressed":s,onClick:()=>t(e),className:`relative flex w-full flex-col items-center justify-center gap-[8px] text-center cursor-pointer p-[16px] rounded-[12px] transition-all duration-[125ms] ease-in-out ${s?"bg-primaryBlue/10":"hover:bg-secondaryStroke/15"}`,children:[(0,W.jsx)("div",{className:`transition-colors duration-[125ms] ease-in-out ${s?"text-primaryBlueHover":"text-textSecondary"}`,children:(0,W.jsx)("div",{className:"w-[28px] h-[28px] text-[20px] rounded-full flex items-center justify-center",children:a.icon})}),(0,W.jsx)("span",{className:`text-[13px] font-medium transition-colors duration-[125ms] ease-in-out ${s?"text-primaryBlueHover":"text-textSecondary"}`,children:a.label}),(0,W.jsx)("span",{className:`text-[12px] transition-colors duration-[125ms] ease-in-out ${s?"text-textSecondary ":"text-textTertiary"}`,children:a.subLabel})]})});var ea=e.i(428522);let el=(0,n.memo)(function({isLeader:e,activeTab:t,setActiveTab:r}){let{t:s}=(0,Y.useTranslation)();return(0,W.jsx)("div",{className:"flex flex-row min-h-[36px] p-[16px] pb-[0px] justify-start items-center",children:(0,W.jsxs)("div",{className:"flex flex-row gap-[8px] justify-start items-center",children:[e&&(0,W.jsx)(ea.default,{selected:"lobby"===t,onClick:()=>r("lobby"),height:"h-[36px]",children:s("Lobby")}),(0,W.jsx)(ea.default,{selected:"user"===t,onClick:()=>r("user"),height:"h-[36px]",children:s("User")}),(0,W.jsx)(ea.default,{selected:"wallets"===t,onClick:()=>r("wallets"),height:"h-[36px]",children:s("Shared Wallets")})]})})});var en=e.i(695636);let eo=(0,n.memo)(function(){let{t:e}=(0,Y.useTranslation)(),[t,r]=(0,l.useAtom)(y.userLobbySettingsAtom),s=e=>{r(t=>({...t,toastDuration:Math.min(2e4,Math.max(5e3,1e3*e))}))},a=Math.round((t.toastDuration??5e3)/1e3);return(0,W.jsxs)("div",{className:"flex flex-col flex-1 w-full pb-[20px] gap-[16px] px-[16px]",children:[(0,W.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,W.jsx)(en.Switch,{checked:t.showBorderWhenFollowing,onChange:e=>{r(t=>({...t,showBorderWhenFollowing:e}))},label:"Show border when following"}),(0,W.jsx)(en.Switch,{checked:t.showBorderWhenFollowed,onChange:e=>{r(t=>({...t,showBorderWhenFollowed:e}))},label:"Show border when followed"}),(0,W.jsx)(en.Switch,{checked:t.showLinksAsClickable,onChange:e=>{r(t=>({...t,showLinksAsClickable:e}))},label:"Show links as clickable"}),(0,W.jsx)(en.Switch,{checked:t.showWarningsOnLinks,onChange:e=>{r(t=>({...t,showWarningsOnLinks:e}))},label:"Show warnings on links"})]}),(0,W.jsx)("div",{className:"w-full h-[1px] bg-secondaryStroke"}),(0,W.jsx)(en.Switch,{checked:t.receiveLobbyToast,onChange:e=>{r(t=>({...t,receiveLobbyToast:e}))},label:"Receive lobby toast"}),t.receiveLobbyToast&&(0,W.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:e("Toast Duration")}),(0,W.jsxs)("div",{className:"w-[55px] h-[28px] flex items-center rounded-[4px] bg-transparent border border-secondaryStroke hover:border-textPrimary/10 focus:border-textPrimary/10 hover:bg-secondaryStroke/10 focus:bg-secondaryStroke/10 overflow-hidden",children:[(0,W.jsx)("input",{type:"text",value:a,onChange:e=>{let t=parseInt(e.target.value,10);!Number.isNaN(t)&&t>=5&&t<=20&&s(t)},onBlur:e=>{let t=parseInt(e.target.value,10);Number.isNaN(t)||t<5?s(5):t>20&&s(20)},className:"bg-transparent text-textPrimary text-[12px] text-center w-[35px] outline-none"}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] pr-1",children:"s"})]})]}),(0,W.jsx)("div",{className:"flex flex-col w-full mb-[8px]",children:(0,W.jsxs)("div",{className:"relative bg-primaryStroke flex flex-row w-full h-[2px] justify-between items-center rounded-[999px] my-4",children:[(0,W.jsx)("div",{className:"absolute h-full rounded-[999px] bg-primaryBlue",style:{width:`${(a-5)/15*100}%`}}),(0,W.jsx)("div",{className:"absolute h-[12px] w-[12px] rounded-full top-1/2 -translate-y-1/2 bg-primaryBlue cursor-grab pointer-events-none",style:{left:`${(a-5)/15*100}%`,transform:"translate(-50%, -50%)"}}),(0,W.jsx)("input",{type:"range",min:"5",max:"20",step:"1",value:a,onChange:e=>s(parseInt(e.target.value,10)),className:"absolute w-full h-[24px] -top-[12px] opacity-0 cursor-pointer z-10"}),[5,10,15,20].map(e=>(0,W.jsxs)("div",{className:"relative h-[4px] w-[2px] rounded-full pointer-events-none",children:[(0,W.jsx)("div",{className:`h-full w-full rounded-full ${a>=e?"bg-primaryBlue":"bg-textTertiary"}`}),(0,W.jsx)("span",{className:"absolute left-1/2 -translate-x-1/2 top-[8px] text-[10px] font-normal select-none pointer-events-none text-textSecondary",children:e})]},e))]})})]})]})});var ei=e.i(716689);let ec=(0,n.memo)(function({onClose:e,isWindowModal:t=!1}){let{t:r}=(0,Y.useTranslation)(),[s,a]=(0,n.useState)(!1),o=(0,l.useAtomValue)(b.userProfileIdAtom),i=(0,l.useAtomValue)(m.myLobbyInfoAtom),c=(0,n.useMemo)(()=>o&&i?.leaderUserId===o,[o,i?.leaderUserId]),[u,d]=(0,n.useState)("user");(0,n.useEffect)(()=>{c&&d("lobby")},[c]);let x=(0,n.useCallback)(t=>{s&&t.target===t.currentTarget&&e()},[s,e]),p=(0,l.useSetAtom)(ei.socialStartupOpenAtom),f=(0,n.useCallback)(()=>{p(!0),e()},[p,e]);return(0,K.createPortal)((0,W.jsx)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/80 backdrop-blur-[2px] flex items-center justify-center z-[100]",onClick:x,onMouseDown:e=>{e.target===e.currentTarget&&a(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{a(!1)})},children:(0,W.jsxs)(G.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-[364px] min-h-[200px] bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),children:[(0,W.jsxs)("div",{className:`flex flex-row w-full h-[44px] min-h-[44px] flex-shrink-0 pl-[16px] pr-[12px] justify-between items-center ${"wallets"===u?"":"border-b-[1px] border-b-secondaryStroke"}`,children:[(0,W.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium flex-shrink-0",children:r("Lobby Settings")}),(0,W.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] min-w-[24px] min-h-[24px] flex-shrink-0 justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:e,children:(0,W.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,W.jsx)(el,{isLeader:c||!1,activeTab:u,setActiveTab:d}),(0,W.jsxs)("div",{className:"flex flex-col flex-1 pt-[16px] gap-[20px] w-full overflow-y-auto",children:["lobby"===u&&c&&(0,W.jsx)(er,{}),"user"===u&&(0,W.jsx)(eo,{}),"wallets"===u&&(0,W.jsx)(ee,{})]}),(0,W.jsxs)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] flex-shrink-0 justify-between items-center p-[16px] pb-[20px]",children:[(0,W.jsx)("button",{type:"button",onClick:f,className:"group bg-transparent flex flex-row h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full cursor-pointer",children:(0,W.jsx)("span",{className:"text-[14px] font-medium text-primaryBlue group-hover:text-primaryBlueHover transition-all duration-[150ms] ease-in-out",children:r("Quick Start")})}),(0,W.jsx)("button",{type:"button",onClick:e,className:"bg-primaryBlue flex flex-row h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,W.jsx)("span",{className:"text-[14px] font-bold text-background",children:r("Done")})})]})]})}),document.body)});e.s(["LobbySettingsModal",0,ec],622435);var eu=e.i(417082),ed=e.i(651422),ex=e.i(43351),ep=e.i(711858),em=e.i(222527),ef=e.i(309521),eh=e.i(899941),eb=e.i(725707),eg=e.i(944325);let ey=(e,t)=>"bnb"===t?`bnb|b-${e}`:`b-${e}`;e.s(["getRoomToJoin",0,ey,"useUpdateSocialPrice",0,()=>{let[e,t]=(0,l.useAtom)($.lobbyAlertsAtom),r=(0,l.useAtomValue)($.userLastActivityPairsAtom),s=(0,l.useSetAtom)($.lobbyAlertsCurrentPriceAtom),a=(0,l.useSetAtom)($.alertsMigratedAtom),o=(0,l.useSetAtom)($.friendLastActivityPairPriceAtom),i=(0,l.useAtomValue)(eg.regionInfoAtom),c=(0,n.useRef)(new Set),{joinCountedRoom:u,leaveCountedRoom:d}=(0,eh.useJoinLeaveCountedWebsocket)();(0,eb.useWebsocket)({url:(0,eg.getRegionUrl)(i.name),roomsRef:(0,n.useRef)(new Set),onMessage:r=>{let{room:l,content:n}=r;if(l.startsWith("bnb|b-")||l.startsWith("b-")){let e=l.startsWith("bnb|b-")?l.slice(6):l.slice(2);s(t=>{let r=t.get(e);if(!r)return t;let s=new Map(t),a=new Map;for(let[e,t]of r.entries())a.set(e,{price:n,ATH:n>t.ATH?n:t.ATH});return s.set(e,a),s}),o(t=>{let r=new Map(t);return r.set(e,n),r})}if("migrations"===l||"bnb|migrations"===l)try{let r="bnb|migrations"===l,o=n.from,i=n.to,x=ey(o,r?"bnb":"sol"),p=ey(i,r?"bnb":"sol");c.current.has(x)&&(d(x),u(p),s(e=>{if(!e.has(o))return e;let t=new Map(e),r=t.get(o);if(r){t.delete(o);let e=new Map;for(let[t,s]of r.entries())e.set(t,{price:s.price,ATH:s.ATH});t.set(i,e)}return t}),t(e=>[...e].map(e=>e.pairAddress===o?{...e,pairAddress:i,isMigrated:!0}:e)),a(t=>{let r=new Map(t),s=e.find(e=>e.pairAddress===o)?.tokenAddress;return s?(r.set(s,{isMigrated:!0,pairAddress:i}),r):t}))}catch(e){console.error("Error migrating alerts",e)}}}),(0,n.useEffect)(()=>{let t=c.current,s=new Set(["migrations","bnb|migrations"]);for(let t of[...e.map(e=>({chain:e.chain,pairAddress:e.pairAddress})),...Array.from(r.values())]){let e=ey(t.pairAddress,t.chain);s.add(e)}for(let e of s)t.has(e)||(u(e),t.add(e));for(let e of t)s.has(e)||(d(e),t.delete(e));c.current=s},[e,r,u,d])}],657421);let ev=(0,n.memo)(function({lastPage:e,subpage:t,currentChain:r}){let s=(0,N.useRouter)(),a=(0,l.useSetAtom)(P.currentPerpAtom),o=(0,l.useSetAtom)(S.tabAtom),i=(0,n.useCallback)((e,t,r)=>{try{if("Unknown"===e)throw Error("Unknown page");let l="";switch(e){case"meme":if(!t)throw Error("Meme page requires subpage data");if(!t?.pairAddress)throw Error("Pair address not found in subpage");l=`/meme/${t.pairAddress}`;break;case"discover":if(t){if(!t?.tab)throw Error("Discover tab not found in subpage");o(t.tab)}l="/discover";break;case"perpetuals":if(t){if(!t?.currentPerp)throw Error("Perpetual not found in subpage");a(t.currentPerp)}l="/perpetuals";break;case"pulse":case"trackers":case"rewards":case"vision":case"yield":case"portfolio":l=`/${e}`;break;default:throw Error(`Unhandled page type: ${e}`)}if(r)l+=`?chain=${r}`;else throw Error("Chain not found");s.replace(l)}catch(e){console.error("Error mapping message to page:",e),j.default.error("Error mapping message to page")}},[o,a,s]),c=(0,n.useCallback)(s=>{e&&(s.stopPropagation(),i(e,t||void 0,r||void 0))},[e,t,r,i]),u=(0,n.useMemo)(()=>{if(!e)return null;switch(e){case"meme":if(!t)return null;try{return{type:"pair",name:t.ticker||"Pair",tokenAddress:t.tokenAddress,tokenTicker:t.ticker,tokenName:t.name,protocol:t.protocol,isMigrated:t.isMigrated}}catch{return null}case"perpetuals":if(!t)return null;try{return{type:"perp",name:t.currentPerp,imageUrl:`https://app.hyperliquid.xyz/coins/${t.currentPerp}.svg`}}catch{return null}case"discover":return{type:"page",icon:"ri-compass-3-line",name:"Discover"};case"pulse":return{type:"page",icon:"ri-pulse-line",name:"Pulse"};case"trackers":return{type:"page",icon:"ri-wallet-3-line",name:"Trackers"};case"vision":return{type:"page",icon:"ri-eye-line",name:"Vision"};case"portfolio":return{type:"page",icon:"ri-wallet-line",name:"Portfolio"};case"rewards":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Rewards"};case"yield":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Yield"};default:return null}},[e,t]),d=u?.type==="pair"&&u.protocol&&r?(0,ef.getProtocolBadgeBorderWithChain)(u.protocol,u.isMigrated||!1,r):null,x=u?.type==="pair"&&u.protocol&&r?(0,ef.getProtocolIconWithChain)(u.protocol,u.isMigrated||!1,r):null,p=(0,n.useMemo)(()=>r?"sol"===r?"bg-sol/35 border border-sol/65 backdrop-blur-[16px] backdrop-saturate-150":"bnb"===r?"bg-bnb/35 border border-bnb/65 backdrop-blur-[16px] backdrop-saturate-150":"bg-backgroundSecondary/80 border border-backgroundSecondary/65":"bg-backgroundSecondary/80",[r]);return u&&r?(0,W.jsxs)("button",{type:"button",onClick:c,className:`flex flex-row items-center h-[24px] gap-[4px] px-[4px] rounded-full cursor-pointer hover:brightness-110 transition-brightness duration-[125ms] ease-in-out ${p}`,children:[r&&(0,W.jsx)(V.default,{src:h.chainToInfoMap[r].icon,alt:r,width:14,height:14,className:"flex-shrink-0"}),(0,W.jsxs)("div",{className:"flex-shrink-0 flex items-center h-[14px]",children:["pair"===u.type&&(0,W.jsxs)("div",{className:"relative h-[14px] w-[14px] bg-secondaryStroke rounded-[4px]",children:[(0,W.jsx)(ed.default,{src:"sol"===r?`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${u.tokenAddress}.webp`:`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${u.tokenAddress}.webp`,alt:u.tokenName||"",width:14,height:14,tokenTicker:u.tokenTicker||u.tokenName||"",className:"absolute inset-0 rounded-[3px] object-cover z-10 bg-secondaryStroke max-w-[14px] max-h-[14px]",loading:"eager"}),(0,W.jsx)("div",{className:`absolute -inset-[1px] rounded-[4px] opacity-[0.35] z-0 ${d?.className||""}`,style:d?.style}),(0,W.jsx)("div",{className:`flex absolute bottom-[-2px] right-[-2px] w-[8px] h-[8px] p-[1px] justify-center items-center rounded-full z-30 shadow-sm ${d?.className||""}`,style:d?.style,children:(0,W.jsx)("div",{className:"flex justify-center items-center bg-background absolute w-[6px] h-[6px] rounded-full z-30",children:(0,W.jsx)(ed.default,{src:x||"",tokenTicker:u.tokenTicker||u.tokenName||"",alt:u.protocol||"",width:4,height:4,loading:"eager"})})})]}),"perp"===u.type&&(0,W.jsx)("div",{className:"relative w-[14px] h-[14px] rounded-[2px] overflow-hidden",children:(0,W.jsx)(V.default,{src:u.imageUrl,alt:u.name,width:14,height:14,className:"w-full h-full object-cover",loading:"eager"})}),"page"===u.type&&(0,W.jsx)("i",{className:`${u.icon} text-[12px] leading-none text-textSecondary`})]})]}):null}),ew=(0,n.memo)(function({lastPresenceUpdateTimestamp:e,lastPage:t,subpage:r,isOnline:s,size:a="small",currentChain:o,className:i,smallChip:c=!1}){let u=(0,N.useRouter)(),d=(0,n.useMemo)(()=>c?20:"small"===a?16:18,[a,c]),x=(0,n.useMemo)(()=>c?12:"small"===a?13:14,[a,c]),p=(0,n.useMemo)(()=>s?"text-textPrimary":"text-textSecondary",[s]),m=(0,l.useSetAtom)(P.currentPerpAtom),f=(0,l.useSetAtom)(S.tabAtom),b=(0,n.useCallback)((e,t,r)=>{try{if("Unknown"===e)throw Error("Unknown page");let s="";switch(e){case"meme":if(!t)throw Error("Meme page requires subpage data");if(!t?.pairAddress)throw Error("Pair address not found in subpage");s=`/meme/${t.pairAddress}`;break;case"discover":if(t){if(!t?.tab)throw Error("Discover tab not found in subpage");f(t.tab)}s="/discover";break;case"perpetuals":if(t){if(!t?.currentPerp)throw Error("Perpetual not found in subpage");m(t.currentPerp)}s="/perpetuals";break;case"pulse":case"trackers":case"rewards":case"vision":case"yield":case"portfolio":s=`/${e}`;break;default:throw Error(`Unhandled page type: ${e}`)}if(r)s+=`?chain=${r}`;else throw Error("Chain not found");u.replace(s)}catch(e){console.error("Error mapping message to page:",e),j.default.error("Error mapping message to page")}},[f,m,u]),g=(0,n.useCallback)(e=>{t&&s&&(e.stopPropagation(),b(t,r||void 0,o||void 0))},[t,r,s,o,b]),y=(0,n.useMemo)(()=>{if(!t)return null;switch(t){case"meme":if(!r)return null;try{return{type:"pair",name:r.ticker||"Pair",tokenAddress:r.tokenAddress,tokenTicker:r.ticker,tokenName:r.name,protocol:r.protocol,isMigrated:r.isMigrated,pairAddress:r.pairAddress,price:r.price,supply:r.supply}}catch(e){return console.error("Error: user last page",e),null}case"perpetuals":if(!r)return null;try{return{type:"perp",name:r.currentPerp,imageUrl:`https://app.hyperliquid.xyz/coins/${r.currentPerp}.svg`,price:r.price}}catch{return null}case"discover":return{type:"discover",icon:"ri-compass-3-line",name:"Discover",subpage:r};case"pulse":return{type:"page",icon:"ri-pulse-line",name:"Pulse"};case"trackers":return{type:"page",icon:"ri-wallet-3-line",name:"Trackers"};case"vision":return{type:"page",icon:"ri-eye-line",name:"Vision"};case"portfolio":return{type:"page",icon:"ri-wallet-line",name:"Portfolio"};case"rewards":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Rewards"};case"yield":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Yield"};default:return null}},[t,r]),v=(0,l.useAtomValue)((0,n.useMemo)(()=>(0,$.lastActivityPairPriceAtom)(y?.pairAddress||"",y?.price||0),[y?.pairAddress,y?.price])),w=(0,l.useAtomValue)(y?.type==="pair"&&"bnb"===o?ex.usdPerBnbAtom:ex.usdPerSolAtom),{joinCountedRoom:k,leaveCountedRoom:A}=(0,eh.useJoinLeaveCountedWebsocket)();(0,n.useEffect)(()=>{if(y?.type==="pair"&&y?.pairAddress&&o)return k(ey(y.pairAddress,o)),()=>{A(ey(y.pairAddress,o))}},[y?.type,y?.pairAddress,o,k,A]);let{displayStats:C,displayStatsValue:T,marketCapValue:I}=(0,n.useMemo)(()=>{if(y?.type==="pair"){if(v&&y.supply&&w){let e=v*Number(y.supply)*w;return{displayStats:"MC ",displayStatsValue:`$${(0,J.getFormattedNumber)(e,4)}`,marketCapValue:e}}return{displayStats:"",displayStatsValue:"",marketCapValue:null}}return y?.type==="perp"?null!=v?{displayStats:"",displayStatsValue:`${(0,J.getFormattedNumber)(v,4)}`,marketCapValue:null}:{displayStats:"",displayStatsValue:"",marketCapValue:null}:y?.type==="discover"&&y?.subpage?{displayStats:"",displayStatsValue:`${y.subpage?.tab}`,marketCapValue:null}:{displayStats:"",displayStatsValue:"",marketCapValue:null}},[y,v,w]),M=(0,n.useMemo)(()=>null===I?"text-textSecondary":I<=3e4?"text-primaryLightBlue":I<=15e4?"text-primaryYellow":"text-increase",[I]),{t:B}=(0,Y.useTranslation)(),L=y?.type==="pair"&&y.protocol&&o?(0,ef.getProtocolBadgeBorderWithChain)(y.protocol,y.isMigrated||!1,o):null,U=y?.type==="pair"&&y.protocol&&o?(0,ef.getProtocolIconWithChain)(y.protocol,y.isMigrated||!1,o):null,F=(0,n.useMemo)(()=>o?"sol"===o?"bg-sol/20 hover:bg-sol/30 border border-sol/40":"bnb"===o?"bg-bnb/20 hover:bg-bnb/30 border border-bnb/40":"bg-backgroundSecondary hover:bg-textPrimary/[0.05]":"bg-backgroundSecondary",[o]);if(!s&&0!==e)return(0,W.jsxs)("div",{className:"flex flex-row justify-start items-center px-[8px] h-[40px] gap-[4px] text-textPrimary text-[12px] font-medium opacity-40",children:[(0,W.jsx)("i",{className:"ri-time-line text-[12px]"}),(0,W.jsxs)("span",{children:["Active ",(0,W.jsx)(em.RelativeAge,{date:new Date(e)})," ","ago"]})]});if(!y)return null;let E=(0,W.jsxs)("button",{type:"button",onClick:g,className:`flex flex-row items-center ${c?"gap-[4px]":"gap-[6px]"} min-w-0 ${c?"px-[6px]":"px-[8px]"} ${c?"h-[32px]":"h-[40px]"} rounded-full ${F} transition-colors duration-150 ease-in-out cursor-pointer ${i||""}`,children:[o&&!c&&(0,W.jsx)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:(0,W.jsx)(V.default,{src:h.chainToInfoMap[o].icon,alt:o,width:18,height:18})}),"pair"===y.type?(0,W.jsx)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:(0,W.jsx)(ep.Tooltip,{content:B(y.isMigrated?"Migrated":y.protocol||""),position:"bottom",children:(0,W.jsxs)("div",{className:`relative ${c?"h-[20px] w-[20px]":"h-[28px] w-[28px]"} bg-secondaryStroke rounded-[4px]`,children:[(0,W.jsx)(ed.default,{src:"sol"===o?`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${y.tokenAddress}.webp`:`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${y.tokenAddress}.webp`,alt:y.tokenName||"",width:c?20:28,height:c?20:28,tokenTicker:y.tokenTicker||y.tokenName||"",className:"absolute -inset-[0px] rounded-[3px] w-full h-full object-cover z-10 bg-secondaryStroke",loading:"eager"}),(0,W.jsx)("div",{className:`absolute -inset-[1px] rounded-[4px] opacity-[0.35] z-0 ${L?.className||""}`,style:L?.style}),(0,W.jsx)("div",{className:`flex absolute bottom-[-4px] right-[-4px] w-[12px] h-[12px] p-[2px] justify-center items-center rounded-full z-10 shadow-sm ${L?.className||""}`,style:L?.style,children:(0,W.jsx)("div",{className:"flex justify-center items-center bg-background absolute w-[10px] h-[10px] rounded-full z-30",children:(0,W.jsx)(ed.default,{src:U||"",tokenTicker:y.tokenTicker||y.tokenName||"",alt:y.protocol||"",width:6,height:6,loading:"eager"})})})]})})}):"perp"===y.type?(0,W.jsx)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:(0,W.jsx)(eu.EnlargeTokenImage,{tokenImage:y.imageUrl,tokenTicker:y.name,tokenName:y.name,children:(0,W.jsx)("div",{className:"relative bg-secondaryStroke rounded-[4px] transition-all duration-135 ease-in-out group-hover/token:opacity-80",style:{width:`${d}px`,height:`${d}px`},children:(0,W.jsx)(ed.default,{src:y.imageUrl,alt:y.name,width:d,height:d,tokenTicker:y.name,className:"absolute -inset-[0px] rounded-[3px] w-full h-full object-cover z-10 bg-secondaryStroke",loading:"eager"})})})}):"page"===y.type?(0,W.jsx)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:(0,W.jsx)("div",{className:"flex items-center justify-center",style:{width:`${c?20:d}px`,height:`${c?20:d}px`},children:(0,W.jsx)("i",{className:y.icon,style:{fontSize:`${c?16:d}px`}})})}):null,(0,W.jsxs)("div",{className:"flex flex-col items-start min-w-0 flex-1",children:[(0,W.jsx)("span",{className:`${c?"text-[12px]":`text-[${x}px]`} ${p} font-medium truncate max-w-full overflow-hidden whitespace-nowrap max-h-[16px]`,children:c&&"pair"===y.type&&y.tokenTicker||y.name}),(!c||C||T)&&(0,W.jsxs)("span",{className:"text-[11px] font-medium truncate max-w-full overflow-hidden whitespace-nowrap max-h-[16px]",children:[C&&(0,W.jsx)("span",{className:"text-textSecondary",children:C}),(0,W.jsx)("span",{className:null!==I?M:"text-textSecondary",children:T})]})]})]});return c&&"pair"===y.type?(0,W.jsx)(ep.Tooltip,{content:y.tokenName||y.name,position:"bottom",children:E}):E});e.s(["FriendActivityButton",0,ew,"MiniatureActivityButton",0,ev],648357);var ej=e.i(287052);let ek=(0,n.memo)(function({isWindowModal:e=!1}){let t=(0,l.useAtomValue)(m.myLobbyInfoAtom),r=(0,n.useMemo)(()=>t?.members??[],[t?.members]),s=(0,n.useMemo)(()=>r.length>=10,[r.length]),[a,o]=(0,n.useState)(!1),i=(0,l.useSetAtom)(ei.socialFriendsOpenAtom),c=(0,n.useCallback)(()=>{i(!0)},[i]),u=t?.banner??null,d=(0,l.useAtomValue)(y.lobbyMembersExpandedAtom),x=(0,ej.useRedirectToProfile)(),p=(0,l.useAtomValue)(b.userProfileIdAtom),f=t?.leaderUserId===p;return(0,W.jsxs)("div",{className:"flex flex-col w-full gap-[6px]",children:[(0,W.jsx)("div",{className:`relative w-full ${d?"p-[12px] pb-[16px]":"px-[12px] pt-[4px] pb-[8px]"}`,children:d?(0,W.jsxs)("div",{className:"relative flex flex-wrap flex-shrink-0 justify-center gap-[16px] px-[12px] pt-[12px] pb-[12px] overflow-hidden rounded-[12px] backdrop-blur-[16px] backdrop-saturate-[1.5] shadow-[0_8px_40px_rgba(0,0,0,0.25)]",children:[(0,W.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.125] border-[1px] rounded-[12px] z-[10]"}),(0,W.jsx)("div",{className:"absolute blur-[4px] inset-[1px] border-white/[0.09] border-[1px] rounded-[10px] z-[10]"}),(0,W.jsxs)("div",{className:"absolute -inset-x-[520px] inset-y-[0px] opacity-[0.40] z-[10] border-white/[0.035] border-[1px] rounded-[12px]",children:[(0,W.jsxs)("div",{className:"absolute inset-0 w-full h-full blur-[100px] saturate-[1.3] brightness-[0.65] rounded-[12px] overflow-hidden",children:[u?(0,W.jsx)(V.default,{src:u,alt:"Lobby banner background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src="/images/default-profile-pic.png"},loading:"eager",draggable:!1,sizes:"150px"}):(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full bg-transparent"}),(0,W.jsx)("div",{className:"absolute left-0 right-0 bottom-0 h-[520px] bg-gradient-to-t from-backgroundSecondary to-transparent z-10"})]}),(0,W.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/[0.1] via-white/0 to-transparent blur-[20px] scale-110 rounded-[12px]",style:{mixBlendMode:"overlay"}})]}),(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full bg-backgroundSecondary/35 z-10"}),(0,W.jsxs)("div",{className:"relative z-[20] flex flex-wrap flex-shrink-0 justify-center gap-x-[16px] gap-y-[12px] w-full",children:[r.map(t=>(0,W.jsx)(eS,{member:t,isWindowModal:e},t.userProfile.userId)),!s&&(0,W.jsx)("div",{className:"mt-[6px] mb-[12px]",children:(0,W.jsx)(ep.Tooltip,{content:"Add Member",position:"top",children:(0,W.jsx)("button",{type:"button",onClick:c,className:"group w-[40px] h-[40px] rounded-full border-[2px] border-dashed border-textTertiary/65 hover:border-textSecondary/70 flex items-center justify-center transition-all duration-125 ease-in-out hover:opacity-80 cursor-pointer flex-shrink-0",children:(0,W.jsx)("i",{className:"ri-add-line text-[24px] text-textTertiary/65 group-hover:text-textSecondary/70 transition-all duration-125 ease-in-out"})})})})]})]}):(0,W.jsx)("div",{className:"relative flex flex-row flex-1 justify-start items-center gap-[8px]",children:(0,W.jsxs)("div",{className:"relative p-[4px] items-center rounded-full overflow-hidden backdrop-blur-[16px] backdrop-saturate-[1.5] shadow-[0_4px_20px_rgba(0,0,0,0.15)]",children:[(0,W.jsx)("div",{className:"absolute -inset-[1px] border-white/[0.125] border-[1px] rounded-full z-[10] pointer-events-none"}),(0,W.jsx)("div",{className:"absolute blur-[4px] inset-[1px] border-white/[0.09] border-[1px] rounded-full z-[10] pointer-events-none"}),(0,W.jsx)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] opacity-[0.40] z-[5]",children:(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full blur-[40px] saturate-[1.3] brightness-[0.65] rounded-full overflow-hidden",children:u?(0,W.jsx)(V.default,{src:u,alt:"Lobby banner background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src="/images/default-profile-pic.png"},loading:"eager",draggable:!1,sizes:"50px"}):(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full bg-transparent"})})}),(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full bg-backgroundSecondary/35 z-[8] rounded-full"}),(0,W.jsx)("div",{className:"relative z-[20] flex flex-row",children:r.map((e,s)=>(0,W.jsx)(ep.Tooltip,{content:(0,W.jsx)(eN,{member:e,isLeader:t?.leaderUserId===e.userProfile.userId,isCurrentUserLeader:f,isCurrentUser:p===e.userProfile.userId}),position:"top",persistent:!0,vibrancy:!0,rounded:"12px",px:8,width:"auto",minWidth:"320px",maxWidth:"500px",quickShow:!1,children:(0,W.jsx)("button",{type:"button",className:`relative rounded-full cursor-pointer hover:brightness-110 transition-all duration-150 ease-in-out ${s>0?"-ml-[6px]":""}`,style:{zIndex:10-s,...s<r.length-1&&{maskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)",WebkitMaskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)"}},onClick:x(e.userProfile.userId),children:(0,W.jsxs)("div",{className:"relative w-[20px] h-[20px] rounded-full overflow-hidden",children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[1] pointer-events-none rounded-full"}),(0,W.jsx)(V.default,{src:e.userProfile.avatarUrl||(0,q.generateDefaultProfilePicture)(e.userProfile.username),alt:e.userProfile.username,width:20,height:20,className:`w-[20px] h-[20px] rounded-full object-cover ${"offline"===e.presence?"opacity-50":""}`,draggable:!1})]})})},e.userProfile.userId))})]})})}),a&&(0,W.jsx)(ec,{onClose:()=>o(!1),isWindowModal:e})]})}),eN=(0,n.memo)(function({member:e,isLeader:t,isCurrentUserLeader:r,isCurrentUser:s}){let{kickFromLobby:a,transferOwnership:o}=(0,I.useLobbyApi)(),{canFollowUser:i,handleFollowLobby:c}=C(e),u=(0,l.useAtomValue)(m.followedLobbyUserAtom)===e.userProfile.userId,d=(0,n.useMemo)(()=>{if(!e.currentPage)return null;switch(e.currentPage){case"meme":if(!e.currentSubpage)return null;try{let t=e.currentSubpage;return{type:"pair",name:t.ticker||"Pair",tokenAddress:t.tokenAddress,tokenTicker:t.ticker,tokenName:t.name,protocol:t.protocol,isMigrated:t.isMigrated,price:t.price,supply:t.supply}}catch{return null}case"perpetuals":if(!e.currentSubpage)return null;try{let t=e.currentSubpage;return{type:"perp",name:t.currentPerp,imageUrl:`https://app.hyperliquid.xyz/coins/${t.currentPerp}.svg`,price:t.price}}catch{return null}case"discover":return{type:"page",icon:"ri-compass-3-line",name:"Discover",subpage:e.currentSubpage};case"pulse":return{type:"page",icon:"ri-pulse-line",name:"Pulse"};case"trackers":return{type:"page",icon:"ri-wallet-3-line",name:"Trackers"};case"vision":return{type:"page",icon:"ri-eye-line",name:"Vision"};case"portfolio":return{type:"page",icon:"ri-wallet-line",name:"Portfolio"};case"rewards":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Rewards"};case"yield":return{type:"page",icon:"icon-chart-no-axes-combined",name:"Yield"};default:return null}},[e.currentPage,e.currentSubpage]),x=d?.type==="pair"&&d.protocol&&e.currentChain?(0,ef.getProtocolBadgeBorderWithChain)(d.protocol,d.isMigrated||!1,e.currentChain):null,p=d?.type==="pair"&&d.protocol&&e.currentChain?(0,ef.getProtocolIconWithChain)(d.protocol,d.isMigrated||!1,e.currentChain):null,f=(0,l.useAtomValue)(y.userLobbySettingsAtom),b=(0,l.useAtomValue)(h.currentChainAtom),g=f.showBalanceInUsd,v=(0,l.useAtomValue)(ex.usdPerSolAtom),w=(0,l.useAtomValue)(ex.usdPerBnbAtom),j="sol"===b?e.sharedWallets?.sol?.stats||{totalBalance:0,totalPnl:0}:e.sharedWallets?.bnb?.stats||{totalBalance:0,totalPnl:0},k="sol"===b?v:w,N=g?j.totalBalance*k:j.totalBalance,S=g?j.totalPnl*k:j.totalPnl,P=S>=0,A=h.chainToInfoMap[b];return(0,W.jsxs)("div",{className:"flex flex-row min-h-[42px] items-center gap-[8px]",children:[(0,W.jsxs)("div",{className:"flex flex-col gap-0 items-center min-w-[60px]",children:[(0,W.jsx)("span",{className:"text-textTertiary text-[11px] font-normal",children:"User"}),(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[t&&(0,W.jsx)("i",{className:"ri-vip-crown-line text-[12px] text-amber-500"}),(0,W.jsx)("span",{className:"text-textPrimary text-[12px] leading-[18px] font-medium",children:e.userProfile.username})]})]}),(0,W.jsx)("div",{className:"w-[1px] h-[24px] bg-secondaryStroke/50"}),(0,W.jsxs)("div",{className:"flex flex-col gap-0 items-center min-w-[60px]",children:[(0,W.jsx)("span",{className:"text-textTertiary text-[11px] font-normal",children:"Balance"}),(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[!g&&(0,W.jsx)(V.default,{src:A.icon,alt:A.ticker,width:12,height:12}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[18px] font-medium",dangerouslySetInnerHTML:{__html:g?`$${(0,J.getFormattedNumber)(N,4,!0)}`:(0,J.getFormattedNumber)(N,4,!0)}})]})]}),(0,W.jsx)("div",{className:"w-[1px] h-[24px] bg-secondaryStroke/50"}),(0,W.jsxs)("div",{className:"flex flex-col gap-0 items-center min-w-[60px]",children:[(0,W.jsx)("span",{className:"text-textTertiary text-[11px] font-normal",children:"PnL"}),(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[!g&&(0,W.jsx)(V.default,{src:A.icon,alt:A.ticker,width:12,height:12}),(0,W.jsx)("span",{className:`${P?"text-increase":"text-decrease"} text-[12px] leading-[18px] font-medium`,dangerouslySetInnerHTML:{__html:g?`${P?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(S),4,!0)}`:`${P?"+":"-"}${(0,J.getFormattedNumber)(Math.abs(S),4,!0)}`}})]})]}),(0,W.jsx)("div",{className:"w-[1px] h-[24px] bg-secondaryStroke/50"}),(0,W.jsxs)("div",{className:"flex flex-col gap-0 items-center min-w-[60px]",children:[(0,W.jsx)("span",{className:"text-textTertiary text-[11px] font-normal",children:"Activity"}),(0,W.jsx)("div",{className:"flex flex-row items-center gap-[4px]",children:e.isOnline&&d?(0,W.jsxs)(W.Fragment,{children:["pair"===d.type&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:"relative h-[16px] w-[16px] bg-secondaryStroke rounded-[3px] overflow-visible",children:[(0,W.jsx)(ed.default,{src:"sol"===e.currentChain?`https://axiomtrading.sfo3.cdn.digitaloceanspaces.com/${d.tokenAddress}.webp`:`https://axiomtrading-bnb.sfo3.cdn.digitaloceanspaces.com/${d.tokenAddress}.webp`,alt:d.tokenName||"",width:16,height:16,tokenTicker:d.tokenTicker||d.tokenName||"",className:"absolute inset-0 rounded-[2px] object-cover z-10 bg-secondaryStroke",loading:"eager"}),(0,W.jsx)("div",{className:`absolute -inset-[1px] rounded-[3px] opacity-[0.35] z-0 ${x?.className||""}`,style:x?.style}),p&&(0,W.jsx)("div",{className:`flex absolute bottom-[-3px] right-[-3px] w-[10px] h-[10px] p-[1px] justify-center items-center rounded-full z-30 shadow-sm ${x?.className||""}`,style:x?.style,children:(0,W.jsx)("div",{className:"flex justify-center items-center bg-background absolute w-[8px] h-[8px] rounded-full z-30",children:(0,W.jsx)(ed.default,{src:p,tokenTicker:d.tokenTicker||d.tokenName||"",alt:d.protocol||"",width:6,height:6,className:"object-cover",loading:"eager"})})})]}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[18px] font-medium",children:d.tokenTicker||d.name})]}),"perp"===d.type&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ed.default,{src:d.imageUrl,alt:d.name,width:14,height:14,tokenTicker:d.name,className:"rounded-[2px] object-cover bg-secondaryStroke",loading:"eager"}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[18px] font-medium",children:d.name})]}),"page"===d.type&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("i",{className:`${d.icon} text-[14px] text-textSecondary`}),(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[18px] font-medium",children:d.name})]})]}):(0,W.jsx)("span",{className:"text-textTertiary text-[12px] leading-[18px] font-medium",children:e.isOnline?"Active":"Offline"})})]}),!s&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("div",{className:"w-[1px] h-[24px] bg-secondaryStroke/50"}),(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,W.jsx)(ep.Tooltip,{content:i?u?"Stop following":"Follow user":"Cannot follow user",position:"top",delay:.1,children:(0,W.jsx)("button",{type:"button",disabled:!i,onClick:c,className:`flex items-center justify-center w-[24px] h-[24px] rounded-[4px] transition-all cursor-pointer ${u?"bg-primaryBlueHover/20 hover:bg-primaryBlueHover/30":"bg-white/[0.06] hover:bg-white/[0.12]"} ${!i?"opacity-50 cursor-not-allowed":""}`,children:(0,W.jsx)("i",{className:`ri-crosshair-2-line text-[14px] transition-colors duration-[125ms] ease-in-out ${u?"text-primaryBlueHover":"text-white/80"}`})})}),r&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ep.Tooltip,{content:"Transfer ownership",position:"top",delay:.1,children:(0,W.jsx)("button",{type:"button",onClick:()=>o(e.userProfile.userId),className:"flex items-center justify-center w-[24px] h-[24px] rounded-[4px] bg-white/[0.06] hover:bg-white/[0.12] transition-all cursor-pointer",children:(0,W.jsx)("i",{className:"ri-vip-crown-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),(0,W.jsx)(ep.Tooltip,{content:"Kick from lobby",position:"top",delay:.1,children:(0,W.jsx)("button",{type:"button",onClick:()=>a(e.userProfile.userId),className:"flex items-center justify-center w-[24px] h-[24px] rounded-[4px] bg-white/[0.06] hover:bg-white/[0.12] transition-all cursor-pointer",children:(0,W.jsx)("i",{className:"ri-user-unfollow-line text-[14px] text-decrease/80 transition-colors duration-[125ms] ease-in-out"})})})]})]})]})]})}),eS=(0,n.memo)(function({member:e,isWindowModal:t=!1}){let r=(0,l.useAtomValue)(m.myLobbyInfoAtom),s=(0,l.useAtomValue)(b.userProfileIdAtom),a=(0,ej.useRedirectToProfile)(),{isFollowingUser:o}=C(e),i="away"===e.presence,{isCurrentUserLeader:c,isCurrentUser:u,statusDotWrapperBgClass:d,statusDotColorClass:x,avatarBorderColorClass:p}=(0,n.useMemo)(()=>{let a=r?.leaderUserId===s,l=e.userProfile.userId===s,n="offline"!==e.presence,o=t?"bg-backgroundTertiary":"bg-backgroundSecondary",c=n?"away"===e.presence?"bg-primaryOrange":"bg-primaryGreen":"border-[3px] border-textTertiary";return{isCurrentUserLeader:a,isCurrentUser:l,statusDotWrapperBgClass:o,isOnline:n,statusDotColorClass:c,avatarBorderColorClass:i?"border-[2px] border-primaryOrange":""}},[r?.leaderUserId,s,e.userProfile.userId,e.presence,t,i,o]),{generatePathMessage:f}=O(),{currentPage:h,currentSubpage:g,currentChain:y}=(0,n.useMemo)(()=>{if(e.userProfile.userId===s){let e=f();return{currentPage:e?.page??null,currentSubpage:e?.subpage??null,currentChain:e?.chain??null}}return{currentPage:e.currentPage,currentSubpage:e.currentSubpage,currentChain:e.currentChain}},[e.currentPage,e.currentSubpage,e.currentChain,s,f,e.userProfile.userId]);return(0,W.jsx)(ep.Tooltip,{content:(0,W.jsx)(eN,{member:e,isLeader:r?.leaderUserId===e.userProfile.userId,isCurrentUserLeader:c,isCurrentUser:u}),position:"top",persistent:!0,vibrancy:!0,rounded:"12px",px:8,width:"auto",minWidth:"320px",maxWidth:"500px",quickShow:!1,children:(0,W.jsxs)("div",{className:`relative w-[40px] h-[40px] mt-[6px] mb-[12px] rounded-full overflow-visible flex-shrink-0 shadow-[0_6px_10px_-1px_rgba(0,0,0,0.15),0_4px_6px_-1px_rgba(0,0,0,0.06)] ${t?"bg-background":"bg-backgroundSecondary"} ${p}`,children:[o&&(0,W.jsx)("div",{className:"absolute -inset-[1px] rounded-full border-[2px] border-primaryBlueHover z-[20] pointer-events-none animate-pulse"}),(0,W.jsxs)("button",{type:"button",className:"relative flex-shrink-0 cursor-pointer hover:brightness-110 transition-all duration-150 ease-in-out rounded-full overflow-visible w-full h-full",onClick:a(e.userProfile.userId),children:[(0,W.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-visible flex-shrink-0",children:[e.userProfile.color&&(0,W.jsx)("div",{className:"absolute -inset-[3px] rounded-full blur-[24px] opacity-35 z-[5] pointer-events-none",style:{backgroundColor:e.userProfile.color}}),(0,W.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-hidden z-[10]",children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,W.jsx)(V.default,{src:e.userProfile.avatarUrl||(0,q.generateDefaultProfilePicture)(e.userProfile.username||""),alt:e.userProfile.username||"",width:40,height:40,className:"rounded-full object-cover",loading:"eager",draggable:!1})]})]}),r?.leaderUserId===e.userProfile.userId&&(0,W.jsx)("div",{className:"absolute -top-[14px] left-1/2 transform -translate-x-1/2 z-30",children:(0,W.jsx)("i",{className:"ri-vip-crown-fill text-[14px] text-amber-500"})})]}),"offline"!==e.presence?(0,W.jsx)("div",{className:"absolute -bottom-[10px] z-[25]",children:(0,W.jsx)(ev,{lastPage:h,subpage:g,currentChain:y})}):(0,W.jsx)("div",{className:`absolute bottom-[0px] right-[0px] w-[16px] h-[16px] rounded-full z-[25] flex-shrink-0 flex items-center justify-center ${d}`,children:(0,W.jsx)("div",{className:`w-[10px] h-[10px] rounded-full ${x}`})})]})},e.userProfile.userId)}),eP=(0,n.memo)(function({isOpen:e,onClose:t}){let{t:r}=(0,Y.useTranslation)(),[s,a]=(0,n.useState)(!1),{resetPnl:l}=(0,I.useLobbyApi)(),o=(0,n.useCallback)(()=>{l()},[l]),i=(0,n.useCallback)(()=>{o(),t()},[o,t]),c=(0,n.useCallback)(e=>{s&&e.target===e.currentTarget&&t()},[s,t]);return e&&"undefined"!=typeof document?(0,K.createPortal)((0,W.jsx)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[200]",onClick:c,onMouseDown:e=>{e.target===e.currentTarget&&a(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{a(!1)})},children:(0,W.jsx)(G.motion.div,{className:"relative w-[452px] max-h-[880px]",onClick:e=>e.stopPropagation(),initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},children:(0,W.jsxs)("div",{className:"flex flex-col w-full h-full bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,W.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,W.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:r("Reset Lobby PNL")}),(0,W.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:t,children:(0,W.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,W.jsx)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,W.jsx)("div",{className:"flex flex-col gap-[16px]",children:(0,W.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,W.jsx)("div",{className:"flex flex-row w-full gap-[16px] justify-start items-center",children:(0,W.jsx)("span",{className:"text-textSecondary text-[14px] leading-[1.2rem] font-normal",children:r("This will reset the PNL for all users in the lobby. This action cannot be undone.")})})})})}),(0,W.jsx)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] justify-end items-center p-[16px] pb-[20px]",children:(0,W.jsx)("button",{type:"button",onClick:i,className:"bg-decrease flex flex-row flex-1 h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-decreaseHover transition-all duration-[125ms] cursor-pointer",children:(0,W.jsx)("span",{className:"text-[14px] font-bold text-background",children:r("Reset PNL")})})})]})})}),document.body):null});var eA=e.i(88653),eC=e.i(314243);function eT(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function eI(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let eM=async({lobbyName:e,members:t,solPnl:r,bnbPnl:s,usdPerSol:a,usdPerBnb:l,banner:n,currentUserId:o,customization:i,onSuccess:c,onError:u,setShareIsLoading:d})=>{d(!0);try{let u=r*a+s*l,d=u>=0,x=document.createElement("canvas");x.width=840,x.height=570;let p=x.getContext("2d");if(!p)throw Error("Failed to get canvas context");let m=Array.isArray(t)?[...t]:[],f=m.find(e=>e?.userProfile?.userId===o);await (0,eC.drawTemplateBackground)(p,x,n?"custom":"katana",n||null);let h=i?.textColor??"#EAEDFF",b=i?.positiveColor??"#2FE3AC",g=i?.negativeColor??"#EC397A",y=i?.useTextShadows??!0,v=i?.useBoldFont?"bold":"normal";i?.showRectangle,i?.rectangleTextColor,await (0,eC.drawAxiomLogo)(p,n?"custom":"katana",h,y),eT(p,y),p.fillStyle=h,p.font="normal 44.12px Geist, sans-serif",p.fillText("AXIOM",623.62,70.71),p.fillStyle=h,p.font="normal 28.99px Geist, sans-serif",p.fillText("Pro",763.62,70.71),p.fillStyle=h,p.font=`${v} 36px Geist, sans-serif`,p.fillText(e.toUpperCase(),34.5,158.07),eI(p),p.fillStyle=d?b:g,p.save(),(0,eC.roundedImage)(p,34.5,176.45,320,70,8),p.fill(),p.restore(),p.fillStyle="#020307",p.font=`${v} 42px Geist, sans-serif`;let w=`${d?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(u),4,!0)}`;p.fillText(w,50.5,226.45),eT(p,y),p.fillStyle=h,p.font=`${v} 14px Geist, sans-serif`,p.fillText("LOBBY TOTAL",34.5,266.45),eI(p);let j=m.filter(e=>e?.userProfile?.username&&e?.userProfile?.userId!==o).sort((e,t)=>{let r=(e?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(e?.sharedWallets?.bnb?.stats?.totalPnl||0)*l;return(t?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(t?.sharedWallets?.bnb?.stats?.totalPnl||0)*l-r}).slice(0,6);eT(p,y),p.fillStyle=h,p.font=`${v} 14px Geist, sans-serif`,p.fillText("OTHER MEMBERS",34.5,293.45),eI(p);for(let e=0;e<j.length;e++){let t=j[e],r=301.45+44*e+8,s=t?.sharedWallets?.sol?.stats?.totalPnl||0,n=t?.sharedWallets?.bnb?.stats?.totalPnl||0,o=s*a+n*l,i=o>=0,c=t.userProfile.color||"#FFFFFF";if(p.save(),p.fillStyle=c,p.beginPath(),p.arc(50.5,r+14+2,16,0,2*Math.PI),p.fill(),t.userProfile.avatarUrl)try{let e=await (0,eC.loadImage)(t.userProfile.avatarUrl);p.beginPath(),p.arc(50.5,r+14+2,14,0,2*Math.PI),p.clip(),p.drawImage(e,36.5,r+2,28,28)}catch{p.fillStyle="#333745",p.beginPath(),p.arc(50.5,r+14+2,14,0,2*Math.PI),p.fill()}p.restore(),eT(p,y),p.fillStyle=h,p.font="500 14px Geist, sans-serif",p.textAlign="left";let u=t.userProfile.username.length>14?t.userProfile.username.substring(0,14)+"...":t.userProfile.username;p.fillText(u,76.5,r+14+2+4),p.fillStyle=i?b:g,p.font=`${v} 14px Geist, sans-serif`;let d=`${i?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(o),4,!0)}`;p.fillText(d,294.5,r+14+2+4),eI(p);let x=r+44-6;p.strokeStyle="rgba(0, 0, 0, 0.5)",p.lineWidth=1,p.setLineDash([4,4]),p.beginPath(),p.moveTo(34.5,x),p.lineTo(354.5,x),p.stroke(),p.setLineDash([])}if(f){let e=f?.sharedWallets?.sol?.stats?.totalPnl||0,t=f?.sharedWallets?.bnb?.stats?.totalPnl||0,r=e*a+t*l,s=r>=0,n=f.userProfile.color||"#FFFFFF",o=x.width-340-24,i=x.height-100-24;if(p.save(),(0,eC.roundedImage)(p,o,i,340,100,12),p.clip(),p.fillStyle="rgba(20, 20, 30, 0.9)",p.fillRect(o,i,340,100),f.userProfile.bannerUrl)try{let e,t,r,s,a=await (0,eC.loadImage)(f.userProfile.bannerUrl),l=a.width/a.height;l>3.4?(e=(t=100)*l,r=o-(e-340)/2,s=i):(t=(e=340)/l,r=o,s=i-(t-100)/2),p.drawImage(a,r,s,e,t),p.fillStyle="rgba(0, 0, 0, 0.55)",p.fillRect(o,i,340,100)}catch{}p.restore();let c=o+340-76-15,u=i+12;if(p.save(),p.fillStyle=n,p.beginPath(),p.arc(c+38,u+38,38,0,2*Math.PI),p.fill(),f.userProfile.avatarUrl)try{let e=await (0,eC.loadImage)(f.userProfile.avatarUrl);p.beginPath(),p.arc(c+38,u+38,35,0,2*Math.PI),p.clip(),p.drawImage(e,c+3,u+3,70,70)}catch{p.fillStyle="#333745",p.beginPath(),p.arc(c+38,u+38,35,0,2*Math.PI),p.fill(),p.fillStyle="#FFFFFF",p.font=`${v} 28px Geist, sans-serif`,p.textAlign="center",p.textBaseline="middle",p.fillText(f.userProfile.username.charAt(0).toUpperCase(),c+38,u+38)}else p.fillStyle="#333745",p.beginPath(),p.arc(c+38,u+38,35,0,2*Math.PI),p.fill(),p.fillStyle="#FFFFFF",p.font=`${v} 28px Geist, sans-serif`,p.textAlign="center",p.textBaseline="middle",p.fillText(f.userProfile.username.charAt(0).toUpperCase(),c+38,u+38);p.restore(),eT(p,y),p.fillStyle=h,p.font=`${v} 20px Geist, sans-serif`,p.textAlign="left",p.textBaseline="alphabetic";let d=f.userProfile.username.length>16?f.userProfile.username.substring(0,16)+"...":f.userProfile.username;p.fillText(d,o+16,i+35),eI(p);let m=o+16,w=i+48;p.save(),p.fillStyle=s?b:g,(0,eC.roundedImage)(p,m,w,140,36,6),p.fill(),p.restore(),p.fillStyle="#020307",p.font=`${v} 18px Geist, sans-serif`,p.textAlign="left";let j=`${s?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(r),4,!0)}`;p.fillText(j,m+12,w+25)}let k=x.toDataURL("image/png");c({USD:k,NATIVE:k})}catch(e){console.error("Error generating lobby share image:",e),u(e)}finally{d(!1)}};function e$(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function eB(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let eL=async({lobbyName:e,members:t,usdPerSol:r,usdPerBnb:s,banner:a,customization:l,onSuccess:n,onError:o,setShareIsLoading:i})=>{i(!0);try{let o=document.createElement("canvas");o.width=840,o.height=570;let i=o.getContext("2d");if(!i)throw Error("Failed to get canvas context");let c=(Array.isArray(t)?[...t]:[]).filter(e=>e?.userProfile?.username).map(e=>{let t=e?.sharedWallets?.sol?.stats?.totalPnl||0,a=e?.sharedWallets?.bnb?.stats?.totalPnl||0;return{member:e,totalUsd:t*r+a*s}}).sort((e,t)=>t.totalUsd-e.totalUsd).slice(0,10);await (0,eC.drawTemplateBackground)(i,o,a?"custom":"katana",a||null);let u=l?.textColor??"#EAEDFF",d=l?.positiveColor??"#2FE3AC",x=l?.negativeColor??"#EC397A",p=l?.useTextShadows??!0,m=l?.useBoldFont?"bold":"normal";l?.showRectangle,l?.rectangleTextColor,await (0,eC.drawAxiomLogo)(i,a?"custom":"katana",u,p),e$(i,p),i.fillStyle=u,i.font="normal 44.12px Geist, sans-serif",i.fillText("AXIOM",623.62,70.71),i.fillStyle=u,i.font="normal 28.99px Geist, sans-serif",i.fillText("Pro",763.62,70.71),i.fillStyle=u,i.font=`${m} 32px Geist, sans-serif`,i.textAlign="center",i.fillText(e.toUpperCase(),o.width/2,153.07),i.fillStyle=u,i.font=`${m} 16px Geist, sans-serif`,i.fillText("PnL CHART",o.width/2,170),eB(i),i.textAlign="left";let f=o.width-60,h=f-60,b=Math.max(...c.map(e=>Math.abs(e.totalUsd)),1),g=c.length,y=Math.min(65,(h-10*(g+1))/g),v=g*y+(g-1)*10,w=60+(h-v)/2,j=320;i.strokeStyle="rgba(234, 237, 255, 0.3)",i.lineWidth=1,i.setLineDash([5,5]),i.beginPath(),i.moveTo(60,j),i.lineTo(f,j),i.stroke(),i.setLineDash([]),e$(i,p),i.fillStyle="rgba(234, 237, 255, 0.5)",i.font="12px Geist, sans-serif",i.textAlign="right",i.fillText("$0",52,j+4),eB(i),i.textAlign="left";for(let e=0;e<c.length;e++){let{member:t,totalUsd:r}=c[e],s=r>=0,a=t.userProfile.color||"#FFFFFF",l=w+e*(y+10),n=Math.abs(r)/b*90,o=Math.max(n,4),f=s?j-o:j,h=i.createLinearGradient(l,s?f:j,l,s?j:j+o),g=s?d:x;h.addColorStop(0,g),h.addColorStop(1,function(e,t){let r=parseInt(e.replace("#",""),16),s=Math.max(0,Math.min(255,(r>>16&255)+-30)),a=Math.max(0,Math.min(255,(r>>8&255)+-30)),l=Math.max(0,Math.min(255,(255&r)+-30));return`rgb(${s}, ${a}, ${l})`}(g,-30)),i.save(),i.fillStyle=h,(0,eC.roundedImage)(i,l,f,y,o,4),i.fill(),i.restore();let v=Math.min(y-6,40),k=l+(y-v)/2,N=444;if(i.save(),i.fillStyle=a,i.beginPath(),i.arc(k+v/2,N+v/2,v/2+2,0,2*Math.PI),i.fill(),t.userProfile.avatarUrl)try{let e=await (0,eC.loadImage)(t.userProfile.avatarUrl);i.beginPath(),i.arc(k+v/2,N+v/2,v/2,0,2*Math.PI),i.clip(),i.drawImage(e,k,N,v,v)}catch{i.fillStyle="#333745",i.beginPath(),i.arc(k+v/2,N+v/2,v/2,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} ${v/2}px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(t.userProfile.username.charAt(0).toUpperCase(),k+v/2,N+v/2)}else i.fillStyle="#333745",i.beginPath(),i.arc(k+v/2,N+v/2,v/2,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} ${v/2}px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(t.userProfile.username.charAt(0).toUpperCase(),k+v/2,N+v/2);i.restore(),e$(i,p),i.fillStyle=s?d:x,i.font=`${m} 11px Geist, sans-serif`,i.textAlign="center",i.textBaseline="alphabetic";let S=`${s?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(r),4,!0)}`,P=s?f-5:f+o+13;i.fillText(S,l+y/2,P),i.fillStyle=u,i.font="10px Geist, sans-serif";let A=t.userProfile.username.length>7?t.userProfile.username.substring(0,6)+"..":t.userProfile.username;i.fillText(A,l+y/2,N+v+12),eB(i)}i.textAlign="left",i.textBaseline="alphabetic";let k=o.toDataURL("image/png");n({USD:k,NATIVE:k})}catch(e){console.error("Error generating lobby share image:",e),o(e)}finally{i(!1)}};function eU(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function eF(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let eE=async({lobbyName:e,members:t,solPnl:r,bnbPnl:s,usdPerSol:a,usdPerBnb:l,banner:n,customization:o,onSuccess:i,onError:c,setShareIsLoading:u})=>{u(!0);try{let c=r*a+s*l,u=c>=0,d=document.createElement("canvas");d.width=840,d.height=570;let x=d.getContext("2d");if(!x)throw Error("Failed to get canvas context");let p=(Array.isArray(t)?[...t]:[]).filter(e=>e?.userProfile?.username).sort((e,t)=>{let r=(e?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(e?.sharedWallets?.bnb?.stats?.totalPnl||0)*l;return(t?.sharedWallets?.sol?.stats?.totalPnl||0)*a+(t?.sharedWallets?.bnb?.stats?.totalPnl||0)*l-r});if(0===p.length)throw Error("No members found");let m=p[0],f=p.slice(1,5);await (0,eC.drawTemplateBackground)(x,d,n?"custom":"katana",n||null);let h=o?.textColor??"#EAEDFF",b=o?.positiveColor??"#2FE3AC",g=o?.negativeColor??"#EC397A",y="#FFD700",v=o?.useTextShadows??!0,w=o?.useBoldFont?"bold":"normal";await (0,eC.drawAxiomLogo)(x,n?"custom":"katana",h,v),eU(x,v),x.fillStyle=h,x.font="normal 44.12px Geist, sans-serif",x.fillText("AXIOM",623.62,70.71),x.fillStyle=h,x.font="normal 28.99px Geist, sans-serif",x.fillText("Pro",763.62,70.71),x.fillStyle=h,x.font=`${w} 36px Geist, sans-serif`,x.fillText(e.toUpperCase(),34.5,158.07),eF(x);let j=o?.showRectangle??!0,k=o?.rectangleTextColor??"#020307";if(j){x.fillStyle=u?b:g,x.save(),(0,eC.roundedImage)(x,34.5,176.45,320,70,8),x.fill(),x.restore(),x.fillStyle=k,x.font=`${w} 42px Geist, sans-serif`;let e=`${u?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(c),4,!0)}`;x.fillText(e,50.5,226.45)}else{eU(x,v),x.fillStyle=u?b:g,x.font=`${w} 42px Geist, sans-serif`;let e=`${u?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(c),4,!0)}`;x.fillText(e,34.5,226.45),eF(x)}eU(x,v),x.fillStyle=h,x.font=`${w} 14px Geist, sans-serif`,x.fillText("LOBBY TOTAL",34.5,266.45),eF(x);eU(x,v),x.fillStyle=h,x.font=`${w} 14px Geist, sans-serif`,x.fillText("TOP PERFORMERS",34.5,293.45),eF(x);for(let e=0;e<f.length;e++){let t=f[e],r=301.45+52*e+6,s=t?.sharedWallets?.sol?.stats?.totalPnl||0,n=t?.sharedWallets?.bnb?.stats?.totalPnl||0,o=s*a+n*l,i=o>=0,c=t.userProfile.color||"#FFFFFF";eU(x,v),x.fillStyle=["#C0C0C0","#CD7F32",h,h][e]||h,x.font=`${w} 18px Geist, sans-serif`,x.fillText(`#${e+2}`,34.5,r+24),eF(x);if(x.save(),x.fillStyle=0===e?"#C0C0C0":c,x.beginPath(),x.arc(88.5,r+16+2+2,18,0,2*Math.PI),x.fill(),t.userProfile.avatarUrl)try{let e=await (0,eC.loadImage)(t.userProfile.avatarUrl);x.beginPath(),x.arc(88.5,r+16+2+2,16,0,2*Math.PI),x.clip(),x.drawImage(e,72.5,r+2+2,32,32)}catch{x.fillStyle="#333745",x.beginPath(),x.arc(88.5,r+16+2+2,16,0,2*Math.PI),x.fill()}x.restore(),eU(x,v),x.fillStyle=h,x.font="500 14px Geist, sans-serif",x.textAlign="left";let u=t.userProfile.username.length>12?t.userProfile.username.substring(0,12)+"...":t.userProfile.username;x.fillText(u,116.5,r+24),x.fillStyle=i?b:g,x.font=`${w} 14px Geist, sans-serif`;let d=`${i?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(o),4,!0)}`;x.fillText(d,314.5,r+24),eF(x);let p=r+52-6;x.strokeStyle="rgba(0, 0, 0, 0.5)",x.lineWidth=1,x.setLineDash([4,4]),x.beginPath(),x.moveTo(34.5,p),x.lineTo(374.5,p),x.stroke(),x.setLineDash([])}if(m){let e=m?.sharedWallets?.sol?.stats?.totalPnl||0,t=m?.sharedWallets?.bnb?.stats?.totalPnl||0,r=e*a+t*l,s=r>=0,n=m.userProfile.color||"#FFFFFF",o=d.width-360-24,i=d.height-110-24;if(x.save(),(0,eC.roundedImage)(x,o,i,360,110,12),x.clip(),x.fillStyle="rgba(20, 20, 30, 0.9)",x.fillRect(o,i,360,110),m.userProfile.bannerUrl)try{let e,t,r,s,a=await (0,eC.loadImage)(m.userProfile.bannerUrl),l=a.width/a.height;l>360/110?(e=(t=110)*l,r=o-(e-360)/2,s=i):(t=(e=360)/l,r=o,s=i-(t-110)/2),x.drawImage(a,r,s,e,t),x.fillStyle="rgba(0, 0, 0, 0.55)",x.fillRect(o,i,360,110)}catch{}x.restore();let c=o+360-84-15,u=i+13;if(x.save(),x.fillStyle=y,x.beginPath(),x.arc(c+42,u+42,42,0,2*Math.PI),x.fill(),x.fillStyle=n,x.beginPath(),x.arc(c+42,u+42,40,0,2*Math.PI),x.fill(),m.userProfile.avatarUrl)try{let e=await (0,eC.loadImage)(m.userProfile.avatarUrl);x.beginPath(),x.arc(c+42,u+42,38,0,2*Math.PI),x.clip(),x.drawImage(e,c+4,u+4,76,76)}catch{x.fillStyle="#333745",x.beginPath(),x.arc(c+42,u+42,38,0,2*Math.PI),x.fill(),x.fillStyle="#FFFFFF",x.font=`${w} 32px Geist, sans-serif`,x.textAlign="center",x.textBaseline="middle",x.fillText(m.userProfile.username.charAt(0).toUpperCase(),c+42,u+42)}else x.fillStyle="#333745",x.beginPath(),x.arc(c+42,u+42,38,0,2*Math.PI),x.fill(),x.fillStyle="#FFFFFF",x.font=`${w} 32px Geist, sans-serif`,x.textAlign="center",x.textBaseline="middle",x.fillText(m.userProfile.username.charAt(0).toUpperCase(),c+42,u+42);x.restore(),eU(x,v),x.fillStyle=y,x.font=`${w} 16px Geist, sans-serif`,x.textAlign="left",x.textBaseline="alphabetic",x.fillText(" MVP",o+16,i+28),x.fillStyle=h,x.font=`${w} 20px Geist, sans-serif`;let p=m.userProfile.username.length>14?m.userProfile.username.substring(0,14)+"...":m.userProfile.username;x.fillText(p,o+16,i+52),eF(x);let f=o+16,j=i+62;x.save(),x.fillStyle=s?b:g,(0,eC.roundedImage)(x,f,j,150,36,6),x.fill(),x.restore(),x.fillStyle="#020307",x.font=`${w} 18px Geist, sans-serif`,x.textAlign="left";let k=`${s?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(r),4,!0)}`;x.fillText(k,f+12,j+25)}let N=d.toDataURL("image/png");i({USD:N,NATIVE:N})}catch(e){console.error("Error generating lobby share image:",e),c(e)}finally{u(!1)}};function eR(e,t=!0){t&&(e.shadowColor="rgba(0, 0, 0, 0.8)",e.shadowBlur=4,e.shadowOffsetX=1,e.shadowOffsetY=1)}function e_(e){e.shadowColor="transparent",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}let ez=async({lobbyName:e,members:t,usdPerSol:r,usdPerBnb:s,banner:a,customization:l,onSuccess:n,onError:o,setShareIsLoading:i})=>{i(!0);try{let o=document.createElement("canvas");o.width=840,o.height=570;let i=o.getContext("2d");if(!i)throw Error("Failed to get canvas context");let c=(Array.isArray(t)?[...t]:[]).filter(e=>e?.userProfile?.username).sort((e,t)=>{let a=(e?.sharedWallets?.sol?.stats?.totalPnl||0)*r+(e?.sharedWallets?.bnb?.stats?.totalPnl||0)*s;return(t?.sharedWallets?.sol?.stats?.totalPnl||0)*r+(t?.sharedWallets?.bnb?.stats?.totalPnl||0)*s-a}).slice(0,3);await (0,eC.drawTemplateBackground)(i,o,a?"custom":"katana",a||null);let u=l?.textColor??"#EAEDFF",d=l?.positiveColor??"#2FE3AC",x=l?.negativeColor??"#EC397A",p=l?.useTextShadows??!0,m=l?.useBoldFont?"bold":"normal";l?.showRectangle,l?.rectangleTextColor,await (0,eC.drawAxiomLogo)(i,a?"custom":"katana",u,p),eR(i,p),i.fillStyle=u,i.font="normal 44.12px Geist, sans-serif",i.fillText("AXIOM",623.62,70.71),i.fillStyle=u,i.font="normal 28.99px Geist, sans-serif",i.fillText("Pro",763.62,70.71),i.fillStyle=u,i.font=`${m} 32px Geist, sans-serif`,i.textAlign="center",i.fillText(e.toUpperCase(),o.width/2,153.07),i.fillStyle=u,i.font=`${m} 16px Geist, sans-serif`,i.fillText("LEADERBOARD",o.width/2,170),e_(i),i.textAlign="left";let f=[{place:2,x:170,baseHeight:100,color:"#C0C0C0",label:"2ND"},{place:1,x:350,baseHeight:130,color:"#FFD700",label:"1ST"},{place:3,x:530,baseHeight:70,color:"#CD7F32",label:"3RD"}];for(let e=0;e<f.length;e++){let t=f[e],a=c[t.place-1];if(!a)continue;let l=a?.sharedWallets?.sol?.stats?.totalPnl||0,n=a?.sharedWallets?.bnb?.stats?.totalPnl||0,o=l*r+n*s,h=o>=0,b=a.userProfile.color||"#FFFFFF",g=t.x,y=510-t.baseHeight,v=i.createLinearGradient(g,y,g,510);v.addColorStop(0,t.color),v.addColorStop(1,function(e,t){let r=parseInt(e.replace("#",""),16),s=Math.max(0,Math.min(255,(r>>16&255)+-40)),a=Math.max(0,Math.min(255,(r>>8&255)+-40)),l=Math.max(0,Math.min(255,(255&r)+-40));return`rgb(${s}, ${a}, ${l})`}(t.color,-40)),i.save(),i.fillStyle=v,(0,eC.roundedImage)(i,g,y,140,t.baseHeight,8),i.fill(),i.restore(),i.fillStyle="#020307",i.font=`${m} 24px Geist, sans-serif`,i.textAlign="center",i.fillText(t.label,g+70,490);let w=g+4;i.save(),i.fillStyle=h?d:x,(0,eC.roundedImage)(i,w,518,132,32,4),i.fill(),i.restore(),i.fillStyle="#020307",i.font=`${m} 14px Geist, sans-serif`,i.textAlign="center";let j=`${h?"+":"-"}$${(0,J.getFormattedNumber)(Math.abs(o),4,!0)}`;i.fillText(j,w+66,540);let k=140,N=y-k-6;if(i.save(),i.fillStyle=t.color,i.beginPath(),i.arc(g+k/2,N+k/2,k/2,0,2*Math.PI),i.fill(),i.fillStyle=b,i.beginPath(),i.arc(g+k/2,N+k/2,68,0,2*Math.PI),i.fill(),a.userProfile.avatarUrl)try{let e=await (0,eC.loadImage)(a.userProfile.avatarUrl);i.beginPath(),i.arc(g+k/2,N+k/2,66,0,2*Math.PI),i.clip(),i.drawImage(e,g+4,N+4,132,132)}catch{i.fillStyle="#333745",i.beginPath(),i.arc(g+k/2,N+k/2,66,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} 48px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(a.userProfile.username.charAt(0).toUpperCase(),g+k/2,N+k/2)}else i.fillStyle="#333745",i.beginPath(),i.arc(g+k/2,N+k/2,66,0,2*Math.PI),i.fill(),i.fillStyle="#FFFFFF",i.font=`${m} 48px Geist, sans-serif`,i.textAlign="center",i.textBaseline="middle",i.fillText(a.userProfile.username.charAt(0).toUpperCase(),g+k/2,N+k/2);i.restore(),eR(i,p),i.fillStyle=u,i.font=`${m} 14px Geist, sans-serif`,i.textAlign="center",i.textBaseline="alphabetic";let S=a.userProfile.username.length>12?a.userProfile.username.substring(0,12)+"...":a.userProfile.username;i.fillText(S,g+70,N-8),e_(i)}i.textAlign="left",i.textBaseline="alphabetic";let h=o.toDataURL("image/png");n({USD:h,NATIVE:h})}catch(e){console.error("Error generating lobby share image:",e),o(e)}finally{i(!1)}},eD=({color:e,onChange:t,onReset:r,label:s})=>{let{t:a}=(0,Y.useTranslation)(),[l,o]=(0,n.useState)(()=>e.substring(1));(0,n.useEffect)(()=>{o(e.substring(1))},[e]);let i=e=>{if(1===e.length)return e.repeat(6);if(2===e.length)return e.repeat(3);if(3===e.length)return e.split("").map(e=>e+e).join("");for(;e.length<6;)e+=e[e.length-1];return e};return(0,W.jsxs)("div",{className:"flex flex-row items-center justify-between h-[32px]",children:[(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:s}),(0,W.jsxs)("div",{className:"group flex flex-row w-[160px] items-center gap-[8px] pr-[7px] pl-[7px] h-[32px] border-[1px] border-secondaryStroke hover:bg-secondaryStroke/20 hover:border-secondaryStroke/80 focus-within:bg-secondaryStroke/20 focus-within:border-secondaryStroke/80 rounded-[4px] transition-all duration-150 ease-in-out cursor-text",children:[(0,W.jsx)("div",{className:"flex items-center gap-[8px]",children:(0,W.jsx)("input",{type:"color",value:e,onChange:e=>{t(e.target.value),o(e.target.value.substring(1))},className:"w-[16px] h-[16px] cursor-pointer bg-transparent border-none [&::-webkit-color-swatch-wrapper]:p-0 [&::-webkit-color-swatch]:border-none [&::-webkit-color-swatch]:rounded-[2px]"})}),(0,W.jsx)("div",{className:"flex items-center gap-[4px] w-full",children:(0,W.jsx)("input",{type:"text",value:l,onChange:e=>{let r;o(r=e.target.value.replace(/[^0-9A-F]/gi,"").toUpperCase().slice(0,6)),(6===r.length||3===r.length)&&t("#"+i(r))},onBlur:()=>{if(l.length>0){let e=i(l);t("#"+e),o(e)}else o(e.substring(1))},className:"bg-transparent text-textPrimary placeholder:text-textTertiary text-[12px] leading-[16px] font-normal focus:outline-none w-full uppercase",maxLength:6})}),(0,W.jsx)("button",{type:"button",onClick:r,className:"flex-shrink-0 flex items-center justify-center w-[16px] h-[16px] hover:text-textPrimary text-textTertiary transition-colors duration-150",title:a("Reset to default color"),children:(0,W.jsx)("i",{className:"ri-refresh-line text-[14px]"})})]})]})},eH=({checked:e,onChange:t,label:r})=>(0,W.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,W.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-normal",children:r}),(0,W.jsx)("button",{type:"button",className:`flex items-center w-[40px] h-[20px] rounded-full p-[2px] ${e?"bg-primaryBlue":"bg-secondaryStroke"} transition-colors duration-150 ease-in-out`,onClick:()=>t(!e),children:(0,W.jsx)("div",{className:`w-[16px] h-[16px] rounded-full bg-white transform transition-transform duration-150 ease-in-out ${e?"translate-x-[20px]":"translate-x-0"}`})})]}),eO=({onClose:e})=>{let{t}=(0,Y.useTranslation)(),[r,s]=(0,n.useState)(!1),[a,o]=(0,l.useAtom)(b.lobbyPnlTextColorAtom),[i,c]=(0,l.useAtom)(b.lobbyPnlPositiveColorAtom),[u,d]=(0,l.useAtom)(b.lobbyPnlNegativeColorAtom),[x,p]=(0,l.useAtom)(b.lobbyPnlShowRectangleAtom),[m,f]=(0,l.useAtom)(b.lobbyPnlRectangleTextColorAtom),[h,g]=(0,l.useAtom)(b.lobbyPnlUseBoldFontAtom),[y,v]=(0,l.useAtom)(b.lobbyPnlUseTextShadowsAtom),[w,j]=(0,n.useState)(a),[k,N]=(0,n.useState)(i),[S,P]=(0,n.useState)(u),[A,C]=(0,n.useState)(x),[T,I]=(0,n.useState)(m),[M,$]=(0,n.useState)(h),[B,L]=(0,n.useState)(y),U=w!==a||k!==i||S!==u||A!==x||T!==m||M!==h||B!==y,F=(0,n.useCallback)(()=>{o(w),c(k),d(S),p(A),f(T),g(M),v(B),requestAnimationFrame(()=>{{let e=new CustomEvent("lobby-pnl-customization-changed");window.dispatchEvent(e)}})},[w,k,S,A,T,M,B,o,c,d,p,f,g,v]),E=(0,n.useCallback)(t=>{r&&t.target===t.currentTarget&&(U&&F(),e())},[r,e,U,F]),R=(0,n.useCallback)(()=>{j("#EAEDFF")},[]),_=(0,n.useCallback)(()=>{N("#2FE3AC")},[]),z=(0,n.useCallback)(()=>{P("#EC397A")},[]),D=(0,n.useCallback)(()=>{I("#020307")},[]),H=(0,n.useCallback)(()=>{U&&F(),e()},[F,e,U]),O=(0,n.useCallback)(()=>{e()},[e]);return"undefined"==typeof document?null:(0,K.createPortal)((0,W.jsx)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/80 backdrop-blur-[2px] flex items-center justify-center z-[20000]",onClick:E,onMouseDown:e=>{e.target===e.currentTarget&&s(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{s(!1)})},children:(0,W.jsxs)(G.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-[364px] min-h-[200px] bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)] z-[20001]",onClick:e=>e.stopPropagation(),children:[(0,W.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,W.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:t("Customize Lobby PNL")}),(0,W.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:O,children:(0,W.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,W.jsx)("div",{className:"flex flex-col flex-1 w-full p-[16px] pb-[20px] gap-[16px]",children:(0,W.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,W.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,W.jsx)("h3",{className:"text-textPrimary text-[13px] font-medium mb-2",children:t("Text Colors")}),(0,W.jsx)(eD,{color:w,onChange:j,onReset:R,label:t("Main Text")})]}),(0,W.jsxs)("div",{className:"flex flex-col gap-[8px]",children:[(0,W.jsx)("h3",{className:"text-textPrimary text-[13px] font-medium mb-2",children:t("PNL Colors")}),(0,W.jsx)(eD,{color:k,onChange:N,onReset:_,label:t("Positive PNL")}),(0,W.jsx)(eD,{color:S,onChange:P,onReset:z,label:t("Negative PNL")})]}),(0,W.jsxs)("div",{className:"flex flex-col gap-[16px]",children:[(0,W.jsx)("h3",{className:"text-textPrimary text-[13px] font-medium mb-2",children:t("Layout Options")}),(0,W.jsx)(eH,{checked:M,onChange:$,label:t("Use bold font weight")}),(0,W.jsx)(eH,{checked:B,onChange:L,label:t("Use text shadows")}),(0,W.jsx)(eH,{checked:A,onChange:C,label:t("Show colored PNL rectangle")})]}),A&&(0,W.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,W.jsx)(eD,{color:T,onChange:I,onReset:D,label:t("Rectangle Text Color")})}),(0,W.jsx)("div",{className:"flex flex-col gap-[8px] mt-2",children:(0,W.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:t("These settings apply to custom lobby banner templates")})})]})}),(0,W.jsx)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] justify-end items-center p-[16px] pb-[20px] gap-[12px]",children:(0,W.jsx)("button",{type:"button",onClick:H,className:"bg-primaryBlue flex flex-row flex-1 h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,W.jsx)("span",{className:"text-[14px] font-bold text-background",children:t("Continue")})})})]})}),document.body)},eW=(0,n.memo)(function(){let{t:e}=(0,Y.useTranslation)(),t=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(ex.usdPerSolAtom),[])),s=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(ex.usdPerBnbAtom),[])),a=(0,f.useAtomCallback)((0,n.useCallback)(e=>({textColor:e(b.lobbyPnlTextColorAtom),positiveColor:e(b.lobbyPnlPositiveColorAtom),negativeColor:e(b.lobbyPnlNegativeColorAtom),showRectangle:e(b.lobbyPnlShowRectangleAtom),rectangleTextColor:e(b.lobbyPnlRectangleTextColorAtom),useBoldFont:e(b.lobbyPnlUseBoldFontAtom),useTextShadows:e(b.lobbyPnlUseTextShadowsAtom)}),[])),o=(0,l.useAtomValue)(m.myLobbyInfoAtom),i=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(m.myLobbyInfoAtom),[])),c=(0,l.useAtomValue)(b.userProfileIdAtom),[u,d]=(0,l.useAtom)(b.sharedPnlStyleAtom),[x,p]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[y,v]=(0,n.useState)(null),[w,k]=(0,n.useState)(null),[N,S]=(0,n.useState)(!1),[P,A]=(0,n.useState)(!1),[C,T]=(0,n.useState)(!1),I=(0,n.useRef)(null),M=(0,n.useRef)(u),$=(0,n.useCallback)(e=>{let r=i();if(!r)return null;let l=r.aggregateStats?.sol?.totalPnl??0,n=r.aggregateStats?.bnb?.totalPnl??0,o=r.members||[],u=r.name||"Lobby",d=e??r.banner??null;return{lobbyName:u,members:o,solPnl:l,bnbPnl:n,usdPerSol:t(),usdPerBnb:s(),banner:d,currentUserId:c??void 0,customization:a()}},[i,t,s,c,a]),B=(0,n.useCallback)(e=>{switch(u){case"User":default:return eM(e);case"Chart":return eL(e);case"MVP":return eE(e);case"Podium":return ez(e)}},[u]),L=(0,n.useCallback)(async()=>{let t=$(w);t?(v(null),p(!0),I.current=t.banner,B({...t,onSuccess:e=>{v(e.USD),g(!1)},onError:t=>{console.error("Error generating lobby share image:",t),j.default.error({message:e("Failed to generate lobby share image"),icon:(0,W.jsx)("i",{className:"ri-error-warning-line text-decrease text-[16px]"})}),p(!1),g(!1)},setShareIsLoading:g})):j.default.error({message:e("No lobby data available"),icon:(0,W.jsx)("i",{className:"ri-error-warning-line text-decrease text-[16px]"})})},[$,w,B,e]);(0,n.useEffect)(()=>{let e=$(w);e&&(null===I.current?I.current=e?.banner??null:e.banner!==I.current&&(I.current=e?.banner,L()))},[$,L,w]),(0,n.useEffect)(()=>{u!==M.current&&L(),M.current=u},[u,L]),(0,n.useEffect)(()=>{let e=()=>{L()};return window.addEventListener("lobby-pnl-customization-changed",e),()=>{window.removeEventListener("lobby-pnl-customization-changed",e)}},[L]);let U=(0,n.useCallback)(()=>{p(!1),v(null)},[]),F=(0,n.useCallback)(()=>{if(!y)return;let e=document.createElement("a");e.href=y,e.download="lobby-pnl.png",e.click()},[y]),E=(0,n.useCallback)(async()=>{if(y)try{let t=(e=>{let[t,r]=e.split(","),s=/data:(.*?);base64/.exec(t),a=s?s[1]:"image/png",l=atob(r),n=l.length,o=new Uint8Array(n);for(let e=0;e<n;e++)o[e]=l.charCodeAt(e);return new Blob([o],{type:a})})(y);await navigator.clipboard.write([new ClipboardItem({[t.type]:t})]),j.default.success({message:e("Image copied to clipboard!"),icon:(0,W.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})},{duration:500})}catch{j.default.error(e("Failed to copy image to clipboard"))}},[y,e]),R=(0,n.useCallback)(e=>{N&&e.target===e.currentTarget&&U()},[N,U]),_=(0,n.useCallback)(async t=>{A(!0);try{let s=await new Promise((e,r)=>{let s=new FileReader;s.onload=()=>e(s.result),s.onerror=r,s.readAsDataURL(t)}),a=await r.axiomApiV2.post("/set-lobby-banner",{image:s});j.default.success({message:e("Lobby banner updated successfully"),icon:(0,W.jsx)("i",{className:"ri-image-line text-primaryBlue text-[16px]"})}),k(a)}catch(t){console.error("Error uploading lobby banner:",t),j.default.error({message:e("Failed to upload lobby banner"),icon:(0,W.jsx)("i",{className:"ri-error-warning-line text-decrease text-[16px]"})})}finally{A(!1)}},[e]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(ep.Tooltip,{content:e("Share Lobby PnL"),position:"top",children:(0,W.jsx)("button",{type:"button",onClick:L,className:"group/btn flex items-center justify-center w-[28px] h-[28px] rounded-full bg-gray-500/35 hover:bg-gray-500/40 transition-all duration-[125ms] ease-in-out cursor-pointer",children:(0,W.jsx)("i",{className:"ri-share-2-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),x&&"undefined"!=typeof document&&(0,K.createPortal)((0,W.jsx)(eA.AnimatePresence,{children:(0,W.jsx)(G.motion.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(2px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:{duration:.35,ease:[.23,.01,.32,1]},className:"fixed inset-0 bg-[#050505]/80 backdrop-blur-[2px] flex flex-col items-center justify-center z-[10000]",onClick:R,onMouseDown:e=>{e.target===e.currentTarget&&S(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{S(!1)})},children:(0,W.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,W.jsxs)("div",{className:"border-transparent border flex p-[20px] justify-center items-center rounded-[20px] relative overflow-none z-[10001]",children:[(0,W.jsx)("div",{className:"absolute inset-0 rounded-[8px] border border-primaryStroke/50 animate-pulse-migrate pointer-events-none",style:{"--delay":"300ms"}}),(0,W.jsxs)("div",{className:"border-transparent border flex p-[16px] justify-center items-center rounded-[16px] relative",children:[(0,W.jsx)("div",{className:"absolute inset-0 rounded-[8px] border border-primaryStroke animate-pulse-migrate pointer-events-none",style:{"--delay":"150ms"}}),(0,W.jsxs)("div",{className:"border-transparent border flex p-[4px] justify-center items-center rounded-[8px] relative",children:[(0,W.jsx)("div",{className:"absolute inset-0 rounded-[8px] border border-primaryStroke animate-pulse-migrate pointer-events-none",style:{"--delay":"0ms"}}),(0,W.jsx)(G.motion.div,{initial:{scale:.96,opacity:0,y:8},animate:{scale:1,opacity:1,y:0},exit:{scale:.98,opacity:0,y:4},transition:{duration:.45,ease:[.23,.01,.32,1]},className:"relative group",onClick:e=>e.stopPropagation(),children:(0,W.jsx)("div",{className:"relative border-[1px] border-primaryStroke/80 rounded-[8px]",children:h?(0,W.jsx)("div",{className:"w-[720px] h-[488px] flex items-center justify-center",children:(0,W.jsx)("div",{className:"flex items-center justify-center",children:(0,W.jsx)("div",{className:"w-[32px] h-[32px] border-[2px] border-primaryBlue/20 border-t-primaryBlue rounded-full animate-spin"})})}):y?(0,W.jsx)(G.motion.div,{initial:{opacity:0,scale:.99},animate:{opacity:1,scale:1},transition:{duration:.55,ease:[.23,.01,.32,1],delay:.1},children:(0,W.jsx)(V.default,{src:y,alt:e("Lobby PnL"),width:720,height:480,className:"rounded-[8px]"})}):(0,W.jsx)("div",{className:"w-[720px] h-[480px] bg-textPrimary/10 flex items-center justify-center rounded-[8px]",children:(0,W.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:e("No Image")})})})})]})]})]}),(0,W.jsxs)(G.motion.div,{initial:{opacity:0,y:2},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.23,.01,.32,1],delay:.25},className:"flex flex-col gap-[8px] w-full sm:h-[120px] px-[44px] pb-[36px] justify-end items-end z-[10002]",children:[(0,W.jsxs)("div",{className:"flex flex-row gap-[16px] w-full min-h-[48px] sm:min-h-[80px] h-[48px] sm:h-[80px] justify-between items-center",children:[(0,W.jsx)("div",{className:"flex flex-row gap-[8px]",children:o?.banner&&(0,W.jsxs)("div",{onClick:()=>{k(o.banner)},className:"relative w-[71px] sm:w-[118px] h-[48px] sm:h-[80px] flex flex-shrink-0 flex-row gap-[8px] rounded-[4px] overflow-hidden cursor-pointer",children:[(0,W.jsx)("div",{className:`absolute inset-0 rounded-[4px] border cursor-pointer z-10 ${w===o.banner||null===w&&o.banner?"bg-primaryStroke/10 border-primaryBlueHover":"border-primaryStroke/50 hover:bg-primaryStroke/10 hover:border-primaryStroke/80 transition-colors duration-[125ms] ease-in-out"}`}),(0,W.jsx)(V.default,{src:o.banner,alt:"Custom",width:118,height:80,className:`rounded-[4px] object-cover w-full h-full ${w!==o.banner&&null!==w?"filter grayscale-[30%]":""}`,draggable:!1})]})}),(0,W.jsxs)("label",{className:`group border border-gray-500 border-opacity-[0.15] hover:border-opacity-[0.20] bg-gray-500 bg-opacity-[0.15] hover:bg-opacity-[0.20] w-[71px] sm:w-[118px] h-[48px] sm:h-[80px] flex flex-col gap-[3px] justify-center items-center rounded-[4px] backdrop-blur-[3px] transition-all duration-[125ms] ease-in-out ${P?"cursor-not-allowed opacity-60 pointer-events-none":"cursor-pointer"}`,children:[(0,W.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];t&&_(t),e.target.value=""},disabled:P}),(0,W.jsx)("i",{className:`${P?"ri-loader-4-line animate-spin":o?.banner?"ri-arrow-left-right-line":"ri-add-line"} text-white/80 text-[17px] transition-colors duration-[125ms] ease-in-out`}),(0,W.jsx)("span",{className:"hidden sm:block text-white/80 text-[11px] font-medium transition-colors duration-[125ms] ease-in-out",children:P?e("Uploading..."):o?.banner?e("Change upload"):e("Upload image")}),(0,W.jsx)("span",{className:"text-white/80 text-[9px] sm:text-[11px] font-medium transition-colors duration-[125ms] ease-in-out",children:e("max 0.5MB")})]})]}),(0,W.jsxs)("div",{className:"flex flex-row w-full justify-between items-center",children:[(0,W.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,W.jsx)("div",{className:"flex flex-row gap-[4px]",children:b.SHARED_PNL_STYLES.map(e=>(0,W.jsxs)("button",{type:"button",onClick:()=>d(e),className:`cursor-pointer group ${u===e?"bg-gray-500/25":"bg-gray-500/5 hover:bg-gray-500/10"} flex flex-row h-[32px] pr-[10px] pl-[8px] gap-[8px] justify-center items-center rounded-[4px] transition-all duration-[125ms] ease-in-out`,children:[(0,W.jsx)("i",{className:`${b.SHARED_PNL_STYLES_ICONS[e]} text-[14px] ${u===e?"text-white/80":"text-gray-400/80"}`}),(0,W.jsx)("span",{className:`text-[14px] font-medium ${u===e?"text-white/80":"text-gray-400"}`,children:e})]},e))}),(0,W.jsxs)("button",{type:"button",onClick:()=>T(!0),className:"cursor-pointer group bg-gray-500/15 hover:bg-gray-500/20 flex flex-row h-[32px] pr-[10px] pl-[8px] gap-[8px] justify-center items-center rounded-[4px] transition-all duration-[125ms] ease-in-out backdrop-blur-[8px]",children:[(0,W.jsx)("i",{className:"ri-paint-brush-line text-white/80 text-[14px] transition-colors duration-[125ms] ease-in-out"}),(0,W.jsx)("span",{className:"text-[14px] hidden sm:block font-medium text-white/80 transition-colors duration-[125ms] ease-in-out",children:e("Customize")})]})]}),(0,W.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,W.jsxs)("button",{type:"button",onClick:F,disabled:h||!y,className:`group bg-gray-500/15 hover:bg-gray-500/20 flex flex-row h-[32px] pr-[10px] pl-[8px] gap-[8px] justify-center items-center rounded-[4px] transition-all duration-[125ms] ease-in-out ${h||!y?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:[(0,W.jsx)("i",{className:"ri-download-line text-white/80 text-[14px] transition-colors duration-[125ms] ease-in-out"}),(0,W.jsx)("span",{className:"text-[14px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out",children:e("Download")})]}),(0,W.jsxs)("button",{type:"button",onClick:E,disabled:h||!y,className:`group bg-gray-500/15 hover:bg-gray-500/20 flex flex-row h-[32px] pr-[10px] pl-[8px] gap-[8px] justify-center items-center rounded-[4px] transition-all duration-[125ms] ease-in-out ${h||!y?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:[(0,W.jsx)("i",{className:"ri-file-copy-line text-white/80 text-[14px] transition-colors duration-[125ms] ease-in-out"}),(0,W.jsx)("span",{className:"text-[14px] font-medium text-white/80 transition-colors duration-[125ms] ease-in-out",children:e("Copy")})]})]})]})]})]})})}),document.body),C&&(0,W.jsx)(eO,{onClose:()=>T(!1)})]})}),eV=(0,n.memo)(function(){let{t:e}=(0,Y.useTranslation)(),t=(0,l.useAtomValue)(h.currentChainAtom),[r,s]=(0,n.useState)(!1),a=(0,l.useAtomValue)(y.userLobbySettingsAtom),o=(0,l.useSetAtom)(y.userLobbySettingsAtom),i=(0,l.useAtomValue)(ex.usdPerSolAtom),c=(0,l.useAtomValue)(ex.usdPerBnbAtom),u=(0,l.useAtomValue)(m.myLobbyInfoAtom),d=(0,l.useAtomValue)(b.userProfileIdAtom),x=u?.leaderUserId===d,p=(0,l.useAtomValue)(b.lobbyPnlTextColorAtom),f=(0,l.useAtomValue)(b.lobbyPnlPositiveColorAtom),g=(0,l.useAtomValue)(b.lobbyPnlNegativeColorAtom),v=(0,l.useAtomValue)(b.lobbyPnlUseBoldFontAtom),w=u?.aggregateStats?.sol?.totalBalance??0,j=u?.aggregateStats?.bnb?.totalBalance??0,k=u?.aggregateStats?.sol?.totalPnl??0,N=u?.aggregateStats?.bnb?.totalPnl??0,S="#EAEDFF"===p,P="#2FE3AC"===f&&"#EC397A"===g,A=(0,n.useMemo)(()=>{if(S)return;let e=p.replace("#",""),t=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return`rgba(${t}, ${r}, ${s}, 0.5)`},[p,S]),C="text-[24px]",T="text-[14px]",I=v?"font-bold":"font-medium",{dispalyedBalanceSol:M,dispalyedBalanceBnb:$,dispalyedPnlSol:B,dispalyedPnlBnb:L}=(0,n.useMemo)(()=>({dispalyedBalanceSol:a.showBalanceInUsd?w*i:w,dispalyedBalanceBnb:a.showBalanceInUsd?j*c:j,dispalyedPnlSol:a.showBalanceInUsd?k*i:k,dispalyedPnlBnb:a.showBalanceInUsd?N*c:N}),[w,j,k,N,i,c,a.showBalanceInUsd]),U="sol"===t?B:L,F=(0,n.useCallback)(()=>{o(e=>({...e,showBalanceInUsd:!e.showBalanceInUsd}))},[o]),E=(0,n.useCallback)(()=>{s(!0)},[]),R=(0,n.useCallback)(()=>{s(!1)},[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:"relative",children:[(0,W.jsxs)("div",{className:"absolute top-[12px] left-0 right-0 w-full px-[12px] z-10 flex items-center justify-between gap-[16px] opacity-0 group-hover/banner:opacity-100 transition-opacity duration-0 ease-in-out",children:[(0,W.jsxs)("div",{className:"flex justify-start items-center gap-[8px]",children:[(0,W.jsx)(eW,{}),(0,W.jsx)(ep.Tooltip,{content:e(a.showBalanceInUsd?`Switch to ${h.chainToInfoMap[t].ticker}`:"Switch to USD"),position:"top",children:(0,W.jsx)("button",{type:"button",onClick:F,className:"group/btn flex items-center justify-center w-[28px] h-[28px] rounded-full bg-gray-500/35 hover:bg-gray-500/40 transition-all duration-[125ms] ease-in-out cursor-pointer",children:(0,W.jsx)("i",{className:"ri-exchange-dollar-line text-[14px] transition-colors duration-[125ms] ease-in-out",style:{color:a.showBalanceInUsd?h.chainToInfoMap[t].color:"rgba(255, 255, 255, 0.8)"}})})})]}),x&&(0,W.jsx)(ep.Tooltip,{content:e("Reset PNL"),position:"top",children:(0,W.jsx)("button",{type:"button",onClick:E,className:"group/btn flex items-center justify-center w-[28px] h-[28px] rounded-full bg-gray-500/35 hover:bg-gray-500/40 transition-all duration-[125ms] ease-in-out cursor-pointer",children:(0,W.jsx)("i",{className:"ri-reset-left-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})})]}),(0,W.jsx)("div",{className:"flex flex-col p-[12px] pb-[4px] gap-[16px]",children:(0,W.jsxs)("div",{className:"flex flex-row items-center justify-evenly gap-[16px]",children:[(0,W.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[3px] w-full",children:[!a.showBalanceInUsd&&(0,W.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center w-[24px] h-[24px]",children:(0,W.jsx)(ed.default,{src:h.chainToInfoMap[t].icon,alt:h.chainToInfoMap[t].ticker,width:24,height:24,className:"opacity-100"})}),(0,W.jsx)("span",{className:`${C} opacity-100 ${I} flex flex-row items-center gap-1 ${S?"text-textPrimary":""}`,style:S?void 0:{color:p},dangerouslySetInnerHTML:{__html:`${a.showBalanceInUsd?"$":""}${(0,J.getFormattedNumber)("sol"===t?M:$,4)}`}})]}),(0,W.jsx)("span",{className:`${T} opacity-100 tracking-[-0.02rem] ${v?"font-medium":"font-normal"} ${S?"text-textTertiary":""}`,style:S?void 0:{color:A},children:e("Balance")})]}),(0,W.jsxs)("div",{className:"flex flex-col items-end justify-center",children:[(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[3px] w-full",children:[!a.showBalanceInUsd&&(0,W.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center w-[24px] h-[24px]",children:(0,W.jsx)(ed.default,{src:h.chainToInfoMap[t].icon,alt:h.chainToInfoMap[t].ticker,width:24,height:24,className:"opacity-100"})}),(0,W.jsx)("span",{className:`${C} opacity-100 ${I} flex flex-row items-center ${P?U<0?"text-decrease":"text-increase":""}`,style:P?void 0:{color:U<0?g:f},dangerouslySetInnerHTML:{__html:`${U<0?"-":"+"}${a.showBalanceInUsd?"$":""}${(0,J.getFormattedNumber)(Math.abs(U),4)}`}})]}),(0,W.jsx)("span",{className:`${T} opacity-100 tracking-[-0.02rem] ${v?"font-medium":"font-normal"} ${S?"text-textTertiary":""}`,style:S?void 0:{color:A},children:e("PNL")})]})]})})]}),(0,W.jsx)(eP,{isOpen:r,onClose:R})]})});var eq=e.i(48493),eG=e.i(828641),eK=e.i(93913);let eY=({imageUrl:e,tokenName:t,isOpen:r,onClose:s})=>{let[a,l]=(0,n.useState)(!1);return(0,K.createPortal)((0,W.jsx)(eA.AnimatePresence,{children:r&&(0,W.jsxs)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"fixed inset-0 flex items-center justify-center z-[9999]",children:[(0,W.jsx)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:e=>{a&&e.target===e.currentTarget&&s()},onMouseDown:e=>{e.target===e.currentTarget&&l(!0)},onMouseUp:()=>{requestAnimationFrame(()=>l(!1))}}),(0,W.jsxs)(G.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-[90%] max-w-[750px] rounded-[12px] overflow-hidden z-50 shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)] relative pointer-events-auto",onClick:e=>e.stopPropagation(),children:[(0,W.jsx)("button",{type:"button",className:"absolute top-[8px] right-[8px] z-20 group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[32px] h-[32px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:e=>{e.stopPropagation(),s()},children:(0,W.jsx)("i",{className:"ri-close-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})}),(0,W.jsxs)("div",{className:"relative w-full aspect-[28/19] rounded-[12px] overflow-hidden",children:[(0,W.jsx)("div",{className:"absolute inset-0 border-[1px] border-white/10 rounded-[12px] z-10 pointer-events-none"}),(0,W.jsx)(V.default,{src:e,alt:`PnL for ${t}`,fill:!0,draggable:!1,className:"object-cover select-none",unoptimized:!0,priority:!0})]})]})]})}),document.body)},eX=(0,n.memo)(function({message:e,isWindowModal:t=!1}){let{uid:r,totalPnl:s,totalInvested:a,totalPosition:o,tokenName:i,tokenTicker:c,tokenImage:u,pnlCurrency:d,chain:x,pairAddress:p,username:f,rewardsLevel:h}=e,b=(0,l.useAtomValue)(m.lobbyUserMapAtom).get(r),[g,y]=(0,n.useState)(null),[v,w]=(0,n.useState)(!1),[j,k]=(0,n.useState)(!1),N=(0,n.useCallback)(()=>{g&&k(!0)},[g]),S=b?.userProfile?.avatarUrl||null,P=b?.userProfile?.bannerUrl||null,A=b?.userProfile?.username||f,C="sol"===x?`/meme/${p}?chain=sol`:`/meme/${p}?chain=bnb`,T=e=>e.length<=10?e:`${e.slice(0,6)}...${e.slice(-4)}`;if((0,n.useEffect)(()=>{(async()=>{if(!v&&!g){w(!0);try{let e=s>=0,t=a>0?s/a*100:0,r="NATIVE"===d?"sol"===x?" SOL":" BNB":"",l=(e,t=!1)=>{let s=t&&e>=0?"+":e<0?"-":"";return"USD"===d?`${s}$${(0,J.getFormattedNumber)(Math.abs(e),4,!0)}`:`${s}${(0,J.getFormattedNumber)(Math.abs(e),4,!0)}${r}`},n=await (0,eG.generateTokenPnl)({tokenTicker:c||"Unknown",tokenName:i||"Unknown Token",tokenImage:u||"/images/pnl-templates/default-token.jpg",usdBought:l(a),usdPosition:l(o),pnlString:l(s,!0),pnlPercentageString:`${e?"+":""}${t.toFixed(2)}%`,isPositivePnl:e,referralCode:A,profileImage:S,currency:"USD"===d?"USD":"sol"===x?"SOL":"BNB",template:P?"custom":"katana",customTemplateUrl:P,customTextColor:"#FFFFFF",customPositiveColor:"#00D87A",customNegativeColor:"#FF3B3B",showPnlRectangle:!0,rectangleTextColor:"#FFFFFF",useBoldFont:!1,useTextShadows:!0,rewardsLevel:h||0,nativeToken:x});y(n)}catch(e){console.error("Error generating PnL image:",e),y(null)}finally{w(!1)}}})()},[s,a,o,i,c,u,d,x,A,S,P,h,g,v]),v&&!g)return(0,W.jsx)("div",{className:`w-full aspect-[28/19] rounded-[12px] animate-pulse ${t?"bg-secondaryStroke/50":"bg-primaryStroke/50"}`});if(g)return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:"relative w-full rounded-[12px] overflow-hidden",children:[(0,W.jsxs)("div",{className:"relative w-full aspect-[28/19] cursor-pointer",onClick:N,children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-[12px]"}),(0,W.jsx)(V.default,{src:g,alt:`PnL for ${i}`,fill:!0,className:"object-cover",unoptimized:!0,draggable:!1})]}),(0,W.jsxs)(eK.default,{url:C,className:"absolute bottom-[6px] right-[6px] flex items-center gap-[4px] h-[28px] px-[6px] rounded-[6px] backdrop-blur-[16px] backdrop-saturate-[1.5] overflow-hidden hover:bg-white/[0.125] transition-all duration-[125ms] ease-in-out group z-20",children:[(0,W.jsx)("div",{className:"absolute inset-0 bg-backgroundSecondary/60 z-0"}),(0,W.jsx)("i",{className:"relative z-[2] ri-link text-[12px] text-primaryBlueHover group-hover:text-primaryBlueHover transition-colors duration-[125ms] ease-in-out"}),(0,W.jsx)("span",{className:"relative z-[2] text-[12px] font-medium text-textSecondary group-hover:text-primaryBlueHover transition-colors duration-[125ms] ease-in-out",children:T(p)})]})]}),(0,W.jsx)(eY,{imageUrl:g,tokenName:i,isOpen:j,onClose:()=>k(!1)})]});let I=s>=0,M=e=>{if("USD"===d)return`$${Math.abs(e).toFixed(2)}`;{let t="sol"===x?" SOL":" BNB";return`${Math.abs(e).toFixed(4)}${t}`}};return(0,W.jsxs)("div",{className:"flex flex-col gap-[8px] p-[16px] bg-backgroundTertiary rounded-[8px] max-w-[400px]",children:[(0,W.jsxs)("div",{className:"flex items-center gap-[8px] mb-[8px]",children:[u&&(0,W.jsx)(V.default,{src:u,alt:i,width:32,height:32,className:"w-[32px] h-[32px] rounded-full object-cover",unoptimized:!0,draggable:!1}),(0,W.jsxs)("div",{className:"flex flex-col",children:[(0,W.jsx)("span",{className:"text-[14px] font-semibold text-textPrimary",children:i}),(0,W.jsxs)("span",{className:"text-[12px] text-textTertiary",children:["$",c]})]})]}),(0,W.jsxs)("div",{className:"flex flex-col gap-[4px]",children:[(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-[12px] text-textTertiary",children:"PnL"}),(0,W.jsxs)("span",{className:`text-[14px] font-bold ${I?"text-increase":"text-decrease"}`,children:[I?"+":"",M(s)]})]}),(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-[12px] text-textTertiary",children:"Invested"}),(0,W.jsx)("span",{className:"text-[14px] text-textPrimary",children:M(a)})]}),(0,W.jsxs)("div",{className:"flex justify-between items-center",children:[(0,W.jsx)("span",{className:"text-[12px] text-textTertiary",children:"Position"}),(0,W.jsx)("span",{className:"text-[14px] text-textPrimary",children:M(o)})]})]}),(0,W.jsx)("div",{className:"mt-[8px] pt-[8px] border-t border-textPrimary/10",children:(0,W.jsx)("span",{className:"text-[11px] text-textTertiary italic",children:"Failed to generate PnL image"})}),(0,W.jsx)("div",{className:"mt-[8px] flex justify-end",children:(0,W.jsxs)(eK.default,{url:C,className:"inline-flex items-center gap-[6px] text-[12px] text-textTertiary hover:text-textPrimary transition-colors group",children:[(0,W.jsx)("i",{className:"ri-link text-[12px] group-hover:text-textPrimary"}),(0,W.jsx)("span",{className:"font-mono",children:T(p)})]})})]})});var eJ=e.i(522016),eQ=e.i(157613),eZ=e.i(538560);let e0=(0,n.memo)(function({message:e,isWindowModal:t=!1}){return e.frozenData?(0,W.jsx)(e1,{message:e,isWindowModal:t}):(0,W.jsx)(e2,{message:e,isWindowModal:t})}),e1=(0,n.memo)(function({message:e,isWindowModal:t=!1}){let{t:r}=(0,Y.useTranslation)(),s=(0,N.useRouter)(),a="bnb"===e.chain,o=(0,l.useAtomValue)(a?ex.usdPerBnbAtom:ex.usdPerSolAtom),i=(0,n.useMemo)(()=>e.frozenData?{price:e.frozenData.ath,ATH:e.frozenData.ath}:{price:0,ATH:0},[e.frozenData]),c=(0,n.useCallback)(()=>{s.push(`/meme/${e.pairAddress}?chain=${e.chain}`)},[s,e.pairAddress,e.chain]),u=e.mc,d=e.tokenSupply,x=(0,n.useMemo)(()=>0===i.ATH?u:i.ATH*o*d,[i.ATH,o,d,u]),p=(0,n.useMemo)(()=>(x-u)/u*100,[x,u]),m=async()=>{try{await navigator.clipboard.writeText(e.tokenAddress),j.default.success({message:r("Address copied to clipboard"),icon:(0,W.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})})}catch(e){console.error("Failed to copy:",e),j.default.error("Failed to copy address")}},{className:f,style:b}=(0,ef.getProtocolBadgeBorderWithChain)(e.proto,e.isMigrated,e.chain),g=h.chainToInfoMap[e.chain],y=(0,ef.getProtocolIconWithChain)(e.proto,e.isMigrated,e.chain);return(0,W.jsxs)("div",{className:`${t?"bg-secondaryStroke/35 hover:bg-secondaryStroke/65 border-secondaryStroke":"bg-primaryStroke/35 hover:bg-primaryStroke/65 border-primaryStroke"} border transition-colors duration-0 ease-in-out flex flex-col w-full gap-[12px] p-[12px] pb-[14px] rounded-[12px] cursor-pointer`,onClick:c,children:[(0,W.jsxs)("div",{className:"flex flex-row w-full h-[32px] min-h-[32px] max-h-[32px] gap-[10px] items-center",children:[(0,W.jsx)(eu.EnlargeTokenImage,{tokenImage:e.tokenImage,tokenTicker:e.tokenTicker,tokenName:e.tokenName,position:"bottom",delay:.125,showOnMobile:!1,children:(0,W.jsx)(eJ.default,{href:`/meme/${e.pairAddress}?chain=${e.chain}`,className:"relative w-[36px] h-[36px] flex-shrink-0 group/token",onClick:e=>e.stopPropagation(),children:(0,W.jsxs)("div",{className:"relative h-[36px] w-[36px] bg-secondaryStroke rounded-[4px] transition-opacity duration-135 group-hover/token:opacity-80",children:[(0,W.jsx)(ed.default,{src:e.tokenImage,alt:e.tokenName,width:36,height:36,tokenTicker:e.tokenTicker,className:"absolute -inset-[0px] rounded-[3px] w-full h-full object-cover z-10 bg-secondaryStroke",loading:"eager"}),(0,W.jsx)("div",{className:`absolute -inset-[1px] rounded-[4px] opacity-[0.35] z-0 ${f||""}`,style:b}),(0,W.jsx)("div",{className:`flex absolute bottom-[-4px] right-[-4px] w-[14px] h-[14px] p-[2px] justify-center items-center rounded-full z-20 shadow-sm ${f||""}`,style:b,children:(0,W.jsx)("div",{className:"flex justify-center items-center bg-background absolute w-[12px] h-[12px] rounded-full z-30",children:(0,W.jsx)(ed.default,{src:y,tokenTicker:e.tokenTicker,alt:e.proto,width:8,height:8,loading:"eager"})})})]})})}),(0,W.jsxs)("div",{className:"flex flex-col flex-1 gap-[2px] min-w-0",children:[(0,W.jsxs)("div",{className:"flex flex-row h-[24px] items-center gap-[6px]",children:[(0,W.jsxs)("div",{className:"flex flex-1 flex-row gap-[4px] items-center",children:[(0,W.jsx)(eJ.default,{href:`/meme/${e.pairAddress}?chain=${e.chain}`,className:"flex flex-row items-center gap-[4px] min-w-0 group/name",children:(0,W.jsx)("span",{className:"text-[14px] font-medium text-textPrimary group-hover/name:text-textPrimary/80 group-hover/name:underline transition-all duration-135",children:e.tokenTicker.length>10?`${e.tokenTicker.slice(0,10)}...`:e.tokenTicker})}),(0,W.jsx)(ep.Tooltip,{content:r("Copy token address"),position:"top",children:(0,W.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),m()},className:"flex-shrink-0 cursor-pointer transition-colors duration-[125ms]",children:(0,W.jsx)("i",{className:"ri-file-copy-fill text-[14px] text-textTertiary hover:text-primaryBlueHover transition-colors duration-[125ms]"})})})]}),(0,W.jsx)("div",{className:"flex flex-1 flex-row gap-[12px] justify-end items-center",children:(0,W.jsxs)("span",{className:"text-[14px] font-medium flex-shrink-0",children:[(0,W.jsxs)("span",{className:"text-textSecondary text-[12px] mb-[-1.6px]",children:["ATH"," "]}),(0,W.jsx)("span",{className:`${x<=3e4?"text-primaryLightBlue":x<=15e4?"text-primaryYellow":"text-increase"}`,dangerouslySetInnerHTML:{__html:`$${(0,J.getFormattedNumber)(x,4)}`}})]})})]}),(0,W.jsxs)("div",{className:"flex flex-row h-[20px] items-center gap-[12px]",children:[(0,W.jsxs)("div",{className:"flex flex-row gap-[4px] items-center",children:[(0,W.jsx)(V.default,{src:g.icon,alt:g.ticker,width:14,height:14,className:"rounded-full"}),(0,W.jsx)("span",{className:"text-[11px] text-textSecondary",children:"At MC"}),(0,W.jsx)("span",{className:"text-[11px] font-medium text-primaryBlueHover",dangerouslySetInnerHTML:{__html:`$${(0,J.getFormattedNumber)(u,4)}`}})]}),(0,W.jsxs)("div",{className:"flex flex-1 flex-row gap-[4px] justify-end items-center",children:[(0,W.jsx)("i",{className:"ri-checkbox-circle-line text-[12px] text-primaryBlueHover"}),(0,W.jsx)("span",{className:"text-[11px] text-primaryBlueHover font-medium",children:"Complete"})]})]})]})]}),(0,W.jsx)("div",{className:"flex flex-row mt-[4px] items-center gap-[12px]",children:(0,W.jsxs)("div",{className:"flex flex-1 items-center h-[8px] gap-[4px] min-w-0",children:[(0,W.jsx)("div",{className:"relative h-[4px] flex-1 rounded-l-full rounded-r-none overflow-hidden bg-textTertiary/10",children:(0,W.jsx)("div",{className:"absolute top-0 right-0 h-full bg-decrease",style:{width:p<0?`${Math.min(Math.abs(p),100)}%`:"0%"}})}),(0,W.jsx)("div",{className:"flex flex-row min-w-[48px] gap-[4px] justify-center items-center",children:(0,W.jsxs)("span",{className:`text-[12px] font-medium ${p>=0?"text-increase":"text-decrease"}`,children:[p>=0?"+":"",p.toFixed(1),"%"]})}),(0,W.jsx)("div",{className:"relative h-[4px] flex-1 rounded-r-full rounded-l-none overflow-hidden bg-textTertiary/10",children:(0,W.jsx)("div",{className:"absolute top-0 left-0 h-full bg-increase",style:{width:p>=0?`${Math.min(p,100)}%`:"0%"}})})]})})]})}),e2=(0,n.memo)(function({message:e,isWindowModal:t=!1}){let{t:r}=(0,Y.useTranslation)(),s=(0,N.useRouter)(),a=(0,l.useAtomValue)(ex.usdPerSolAtom),o=(0,l.useAtomValue)(ex.usdPerBnbAtom),{isMigrated:i,pairAddress:c}=(0,l.useAtomValue)((0,n.useMemo)(()=>(0,$.isTokenMigratedAtom)(e.tokenAddress,e.isMigrated,e.pairAddress),[e.tokenAddress,e.isMigrated,e.pairAddress])),u=(0,l.useAtomValue)((0,n.useMemo)(()=>(0,$.alertPriceByPairAtom)(c,e.feedItemId??e.ts.toString()),[c,e.feedItemId,e.ts])),d=(0,n.useMemo)(()=>e.live?{price:e.live.liveAth,ATH:e.live.liveAth}:u,[e.live,u]),x=(0,n.useCallback)(()=>{s.push(`/meme/${c}?chain=${e.chain}`)},[s,c,e.chain]),p=e.mc,m=e.tokenSupply,f=(0,n.useMemo)(()=>({type:"pair",fetchLiquidity:!0,pairAddress:c,tokenAddress:e.tokenAddress}),[c,e.tokenAddress]),b=(0,n.useMemo)(()=>{if(0===d.price)return p;let t="bnb"===e.chain?o:a;return d.price*t*m},[d.price,e.chain,o,a,m,p]),g=(0,n.useMemo)(()=>{if(0===d.ATH)return p;let t="bnb"===e.chain?o:a;return d.ATH*t*m},[d.ATH,e.chain,o,a,m,p]),y=(0,n.useMemo)(()=>(b-p)/p*100,[b,p]),v=async()=>{try{await navigator.clipboard.writeText(e.tokenAddress),j.default.success({message:r("Address copied to clipboard"),icon:(0,W.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})})}catch(e){console.error("Failed to copy:",e),j.default.error("Failed to copy address")}},{className:w,style:k}=(0,ef.getProtocolBadgeBorderWithChain)(e.proto,i,e.chain),S=h.chainToInfoMap[e.chain],P=(0,ef.getProtocolIconWithChain)(e.proto,i,e.chain);return(0,W.jsxs)("div",{className:"bg-primaryBlue/5 hover:bg-primaryBlue/[0.08] border-primaryBlue/20 border transition-colors duration-0 ease-in-out flex flex-col w-full gap-[12px] p-[12px] pb-[14px] rounded-[12px] cursor-pointer",onClick:x,children:[(0,W.jsxs)("div",{className:"flex flex-row w-full h-[32px] min-h-[32px] max-h-[32px] gap-[10px] items-center",children:[(0,W.jsx)(eu.EnlargeTokenImage,{tokenImage:e.tokenImage,tokenTicker:e.tokenTicker,tokenName:e.tokenName,position:"bottom",delay:.125,showOnMobile:!1,children:(0,W.jsx)(eJ.default,{href:`/meme/${c}?chain=${e.chain}`,className:"relative w-[36px] h-[36px] flex-shrink-0 group/token",onClick:e=>e.stopPropagation(),children:(0,W.jsxs)("div",{className:"relative h-[36px] w-[36px] bg-secondaryStroke rounded-[4px] transition-opacity duration-135 group-hover/token:opacity-80",children:[(0,W.jsx)(ed.default,{src:e.tokenImage,alt:e.tokenName,width:36,height:36,tokenTicker:e.tokenTicker,className:"absolute -inset-[0px] rounded-[3px] w-full h-full object-cover z-10 bg-secondaryStroke",loading:"eager"}),(0,W.jsx)("div",{className:`absolute -inset-[1px] rounded-[4px] opacity-[0.35] z-0 ${w||""}`,style:k}),(0,W.jsx)("div",{className:`flex absolute bottom-[-4px] right-[-4px] w-[14px] h-[14px] p-[2px] justify-center items-center rounded-full z-20 shadow-sm ${w||""}`,style:k,children:(0,W.jsx)("div",{className:"flex justify-center items-center bg-background absolute w-[12px] h-[12px] rounded-full z-30",children:(0,W.jsx)(ed.default,{src:P,tokenTicker:e.tokenTicker,alt:e.proto,width:8,height:8,loading:"eager"})})})]})})}),(0,W.jsxs)("div",{className:"flex flex-col flex-1 gap-[2px] min-w-0",children:[(0,W.jsxs)("div",{className:"flex flex-row h-[24px] items-center gap-[6px]",children:[(0,W.jsxs)("div",{className:"flex flex-1 flex-row gap-[4px] items-center",children:[(0,W.jsx)(eJ.default,{href:`/meme/${c}?chain=${e.chain}`,className:"flex flex-row items-center gap-[4px] min-w-0 group/name",children:(0,W.jsx)("span",{className:"text-[14px] font-medium text-textPrimary group-hover/name:text-textPrimary/80 group-hover/name:underline transition-all duration-135",children:e.tokenTicker.length>10?`${e.tokenTicker.slice(0,10)}...`:e.tokenTicker})}),(0,W.jsx)(ep.Tooltip,{content:r("Copy token address"),position:"top",children:(0,W.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),v()},className:"flex-shrink-0 cursor-pointer transition-colors duration-[125ms]",children:(0,W.jsx)("i",{className:"ri-file-copy-fill text-[14px] text-textTertiary hover:text-primaryBlueHover transition-colors duration-[125ms]"})})})]}),(0,W.jsx)("div",{className:"flex flex-1 flex-row gap-[12px] justify-end items-center",children:(0,W.jsxs)("span",{className:"text-[14px] font-medium flex-shrink-0",children:[(0,W.jsxs)("span",{className:"text-textSecondary text-[12px] mb-[-1.6px]",children:["MC"," "]}),(0,W.jsx)("span",{className:`${b<=3e4?"text-primaryLightBlue":b<=15e4?"text-primaryYellow":"text-increase"}`,dangerouslySetInnerHTML:{__html:`$${(0,J.getFormattedNumber)(b,4)}`}})]})})]}),(0,W.jsxs)("div",{className:"flex flex-row h-[20px] items-center gap-[12px]",children:[(0,W.jsxs)("div",{className:"flex flex-row gap-[4px] items-center",children:[(0,W.jsx)(V.default,{src:S.icon,alt:S.ticker,width:14,height:14,className:"rounded-full"}),(0,W.jsx)("span",{className:"text-[11px] text-textSecondary",children:"At MC"}),(0,W.jsx)("span",{className:"text-[11px] font-medium text-primaryBlueHover",dangerouslySetInnerHTML:{__html:`$${(0,J.getFormattedNumber)(p,4)}`}})]}),(0,W.jsxs)("div",{className:"flex flex-1 flex-row gap-[4px] justify-end items-center",children:[(0,W.jsx)("span",{className:"text-[11px] text-textSecondary",children:"ATH"}),(0,W.jsx)("span",{className:`text-[11px] font-medium ${g<=3e4?"text-primaryLightBlue":g<=15e4?"text-primaryYellow":"text-increase"}`,dangerouslySetInnerHTML:{__html:`$${(0,J.getFormattedNumber)(g,4)}`}})]})]})]})]}),(0,W.jsxs)("div",{className:"flex flex-row mt-[4px] items-center gap-[12px]",children:[(0,W.jsxs)("div",{className:"flex flex-1 items-center h-[8px] gap-[4px] min-w-0",children:[(0,W.jsx)("div",{className:"relative h-[4px] flex-1 rounded-l-full rounded-r-none overflow-hidden bg-primaryBlue/10 overflow-hidden",children:(0,W.jsx)("div",{className:"absolute top-0 right-0 h-full bg-decrease",style:{width:y<0?`${Math.min(Math.abs(y),100)}%`:"0%"}})}),(0,W.jsx)("div",{className:"flex flex-row min-w-[48px] gap-[4px] justify-center items-center",children:(0,W.jsxs)("span",{className:`text-[12px] font-medium ${y>=0?"text-increase":"text-decrease"}`,children:[y>=0?"+":"",y.toFixed(1),"%"]})}),(0,W.jsx)("div",{className:"relative h-[4px] flex-1 rounded-r-full rounded-l-none overflow-hidden bg-primaryBlue/10 overflow-hidden",children:(0,W.jsx)("div",{className:"absolute top-0 left-0 h-full bg-increase",style:{width:y>=0?`${Math.min(y,100)}%`:"0%"}})})]}),(0,W.jsx)("div",{onClick:e=>e.stopPropagation(),children:"sol"===e.chain?(0,W.jsx)(eQ.QuickBuyButtonSol,{pairInfo:f,size:"24px",padding:"4px",icon:!0,hideUnit:!0,showLabel:!1}):(0,W.jsx)(eZ.QuickBuyButtonBnb,{pairInfo:f,size:"24px",padding:"4px",icon:!0,hideUnit:!0,showLabel:!1,fetchLatestSwapInfo:!0})})]})]})});var e4=e.i(973444);let e5=new Map([["buy","bought"],["sell","sold"],["add","added liquidity to"],["remove","removed liquidity from"]]),e6=(0,n.memo)(function({message:e}){let t,[r,s]=(0,n.useState)(!1),{t:a}=(0,Y.useTranslation)(),l=(0,n.useMemo)(()=>{var t,r;return(r=t=e.transaction).length>28&&1===r[0]?{chain:"bnb",timestamp:t[1],walletAddress:t[2],signature:t[3],pairAddress:t[5],tokenAddress:t[6],totalCurrency:t[10],totalUsd:t[11],type:t[14],tokenName:t[19],tokenTicker:t[20],tokenImage:t[21],protocol:t[24],isMigrated:t[25]}:{chain:"sol",timestamp:t[0],walletAddress:t[1],signature:t[2],pairAddress:t[4],tokenAddress:t[5],totalCurrency:t[10],totalUsd:t[11],type:t[13],tokenName:t[18],tokenTicker:t[19],tokenImage:t[20],protocol:t[23],isMigrated:t[24]}},[e.transaction]),{className:o,style:i}=(0,ef.getProtocolBadgeBorderWithChain)(l.protocol,l.isMigrated,l.chain),c=(0,ef.getProtocolIconWithChain)(l.protocol,l.isMigrated,l.chain),u=h.chainToInfoMap[l.chain],d=(0,n.useMemo)(()=>r?{type:"pair",fetchLiquidity:!0,pairAddress:l.pairAddress,tokenAddress:l.tokenAddress}:null,[l.pairAddress,l.tokenAddress,r]),x="buy"===l.type.toLowerCase(),p="sell"===l.type.toLowerCase(),m=x?"text-increase":p?"text-decrease":"text-textSecondary";return(0,W.jsxs)(eJ.default,{href:`/meme/${l.pairAddress}?chain=${l.chain}`,className:`relative flex flex-col gap-[6px] p-[12px] py-[8px] rounded-[12px] border transition-colors ease-in-out duration-0 ${x?"bg-increase/5 border-increase/10 hover:bg-increase/[0.09]":p?"bg-decrease/5 border-decrease/15 hover:bg-decrease/[0.09]":"bg-primaryStroke/35 border-primaryStroke/50"}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[12px]",children:[(0,W.jsx)("span",{className:`text-[14px] font-medium ${m} capitalize`,children:e5.get(l.type.toLowerCase())}),(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[8px]",children:[(0,W.jsx)(eu.EnlargeTokenImage,{tokenImage:l.tokenImage||"",tokenTicker:l.tokenTicker,tokenName:l.tokenName,position:"bottom",delay:.125,showOnMobile:!1,children:(0,W.jsxs)("div",{className:"relative h-[20px] w-[20px] bg-secondaryStroke rounded-[4px] transition-all duration-135 ease-in-out hover:opacity-80",children:[(0,W.jsx)(ed.default,{src:l.tokenImage??"",alt:l.tokenName,width:20,height:20,tokenTicker:l.tokenTicker??l.tokenName,className:"absolute -inset-[0px] rounded-[3px] w-full h-full object-cover z-10 bg-secondaryStroke",loading:"eager"}),(0,W.jsx)("div",{className:`absolute -inset-[1px] rounded-[4px] opacity-[0.35] z-0 ${o||""}`,style:i}),(0,W.jsx)("div",{className:`flex absolute bottom-[-4px] right-[-4px] w-[12px] h-[12px] p-[2px] justify-center items-center rounded-full z-10 shadow-sm ${o||""}`,style:i,children:(0,W.jsx)("div",{className:"flex justify-center items-center bg-background absolute w-[10px] h-[10px] rounded-full z-30",children:(0,W.jsx)(ed.default,{src:c,tokenTicker:l.tokenTicker??l.tokenName,alt:l.protocol,width:6,height:6,loading:"eager"})})})]})}),(0,W.jsx)("div",{className:"flex flex-col flex-1 min-w-0",children:(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,W.jsx)(eJ.default,{href:`/meme/${l.pairAddress}?chain=${l.chain}`,className:"flex flex-row items-center gap-[4px] min-w-0 group/name",onClick:e=>e.stopPropagation(),children:(0,W.jsx)("span",{className:"text-[14px] font-medium text-textPrimary group-hover/name:text-textPrimary/80 group-hover/name:underline transition-all duration-135 truncate",children:(t=l.tokenTicker??l.tokenName)&&t.length>10?`${t.slice(0,10)}...`:t})}),(0,W.jsx)(ep.Tooltip,{content:a("Copy token address"),position:"top",children:(0,W.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),(0,e4.handleCopy)(l.tokenAddress),j.default.success({message:a("Address copied to clipboard"),icon:(0,W.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[14px]"})},{duration:1500})},className:"flex-shrink-0 cursor-pointer transition-colors duration-[125ms]",children:(0,W.jsx)("i",{className:"ri-file-copy-fill text-[14px] text-textTertiary hover:text-primaryBlueHover transition-colors duration-[125ms]"})})})]})})]}),(0,W.jsx)("div",{className:"flex flex-row items-center gap-[6px]",children:(0,W.jsxs)("div",{className:"flex items-center gap-[4px]",children:[(0,W.jsx)(V.default,{src:u.icon,alt:u.ticker,width:14,height:14,className:"flex-shrink-0"}),(0,W.jsx)("span",{className:`text-[12px] font-medium whitespace-nowrap ${m}`,dangerouslySetInnerHTML:{__html:(0,J.getFormattedNumber)(l.totalCurrency,4)}}),e.transactionCount>1&&(0,W.jsxs)("span",{className:"text-[12px] font-medium text-textSecondary",children:["/ ",e.transactionCount," tx"]})]})})]}),r&&d&&(0,W.jsx)("div",{className:"absolute right-[8px] top-1/2 -translate-y-1/2",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:"sol"===l.chain?(0,W.jsx)(eQ.QuickBuyButtonSol,{pairInfo:d,size:"24px",icon:!0,padding:"4px",hideUnit:!0,showLabel:!1,snipe:!1,pulse:!1,rounded:"999px",keyType:"default",width:"",height:"",seeThrough:!1,transparentStyle:!1,isSecond:!1,isPulse:!1,color:"primaryBlue",shouldRedirect:!1}):(0,W.jsx)(eZ.QuickBuyButtonBnb,{pairInfo:d,size:"24px",icon:!0,padding:"4px",hideUnit:!0,showLabel:!1,pulse:!1,rounded:"999px",keyType:"default",width:"",height:"",seeThrough:!1,transparentStyle:!1,isSecond:!1,isPulse:!1,color:"primaryBlue",shouldRedirect:!1})})]})}),e3=/\.(png|jpg|jpeg|gif|webp|svg|bmp|ico)(\?.*)?$/i,e8=["i.imgur.com","pbs.twimg.com","media.discordapp.net"],e9=/^https?:\/\/[^\s<>"{}|\\^`[\]]+$/i,e7=(0,n.memo)(function({url:e}){let{t}=(0,Y.useTranslation)(),[r,s]=(0,n.useState)(!1),[a,l]=(0,n.useState)(!1);return(0,W.jsx)("span",{className:"break-all",children:e})}),te=({message:e})=>{let t=(e=>{let t=e.trim();if(e9.test(t)&&(e=>{if(e3.test(e))return!0;try{let t=new URL(e).hostname;return e8.some(e=>t.includes(e))}catch{return!1}})(t))return[{type:"image",url:t}];let r=[],s=e.matchAll(/https?:\/\/[^\s<>"{}|\\^`[\]]+/gi),a=0;for(let t of s){let s=t.index??0;s>a&&r.push({type:"text",content:e.slice(a,s)}),r.push({type:"link",url:t[0]}),a=s+t[0].length}return a<e.length&&r.push({type:"text",content:e.slice(a)}),0===r.length&&r.push({type:"text",content:e}),r})(e),[r,s]=(0,n.useState)(null),a=(0,l.useAtomValue)(y.userLobbySettingsAtom).showLinksAsClickable,o=(0,n.useCallback)((e,t)=>{e.preventDefault(),s(t)},[]),i=(0,n.useCallback)(()=>{r&&(window.open(r,"_blank","noopener,noreferrer"),s(null))},[r]),c=(0,n.useCallback)(()=>{s(null)},[]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("span",{children:t.map((e,t)=>"image"===e.type?(0,W.jsx)(e7,{url:e.url},`img-${e.url}`):"link"===e.type?a?(0,W.jsx)("button",{type:"button",onClick:t=>o(t,e.url),className:"text-primaryBlueHover hover:underline break-all cursor-pointer bg-transparent border-none p-0 font-inherit text-left",children:e.url},`link-${e.url}-${t}`):(0,W.jsx)("span",{className:"break-all text-textSecondary",children:e.url},`link-${e.url}-${t}`):(0,W.jsx)("span",{className:"text-textSecondary",children:e.content},`text-${e.content}-${t}`))}),(0,W.jsx)(tt,{isOpen:!!r,url:r??"",onConfirm:i,onClose:c})]})},tt=(0,n.memo)(function({isOpen:e,url:t,onConfirm:r,onClose:s}){let{t:a}=(0,Y.useTranslation)(),[o,i]=(0,n.useState)(!1),[c,u]=(0,l.useAtom)(y.userLobbySettingsAtom),d=c.showWarningsOnLinks,x=(0,n.useCallback)(()=>{u(e=>({...e,showWarningsOnLinks:!e.showWarningsOnLinks}))},[u]),p=(0,n.useCallback)(e=>{o&&e.target===e.currentTarget&&s()},[o,s]),m=(0,n.useMemo)(()=>t.startsWith("https://axiom-backend-production.up.railway.app"),[t]);return e&&"undefined"!=typeof document?!d||m?(r(),null):(0,K.createPortal)((0,W.jsx)(G.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[200]",onClick:p,onMouseDown:e=>{e.target===e.currentTarget&&i(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{i(!1)})},children:(0,W.jsx)(G.motion.div,{className:"relative w-[452px] max-h-[880px]",onClick:e=>e.stopPropagation(),initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},children:(0,W.jsxs)("div",{className:"flex flex-col w-full h-full bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,W.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,W.jsxs)("div",{className:"flex items-center gap-[8px]",children:[(0,W.jsx)("i",{className:"ri-alert-line text-[16px] text-yellow-500"}),(0,W.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:a("External Link Warning")})]}),(0,W.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:s,children:(0,W.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,W.jsxs)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:[(0,W.jsxs)("div",{className:"flex flex-col gap-[12px]",children:[(0,W.jsx)("span",{className:"text-textSecondary text-[14px] leading-[1.4rem] font-normal",children:a("You're about to visit an external website. Be cautiousmalicious sites may attempt to:")}),(0,W.jsxs)("ul",{className:"list-disc list-inside text-textSecondary text-[13px] leading-[1.4rem] space-y-[4px]",children:[(0,W.jsx)("li",{children:a("Trick you into signing malicious transactions")}),(0,W.jsx)("li",{children:a("Ask you to enter your seed phrase or private key")}),(0,W.jsx)("li",{children:a("Request wallet permissions to drain your funds")})]}),(0,W.jsx)("span",{className:"text-textSecondary text-[13px] leading-[1.4rem] font-medium",children:a("Never enter your seed phrase on any website.")})]}),(0,W.jsxs)("div",{className:"flex flex-col gap-[4px] p-[12px] bg-backgroundSecondary rounded-[4px] border border-secondaryStroke/50",children:[(0,W.jsx)("span",{className:"text-textSecondary text-[11px] uppercase tracking-wider",children:a("Destination")}),(0,W.jsx)("span",{className:"text-textPrimary text-[13px] break-all font-mono",children:t})]})]}),(0,W.jsxs)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full justify-end items-center gap-[8px] p-[16px]",children:[(0,W.jsx)("button",{type:"button",onClick:s,className:"flex h-[32px] px-[12px] justify-center items-center rounded-full border border-secondaryStroke hover:bg-secondaryStroke/20 transition-all duration-[125ms] cursor-pointer",children:(0,W.jsx)("span",{className:"text-[13px] font-medium text-textSecondary",children:a("Cancel")})}),(0,W.jsx)("button",{type:"button",onClick:()=>{x(),r()},className:"flex h-[32px] px-[12px] justify-center items-center rounded-full border border-secondaryStroke hover:bg-secondaryStroke/20 transition-all duration-[125ms] cursor-pointer",children:(0,W.jsx)("span",{className:"text-[13px] font-medium text-textSecondary",children:a("Don't Warn Again")})}),(0,W.jsx)("button",{type:"button",onClick:r,className:"bg-increase flex h-[32px] px-[12px] justify-center items-center rounded-full hover:bg-increaseHover transition-all duration-[125ms] cursor-pointer",children:(0,W.jsx)("span",{className:"text-[13px] font-bold text-background",children:a("Continue")})})]})]})})}),document.body):null}),tr=(0,n.memo)(function({icon:e,label:t}){return(0,W.jsx)(ep.Tooltip,{content:t,position:"top",children:(0,W.jsx)("div",{className:"bg-primaryBlue/10 flex flex-shrink-0 w-[18px] h-[18px] justify-center items-center rounded-[4px]",children:(0,W.jsx)("i",{className:`${e} text-[12px] text-primaryBlue`})})})}),ts=(0,n.memo)(function({message:e,isWindowModal:t=!1,isConsecutive:r=!1}){let s=(0,l.useAtomValue)(m.lobbyUserMapAtom),a=(0,l.useAtomValue)($.lobbyAlertsAtom),o=(0,l.useAtomValue)(M.messageAuthorsAtom),i=(0,l.useAtomValue)(b.userProfileIdAtom),c=(0,l.useAtomValue)(b.userProfileAtom),u=(0,ej.useRedirectToProfile)(),d=(0,n.useMemo)(()=>{if("call"!==e.t)return[];let t=a.find(t=>t.pairAddress===e.pairAddress&&(t.feedItemId===e.feedItemId||t.timestamp===e.ts));if(!t?.holderIds||0===t.holderIds.length)return[];let r=[];for(let e of t.holderIds){let t=o.get(e),a=s.get(e),l={username:t?.username||a?.userProfile.username||"Unknown",avatarUrl:t?.avatarUrl||a?.userProfile.avatarUrl||null,userId:e};r.push(l)}return r},[e,a,s,o]),{userId:x,messageText:p,timestamp:f,isPending:h,messageType:g}=(0,n.useMemo)(()=>"chat"===e.t?{userId:e.uid,messageText:e.m,timestamp:e.ts,isPending:e.pending||!1,messageType:"chat"}:"sharePnl"===e.t?{userId:e.uid,messageText:e.m,timestamp:e.ts,isPending:!1,messageType:"sharePnl"}:"call"===e.t?{userId:e.uid,messageText:"",timestamp:e.ts,isPending:!1,messageType:"call"}:"tx"===e.t?{userId:e.uid,messageText:"",timestamp:e.ts,isPending:!1,messageType:"activity"}:{userId:"",messageText:"",timestamp:0,isPending:!1,messageType:"unknown"},[e]),y=(0,n.useMemo)(()=>x===i,[x,i]),v=(0,n.useMemo)(()=>{if(y)return{username:c?.username||"You",avatarUrl:c?.avatarUrl||null};let e=s.get(x);if(e)return{username:e.userProfile.username,avatarUrl:e.userProfile.avatarUrl};let t=o.get(x);return t?{username:t.username,avatarUrl:t.avatarUrl}:{username:"Unknown",avatarUrl:null}},[y,c,s,x,o]),w=v.username,j=v.avatarUrl,k=(0,n.useCallback)(e=>{u(x)(e)},[u,x]),N=h?"opacity-65":"",S=(0,n.useMemo)(()=>t?"hover:bg-secondaryStroke/20":"hover:bg-primaryStroke/40",[t]),P="px-[16px] pt-[3px] pb-[2px]",A=t?"gap-[8px]":"gap-[12px]",C=r?t?"-mt-[8px]":"-mt-[12px]":"";return r&&"chat"===g?(0,W.jsxs)("div",{className:`flex flex-row ${A} ${P} ${S} ${C}`,children:[(0,W.jsx)("div",{style:{width:32},className:"flex-shrink-0"}),(0,W.jsx)("div",{className:"flex flex-col gap-[0px] flex-1 min-w-0",children:(0,W.jsx)("div",{className:`${t?"text-[13px]":"text-[14px]"} ${N} text-textSecondary break-words whitespace-pre-wrap`,children:(0,W.jsx)(te,{message:p})})})]}):"activity"===g&&"tx"===e.t?(0,W.jsxs)("div",{className:`flex flex-col gap-[4px] ${P} ${S} ${C}`,children:[(0,W.jsxs)("div",{className:"flex flex-row gap-[4px] flex-wrap justify-start items-center",children:[(0,W.jsx)("div",{className:"relative w-[20px] h-[20px] flex-shrink-0 cursor-pointer hover:brightness-110 transition-all duration-[125ms] self-center",onClick:k,children:(0,W.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-hidden",children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,W.jsx)(V.default,{src:j||(0,q.generateDefaultProfilePicture)(w),alt:w,width:20,height:20,className:"object-cover w-full h-full",draggable:!1})]})}),(0,W.jsx)("span",{className:`${t?"text-[13px]":"text-[14px]"} font-medium text-textPrimary cursor-pointer hover:underline`,onClick:k,children:w}),(0,W.jsx)("div",{className:"flex flex-row gap-[4px]",children:(0,W.jsx)(tr,{icon:"ri-pulse-line",label:"Activity"})}),(0,W.jsx)("span",{className:`${t?"text-[11px]":"text-[12px]"} text-textTertiary font-medium`,children:(0,W.jsx)(em.RelativeAge,{date:new Date(f)})})]}),(0,W.jsx)(e6,{message:e})]}):"call"===g&&"call"===e.t?(0,W.jsxs)("div",{className:`flex flex-col gap-[4px] ${P} ${S} ${C}`,children:[(0,W.jsx)("div",{className:"flex flex-row gap-[4px] justify-start items-center",children:(0,W.jsxs)("div",{className:"flex flex-row gap-[4px] flex-wrap items-center",children:[(0,W.jsx)("div",{className:"relative w-[20px] h-[20px] flex-shrink-0 cursor-pointer hover:brightness-110 transition-all duration-[125ms] self-center",onClick:k,children:(0,W.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-hidden",children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,W.jsx)(V.default,{src:j||(0,q.generateDefaultProfilePicture)(w),alt:w,width:20,height:20,className:"object-cover w-full h-full",draggable:!1})]})}),(0,W.jsx)("span",{className:`${t?"text-[13px]":"text-[14px]"} font-medium text-textPrimary cursor-pointer hover:underline`,onClick:k,children:w}),(0,W.jsx)("div",{className:"flex flex-row gap-[4px]",children:(0,W.jsx)(tr,{icon:"ri-megaphone-line",label:"Alert"})}),(0,W.jsx)("span",{className:`${t?"text-[11px]":"text-[12px]"} text-textTertiary font-medium`,children:(0,W.jsx)(em.RelativeAge,{date:new Date(f)})})]})}),(0,W.jsx)(e0,{message:e,isWindowModal:t}),d.length>0&&(0,W.jsxs)("div",{className:"flex flex-row h-[28px] min-h-[28px] max-h-[28px] gap-[4px] justify-start items-center w-full",children:[(0,W.jsx)(ep.Tooltip,{content:`Bought by ${d.slice(0,8).map(e=>e.username).join(", ")}${d.length>8?` +${d.length-8} more`:""}`,position:"top",children:(0,W.jsx)("div",{className:"bg-primaryStroke/65 p-[4px] items-center rounded-full",children:(0,W.jsx)("div",{className:"flex flex-row",children:d.slice(0,8).map((e,t)=>(0,W.jsx)("div",{className:`relative rounded-full ${t>0?"-ml-[6px]":""}`,style:{zIndex:10-t,...t<d.slice(0,8).length-1&&{maskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)",WebkitMaskImage:"radial-gradient(circle at calc(100% + 2px) 50%, transparent 11px, black 11px)"}},children:(0,W.jsxs)("div",{className:"relative w-[20px] h-[20px] rounded-full overflow-hidden",children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[1] pointer-events-none rounded-full"}),(0,W.jsx)(V.default,{src:e.avatarUrl||(0,q.generateDefaultProfilePicture)(e.username),alt:e.username||"",width:20,height:20,className:"w-[20px] h-[20px] rounded-full object-cover",draggable:!1})]})},e.userId))})})}),(0,W.jsx)("span",{className:"text-[11px] text-textTertiary font-normal",children:"Bought"})]})]}):(0,W.jsxs)("div",{className:`flex flex-row ${A} ${P} ${S} ${C}`,children:[(0,W.jsx)("div",{className:"relative flex-shrink-0 cursor-pointer hover:brightness-110 transition-all duration-[125ms] ease-in-out",style:{width:32,height:32},onClick:k,children:(0,W.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-hidden",children:[(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,W.jsx)(V.default,{src:j||(0,q.generateDefaultProfilePicture)(w),alt:w,width:32,height:32,className:"object-cover w-full h-full",draggable:!1})]})}),(0,W.jsxs)("div",{className:`flex flex-col gap-[0px] flex-1 min-w-0 ${t?"-mt-[2px]":"-mt-[4px]"}`,children:[(0,W.jsxs)("div",{className:"flex flex-row items-baseline gap-[4px] flex-wrap",children:[(0,W.jsx)("span",{className:`${t?"text-[13px]":"text-[14px]"} font-medium text-textPrimary cursor-pointer hover:underline`,onClick:k,children:w}),(0,W.jsx)("span",{className:`${t?"text-[11px]":"text-[12px]"} text-textTertiary font-medium`,children:(0,W.jsx)(em.RelativeAge,{date:new Date(f)})})]}),"sharePnl"===g&&"sharePnl"===e.t?(0,W.jsx)(eX,{message:e,isWindowModal:t}):"call"===g&&"call"===e.t?(0,W.jsx)(e0,{message:e,isWindowModal:t}):(0,W.jsx)("div",{className:`${t?"text-[13px]":"text-[14px]"} ${N} text-textSecondary break-words whitespace-pre-wrap`,children:(0,W.jsx)(te,{message:p})})]})]})});var ta=e.i(846211),tl=e.i(203320),tn=e.i(923850);let to=(0,n.memo)(function({isWindowModal:e=!1}){let{loadPrevious:t,isFetchingPrevious:r,hasMore:s}=(()=>{let[e,t]=(0,l.useAtom)(M.lastChatCursorAtom),r=(0,l.useSetAtom)(M.messageAuthorsAtom),s=(0,l.useSetAtom)(M.lobbyChatMessagesAtom),{socialApiGet:a}=(0,ta.useRateLimitedSocialApi)(ta.socialApiRateLimitAtom),[o,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),d=(0,n.useRef)(!1),p=(0,f.useAtomCallback)((0,n.useCallback)(e=>e(x.userIdAtom),[]));return(0,n.useEffect)(()=>{u(null!==e)},[e]),{loadPrevious:(0,n.useCallback)(async()=>{if(!c||o||!e||d.current)return null;d.current=!0,i(!0);try{let l=await a("/lobby/feed",{cursor:e,limit:100},p()??void 0);t(l.nextCursor??null),u(null!==l.nextCursor);let n=l.items?.length?(0,B.convertFeedToMessages)(l.items):[],o=l.messageAuthors??[];return o.length&&r(e=>{let t=new Map(e);for(let e of o)t.set(e.userId,e);return t}),s(e=>[...(0,tl.coalesceTransactionsAll)(n),...e]),n}catch(e){return console.error("Failed to fetch paginated chat:",e),null}finally{d.current=!1,i(!1)}},[p,c,o,e,t,r,s,a]),isFetchingPrevious:o,hasMore:c}})(),a=(0,l.useAtomValue)(M.lobbyChatMessagesAtom),o=(0,n.useRef)(null),i=(0,n.useRef)(""),c=(0,n.useRef)(null),u=(0,l.useAtomValue)(M.lobbySearchQueryAtom),d=(0,l.useAtomValue)(M.showLobbyActivityAtom),p=(0,l.useAtomValue)(M.showLobbyAlertsAtom),m=(0,l.useAtomValue)(M.showLobbyMessageAtom),h=(0,l.useAtomValue)(M.messageAuthorsAtom),b=(0,n.useMemo)(()=>{if(u)return u&&u.trim()?a.filter(e=>((e,t,r)=>{if(!e)return!0;let s=e.toLowerCase().trim();if(!s)return!0;let a=r.get(t.uid);if(a?.username.toLowerCase().includes(s))return!0;switch(t.t){case"chat":return t.m.toLowerCase().includes(s);case"call":return t.tokenTicker.toLowerCase().includes(s)||t.tokenName.toLowerCase().includes(s)||t.tokenAddress.toLowerCase().includes(s)||t.pairAddress.toLowerCase().includes(s);case"sharePnl":return t.tokenTicker.toLowerCase().includes(s)||t.tokenName.toLowerCase().includes(s)||t.tokenAddress.toLowerCase().includes(s)||t.pairAddress.toLowerCase().includes(s)||t.m.toLowerCase().includes(s);case"tx":{var l,n;let e=(n=l=t.transaction).length>28&&1===n[0]?{tokenTicker:l[20]??"",tokenName:l[19]??"",tokenAddress:l[6]??"",pairAddress:l[5]??""}:{tokenTicker:l[19]??"",tokenName:l[18]??"",tokenAddress:l[5]??"",pairAddress:l[4]??""};return e.tokenTicker.toLowerCase().includes(s)||e.tokenName.toLowerCase().includes(s)||e.tokenAddress.toLowerCase().includes(s)||e.pairAddress.toLowerCase().includes(s)}default:return!1}})(u,e,h)):a;return a},[u,a,h]),g=b.map((e,t)=>{let r=t>0?b[t-1]:null;if(!d&&"tx"===e.t||!p&&"call"===e.t||!m&&("chat"===e.t||"sharePnl"===e.t))return null;let s=!!(r&&r.uid===e.uid&&"chat"===e.t&&"chat"===r.t&&e.ts-r.ts<3e5);return{message:e,isConsecutive:s}}).filter(e=>null!==e),y=(0,n.useMemo)(()=>[...g].toReversed(),[g]),v=e?6:12,w=e?8:12,j=e?28:32,k=s?y.length+1:y.length,N=(0,eq.useVirtualizer)({count:k,getScrollElement:()=>o.current,getItemKey:e=>{let t=y[e]?.message;if(!t)return e;if("tx"===t.t){let e=t.transaction;return`${t.t}-${t.uid}-${t.ts}-${(0,tn.getTransactionSignature)(e)}`}return`${t.t}-${t.uid}-${t.ts}`},estimateSize:e=>{let t=y[e]?.message;if(!t)return 0;let r=y[e]?.isConsecutive;switch(t.t){case"chat":case"tx":if(r)return 25;return 50;case"sharePnl":return 516;case"call":return 120;default:return 75}},overscan:12}),S=N.getVirtualItems(),P=(0,n.useMemo)(()=>{if(0===S.length||!s||r)return!1;let e=S[S.length-1];return e.index>=y.length-1||e.end>=N.getTotalSize()-200},[S,y.length,s,r,N]),A=`${S.length}-${y.length}-${s}-${r}`;P&&i.current!==A&&(i.current=A,t());let[C,T]=(0,n.useState)(!1),I=(0,n.useRef)(null),$=(0,n.useCallback)(()=>{o.current&&o.current.scrollTo({top:0,behavior:"smooth"})},[]),L=(0,n.useCallback)(e=>{if(o.current){let e=c.current;e&&o.current.removeEventListener("wheel",e);let t=I.current;t&&o.current.removeEventListener("scroll",t)}if(o.current=e,e){let t=t=>{t.preventDefault(),e.scrollTop-=t.deltaY};e.addEventListener("wheel",t,{passive:!1}),c.current=t;let r=()=>{T(e.scrollTop>300)};e.addEventListener("scroll",r,{passive:!0}),I.current=r}else c.current=null,I.current=null},[]);return(0,W.jsxs)("div",{className:"relative h-full w-full",children:[(0,W.jsxs)("div",{ref:L,className:"flex flex-col h-full overflow-y-auto scrollbar-thin scrollbar-thumb-secondaryStroke/50 scrollbar-track-transparent scale-y-[-1]",style:{display:"block",overflowY:"auto",contain:"strict",width:"100%",height:"100%"},children:[r&&(0,W.jsx)("div",{className:"flex items-center justify-center h-full text-textTertiary text-[13px] px-[12px] scale-y-[-1]",children:"Loading..."}),0===a.length?(0,W.jsx)("div",{className:"flex items-center justify-center h-full text-textTertiary text-[13px] px-[12px] scale-y-[-1]",children:"No messages yet. Start the conversation!"}):(0,W.jsx)("div",{style:{height:`${N.getTotalSize()+w+j}px`,width:"100%",position:"relative",paddingTop:`${w}px`,paddingBottom:`${j}px`},children:S.map(t=>{let r=t.index>=y.length,a=y[t.index];return(0,W.jsx)("div",{"data-index":t.index,ref:N.measureElement,style:{position:"absolute",transform:`translateY(${t.start+w}px) scaleY(-1)`,top:0,left:0,width:"100%",paddingBottom:`${v}px`},children:r?(0,W.jsx)("div",{className:"flex items-center justify-center text-textTertiary text-[12px] py-[8px]",children:s?"Loading older messages":null}):(0,W.jsx)(ts,{message:a.message,isWindowModal:e,isConsecutive:a.isConsecutive})},t.key)})})]}),(0,W.jsx)(eA.AnimatePresence,{children:C&&(0,W.jsx)(G.motion.div,{className:"absolute bottom-[24px] left-0 right-0 mx-auto w-fit z-10 origin-bottom",initial:{opacity:0,scale:.85,y:8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.85,y:8},transition:{duration:.25,ease:[.32,.72,0,1]},children:(0,W.jsx)(ep.Tooltip,{content:"Jump to bottom",position:"top",children:(0,W.jsx)("button",{type:"button",onClick:$,children:(0,W.jsxs)("div",{className:"relative rounded-full overflow-hidden backdrop-blur-[16px] backdrop-saturate-[1.5] shadow-[0_4px_20px_rgba(0,0,0,0.15)] hover:brightness-110 transition-all duration-[125ms] cursor-pointer",children:[(0,W.jsx)("div",{className:"absolute -inset-[1px] border-white/[0.125] border-[1px] rounded-full z-[10] pointer-events-none"}),(0,W.jsx)("div",{className:"absolute blur-[4px] inset-[1px] border-white/[0.09] border-[1px] rounded-full z-[10] pointer-events-none"}),(0,W.jsx)("div",{className:"absolute inset-0 w-full h-full bg-background opacity-60 z-[5]"}),(0,W.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[8px] scale-110 rounded-full z-[6] pointer-events-none",style:{mixBlendMode:"overlay"}}),(0,W.jsx)("div",{className:"relative flex items-center justify-center w-[32px] h-[32px] z-[15]",children:(0,W.jsx)("i",{className:"ri-arrow-down-line text-[14px] text-textPrimary/80"})})]})})})})})]})}),ti=(0,n.memo)(function({isWindowModal:e=!1,onMobileFocus:t}){let{t:r}=(0,Y.useTranslation)(),[s,i]=(0,n.useState)(""),[c,u]=(0,n.useState)(!1),d=(0,n.useRef)(null),m=(0,l.useSetAtom)(M.lobbyChatMessagesAtom),f=(0,l.useAtomValue)(b.userProfileIdAtom),{safeSendMessageToFriendWebsocketJson:h,canSendMessage:g}=(()=>{let e,t=(0,l.useAtomValue)(x.userIdAtom),r=(0,l.useAtomValue)(x.usernameAtom),[s,i]=(0,l.useAtom)(M.lastMessageSentTimestampAtom),c=(0,n.useCallback)(()=>{if(0===s.length)return!0;let e=s[0];return e<Date.now()-M.BURST_MESSAGE_INTERVAL?(i([]),!0):e<Date.now()-M.NON_BURST_MESSAGE_INTERVAL?(i(e=>e.slice(3)),!0):s.length<M.BURST_MAX_MESSAGE_IN_WINDOW},[s,i]),u=p.FRIENDS_URL;a.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&t&&(e={"localhost-password":a.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":t});let{sendJsonMessage:d,readyState:m}=(0,o.default)(t&&r?u:null,{shouldReconnect:()=>!0,reconnectInterval:250,queryParams:e,share:!0,reconnectAttempts:50,retryOnError:!0,onOpen:()=>{},onClose:()=>{},onError:e=>{console.error("WebSocket connection error:",{url:u,error:e instanceof Error?e.message:e,readyState:o.ReadyState[m],timestamp:new Date().toISOString()})}}),f=(0,n.useCallback)(e=>{if(m===o.ReadyState.OPEN)if(c())i(e=>[Date.now(),...e]),d(e);else throw j.default.error("You are sending messages too fast"),Error("You are sending messages too fast");else throw Error("Not leader. Can not aquire leader tab status.")},[d,m,c,i]);return{canSendMessage:c,safeSendMessageToFriendWebsocketJson:f,readyState:m}})(),y=(0,n.useCallback)(async()=>{if(s.trim()&&!c&&f){if(!g())return void j.default.error(r("You are sending messages too fast"));u(!0);try{let e=Date.now(),t=Math.floor(0x1000000*Math.random());m(r=>[...r,{t:"chat",ts:e,uid:f,m:s.trim(),pending:!0,clientId:t}]),h({type:"chatMessage",message:s.trim(),clientId:t}),i(""),d.current?.focus()}catch(e){console.error("Failed to send message:",e),j.default.error(r("Failed to send message"))}finally{u(!1)}}},[s,c,f,g,r,m,h]),v=(0,n.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},[y]),w=`flex flex-1 flex-row items-center py-[3px] pr-[3px] pl-[12px] ${e?"bg-secondaryStroke/50 border-secondaryStroke hover:bg-secondaryStroke/70":"bg-primaryStroke/50 border-primaryStroke hover:bg-primaryStroke/70"} border hover:cursor-text hover:border-textPrimary/10 focus-within:bg-primaryStroke/70 focus-within:border-textPrimary/10 rounded-full transition-all duration-[125ms] ease-in-out gap-[8px]`;return(0,W.jsx)("div",{className:"flex flex-row items-center p-[12px] pt-[0px]",children:(0,W.jsx)("div",{className:`flex flex-1 ${e?"bg-backgroundTertiary":"bg-backgroundSecondary"} rounded-full`,children:(0,W.jsxs)("div",{className:w,children:[(0,W.jsx)("input",{ref:d,type:"text",value:s,onChange:e=>i(e.target.value),onKeyDown:v,onFocus:t,placeholder:"Send a message...",disabled:c,className:"flex-1 h-full bg-transparent text-[14px] text-textPrimary placeholder-textTertiary outline-none disabled:opacity-50",maxLength:500}),(0,W.jsx)("button",{type:"button",onClick:y,disabled:!s.trim()||c,className:`${e?"w-[24px] h-[24px]":"w-[28px] h-[28px]"} flex items-center justify-center rounded-full transition-colors duration-[125ms] ease-in-out flex-shrink-0 ${!s.trim()||c?`${e?"bg-secondaryStroke":"bg-primaryStroke"} pointer-events-none text-textPrimary/35`:"bg-primaryBlue hover:bg-primaryBlueHover text-background"}`,children:(0,W.jsx)("i",{className:`ri-arrow-up-line ${e?"text-[12px]":"text-[14px]"} ${c?"animate-pulse":""}`})})]})})})}),tc={messages:"ri-chat-4-line",alerts:"ri-megaphone-line",activity:"ri-pulse-line"},tu=["messages","alerts","activity"],td=e=>e.charAt(0).toUpperCase()+e.slice(1),tx=(0,n.memo)(function({isActive:e,icon:t,tooltip:r,onClick:s}){return(0,W.jsx)(ep.Tooltip,{content:r,position:"top",children:(0,W.jsx)("button",{type:"button",className:`group flex flex-1 items-center justify-center min-w-[28px] h-[28px] border-[1px] rounded-full cursor-pointer hover:transition-colors hover:duration-125 hover:ease-in-out ${e?"grayscale-0 border-primaryBlue/35 bg-primaryBlue/5 text-primaryBlue/90 hover:border-primaryBlue/45 hover:bg-primaryBlue/10 hover:text-primaryBlue":"grayscale-[0.35] opacity-65 border-primaryBlue/25 bg-transparent text-primaryBlue/65 hover:border-primaryBlue/35 hover:bg-primaryBlue/5 hover:text-primaryBlue/75"}`,onClick:s,children:(0,W.jsx)("i",{className:`${t} text-[14px]`})})})}),tp=(0,n.memo)(function({isWindowModal:e=!1}){let{t}=(0,Y.useTranslation)(),[r,s]=(0,l.useAtom)(M.lobbySearchQueryAtom),[a,o]=(0,l.useAtom)(M.showLobbyMessageAtom),[i,c]=(0,l.useAtom)(M.showLobbyActivityAtom),[u,d]=(0,l.useAtom)(M.showLobbyAlertsAtom),[x,p]=(0,l.useAtom)(y.lobbyMembersExpandedAtom),m=(0,n.useMemo)(()=>{let e=[];return a&&e.push("messages"),u&&e.push("alerts"),i&&e.push("activity"),e},[a,u,i]);(0,n.useMemo)(()=>{if(3===m.length)return t("Search messages, alerts or activity...");if(1===m.length)return t(`Search ${m[0]}...`);let[e,r]=m;return t(`Search ${e} or ${r}...`)},[m,t]);let f=(0,n.useCallback)(e=>{1===m.length&&m.includes(e)||("messages"===e?o(!a):"alerts"===e?d(!u):"activity"===e&&c(!i))},[a,u,i,m,o,d,c]);return(0,W.jsxs)("div",{className:"flex flex-row items-center gap-[12px] px-[12px] pt-[12px] pb-[4px]",children:[(0,W.jsx)("div",{className:"flex flex-1 flex-row items-center gap-[8px]",children:tu.map(e=>{let r="messages"===e&&a||"alerts"===e&&u||"activity"===e&&i;return(0,W.jsx)(tx,{isActive:r,icon:tc[e],tooltip:t(r?`Hide ${td(e)}`:`Show ${td(e)}`),onClick:()=>f(e)},e)})}),(0,W.jsx)(ep.Tooltip,{content:x?"Collapse lobby":"Expand lobby",children:(0,W.jsx)("button",{type:"button",onClick:()=>p(!x),className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full flex-shrink-0",children:(0,W.jsx)("i",{className:`ri-arrow-${x?"up":"down"}-s-line text-textPrimary text-[16px] transition-transform duration-150`})})})]})});var tm=e.i(832544);let tf=(0,n.memo)(function({isWindowModal:e=!1}){let t=(0,l.useAtomValue)(tm.isMobileAtom),r=(0,n.useRef)(null),s=(0,n.useCallback)(()=>{t&&setTimeout(()=>{r.current?.scrollIntoView({behavior:"smooth",block:"end"})},300)},[t]),a=e?"from-backgroundTertiary via-backgroundTertiary/80 to-transparent":"from-backgroundSecondary via-backgroundSecondary/80 to-transparent";return(0,W.jsxs)("div",{ref:r,className:"h-full w-full relative",children:[(0,W.jsxs)("div",{className:"absolute inset-0 flex flex-col bg-backgroundPrimary",children:[(0,W.jsx)(tp,{isWindowModal:e}),(0,W.jsxs)("div",{className:"flex-1 min-h-0 relative mb-[48px]",children:[(0,W.jsx)(to,{isWindowModal:e}),(0,W.jsx)("div",{className:`absolute inset-x-0 top-0 h-[12px] bg-gradient-to-b pointer-events-none z-10 ${a}`}),(0,W.jsx)("div",{className:`absolute inset-x-0 bottom-0 h-[24px] bg-gradient-to-t pointer-events-none z-10 ${a}`})]})]}),(0,W.jsx)("div",{className:"absolute bottom-0 left-0 right-0 z-20",children:(0,W.jsx)(ti,{isWindowModal:e,onMobileFocus:s})})]})}),th=(0,n.memo)(function({isWindowModal:e=!1}){let t=(0,l.useAtomValue)(m.myLobbyInfoAtom),r=t?.banner??null,s=e?"border-secondaryStroke":"border-primaryStroke";return(0,W.jsxs)("div",{className:"flex flex-col h-full",children:[(0,W.jsxs)("div",{className:"relative overflow-hidden backdrop-filter backdrop-blur-[16px] flex-shrink-0 group/banner",children:[r&&(0,W.jsx)("div",{className:"absolute inset-0 z-0",children:(0,W.jsx)(V.default,{src:r,alt:"Lobby banner",fill:!0,className:"object-cover",unoptimized:!0,draggable:!1})}),r&&(0,W.jsx)("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-[0px] z-[1]"}),(0,W.jsx)("div",{className:"relative z-[2] flex-shrink-0",children:(0,W.jsx)(eV,{})}),(0,W.jsx)("div",{className:"relative z-[2] pt-[0px] flex-shrink-0",children:(0,W.jsx)(ek,{isWindowModal:e})})]}),(0,W.jsx)("div",{className:`flex flex-1 min-h-0 w-full overflow-hidden border-t ${s}`,children:(0,W.jsx)(tf,{isWindowModal:e})})]})});e.s(["SocialLobby",0,th],639972)},188754,465836,e=>{"use strict";var t=e.i(247167),r=e.i(672464),s=e.i(750214),a=e.i(241458),l=e.i(271645),n=e.i(542119),o=e.i(555702);e.i(490156);var i=e.i(800473),c=e.i(310487),u=e.i(60166),d=e.i(203320);e.s(["useSocialTransactionsWebsocket",0,()=>{let e,x=(0,r.useAtomValue)(n.userIdAtom),p=(0,r.useAtomValue)(n.usernameAtom),m=(0,r.useSetAtom)(i.lobbyAlertsAtom),f=(0,s.useAtomCallback)((0,l.useCallback)(e=>e(i.lobbyWalletsAtomSol),[])),h=(0,s.useAtomCallback)((0,l.useCallback)(e=>e(i.lobbyWalletsAtomBnb),[])),b=(0,r.useSetAtom)(u.lobbyChatMessagesAtom),g=o.FRIENDS_URL;t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD&&x&&(e={"localhost-password":t.default.env.NEXT_PUBLIC_FRIENDS_PASSWORD,"user-id":x});let{readyState:y}=(0,a.default)(x&&p?g:null,{shouldReconnect:()=>!0,reconnectInterval:250,queryParams:e,share:!0,reconnectAttempts:50,retryOnError:!0,onOpen:()=>{},onClose:()=>{},onError:e=>{console.error("WebSocket connection error:",{url:g,error:e instanceof Error?e.message:e,readyState:a.ReadyState[y],timestamp:new Date().toISOString()})},onMessage:e=>{j(e.data)}}),v=(0,r.useAtomValue)(i.lobbyAlertsAtom),w=(0,l.useRef)(new Set);(0,l.useEffect)(()=>{w.current=new Set(v.map(e=>e.pairAddress))},[v]);let j=(0,l.useCallback)(e=>{try{let t=JSON.parse(e);if("lobbyMemberTransaction"!==t.type)return;let r=t.transaction;if(!r||!Array.isArray(r)||r.length<2)return void console.error("Invalid transaction data structure");let s=r[0],a=0===s?"sol":"bnb",l=r[1],n="sol"===a?(0,c.convertToWalletTrackerTransaction)(JSON.stringify(l)):(0,c.convertToWalletTrackerTransactionBnb)(JSON.stringify(l));"buy"===n.type&&m(e=>{if(!w.current.has(n.pairAddress))return e;let t=e.sort((e,t)=>t.timestamp-e.timestamp).findIndex(e=>e.tokenAddress===n.tokenAddress&&e.chain===a);if(-1===t)return e;let r=e[t],s=("sol"===a?f():h()).get(n.walletAddress);if(!s)return e;if(!r.holderIds?.includes(s)){let a=[...e];return a[t]={...r,holderIds:[...r.holderIds||[],s]},a}return e});let o="sol"===a?l[0]:l[1],i={t:"tx",ts:o,uid:t.userId,transaction:l,transactionCount:1};b(e=>(0,d.coalesceNewTransaction)(e,i))}catch(t){console.error("Error parsing transaction message:",{message:e,error:t instanceof Error?t.message:t})}},[m,f,h,b])}],188754);var x=e.i(392335);e.s(["useUpdateWallets",0,()=>{let e=(0,l.useRef)(new Map),t=(0,l.useRef)(new Map),s=(0,r.useSetAtom)(i.lobbyWalletsAtomSol),a=(0,r.useSetAtom)(i.lobbyWalletsAtomBnb),n=(0,r.useAtomValue)(x.myLobbyInfoAtom);(0,l.useEffect)(()=>{if(!n)return;let r=new Map,l=new Map;for(let e of n.members){let t=Object.keys(e.sharedWallets.sol?.sharedWalletBalances||{}),s=Object.keys(e.sharedWallets.bnb?.sharedWalletBalances||{});for(let s of t)r.set(s,e.userProfile.userId);for(let t of s)l.set(t,e.userProfile.userId)}e.current.size!==r.size&&(e.current=r,s(r)),t.current.size!==l.size&&(t.current=l,a(l))},[n,s,a])}],465836)},337587,481240,616604,759919,692298,229878,e=>{"use strict";var t=e.i(843476),r=e.i(271645),s=e.i(672464);e.i(490156);var a=e.i(542119),l=e.i(716689),n=e.i(415823),o=e.i(404289),i=e.i(227905),c=e.i(639972),u=e.i(391735),d=e.i(657421),x=e.i(188754),p=e.i(465836),m=e.i(48493),f=e.i(592846),h=e.i(711858),b=e.i(569692),g=e.i(392335),y=e.i(657688),v=e.i(648357),w=e.i(914717),j=e.i(717744);let k=(0,r.memo)(function({friend:e,isOnline:s,showOnline:a=!0,isWindowModal:l=!1,size:n=40}){let o=(0,r.useMemo)(()=>l?"bg-background":"bg-backgroundSecondary",[l]),i=(0,r.useMemo)(()=>l?"bg-backgroundTertiary":"bg-backgroundSecondary",[l]),c=(0,r.useMemo)(()=>s?"away"===e.presence?"bg-primaryOrange":"bg-primaryGreen":"border-[3px] border-textTertiary",[e.presence,s]);return(0,t.jsxs)("div",{className:`relative w-[${n}px] h-[${n}px] rounded-full overflow-visible shadow-[0_6px_10px_-1px_rgba(0,0,0,0.15),0_4px_6px_-1px_rgba(0,0,0,0.06)] flex-shrink-0 ${o}`,children:[(0,t.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-hidden flex-shrink-0",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,t.jsx)(y.default,{src:e.userProfile.avatarUrl||(0,w.generateDefaultProfilePicture)(e.userProfile.username),alt:e.userProfile.username||"",width:n,height:n,className:"object-cover flex-shrink-0",draggable:!1})]}),a&&(0,t.jsx)(h.Tooltip,{content:e.presence,position:"top",children:(0,t.jsx)("div",{className:`absolute bottom-[0px] right-[0px] w-[16px] h-[16px] rounded-full z-[20] flex-shrink-0 flex items-center justify-center ${i}`,children:(0,t.jsx)("div",{className:`w-[10px] h-[10px] rounded-full ${c}`})})})]})});var N=e.i(458768);let S=(0,r.memo)(function({friend:e,isWindowModal:a=!1,showBanners:n=!0,onUnfriendClick:o,onInviteToLobby:i,onRequestJoinLobby:c}){let u=(0,s.useSetAtom)(b.friendProfileDataAtom),d=(0,s.useAtomValue)(g.myLobbyInfoAtom),x=(0,s.useSetAtom)(l.socialProfileOpenAtom),p=(0,r.useMemo)(()=>!!d&&d.members.some(t=>t.userProfile.userId===e.userProfile.userId),[d,e.userProfile.userId]),m=(0,r.useMemo)(()=>!!d&&!!e.lobbyInfo&&e.lobbyInfo.lobbyId===d.lobbyId,[d,e.lobbyInfo]),f=(0,r.useCallback)(t=>{t.stopPropagation(),u(()=>({userProfile:e.userProfile,relationshipId:e.relationshipId,currentPage:e.currentPage,currentSubpage:e.currentSubpage,lastUpdatedTimestamp:e.lastUpdatedTimestamp,currentChain:e.currentChain,presence:e.presence})),x(!0)},[u,e]),S=(0,r.useMemo)(()=>a?"bg-background":"bg-backgroundSecondary",[a]),P=(0,r.useMemo)(()=>"offline"!==e.presence,[e.presence]),A=(0,r.useMemo)(()=>{let t=e.userProfile.color||"#FFFFFF",r=P?.35:.05;if(t.startsWith("#")){let e=t.slice(1),s=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),l=parseInt(e.substring(4,6),16);return`rgba(${s}, ${a}, ${l}, ${r})`}return t},[e.userProfile.color,P]),C=(0,r.useMemo)(()=>{if(!e.lobbyInfo?.name)return"";let t=e.lobbyInfo.name;return t.length>10?`${t.slice(0,10)}...`:t},[e.lobbyInfo?.name]);return(0,t.jsxs)("div",{className:"group/kolrow flex flex-col rounded-[12px] overflow-hidden border border-white/[0.065] bg-backgroundSecondary relative flex-shrink-0 cursor-pointer",onClick:f,children:[(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.035] border-[1px] rounded-[12px] z-[15] pointer-events-none"}),(0,t.jsx)("div",{className:"group-hover/kolrow:bg-white/[0.02] absolute inset-0 rounded-[12px] pointer-events-none z-[100] transition-all duration-350"}),(0,t.jsxs)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] opacity-[0.55] group-hover/kolrow:opacity-[0.75] z-[0] transition-opacity duration-350",children:[(0,t.jsxs)("div",{className:"absolute inset-0 w-full h-full blur-[80px] saturate-[1.3] brightness-[0.65] rounded-[12px] overflow-hidden",children:[e.userProfile.avatarUrl?(0,t.jsx)(y.default,{src:e.userProfile.avatarUrl,alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src=""},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(y.default,{src:(0,w.generateDefaultProfilePicture)(e.userProfile.username),alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"}),(0,t.jsx)("div",{className:"absolute left-0 right-0 bottom-0 h-[150px] bg-gradient-to-t from-backgroundSecondary to-transparent z-10"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px] scale-110 rounded-[12px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[400px] h-[400px] rounded-full blur-[60px] opacity-30",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[300px] h-[300px] rounded-full blur-[50px] opacity-25",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}})]}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] bg-gradient-to-br from-white/[0.02] to-transparent z-[5] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsxs)("div",{className:"flex flex-col relative z-[10]",children:[n&&(0,t.jsxs)("div",{className:`relative h-[52px] w-full ${S}`,children:[e.userProfile.bannerUrl?(0,t.jsx)(y.default,{src:e.userProfile.bannerUrl,alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1}):(0,t.jsx)(y.default,{src:(0,j.generateDefaultBanner)(e.userProfile.username),alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1}),(0,t.jsxs)("div",{className:"absolute top-[8px] right-[8px] z-[9999] opacity-0 group-hover/kolrow:opacity-100 flex flex-row gap-[4px] items-center",children:[i&&!p&&(0,t.jsx)(h.Tooltip,{content:"Invite to lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-primaryBlueHover/20 hover:bg-primaryBlueHover/30 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:t=>{(t.stopPropagation(),e.relationshipId)?i(e.relationshipId):N.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[14px] text-primaryBlue group-hover/btn:text-primaryBlueHover transition-colors duration-[125ms] ease-in-out"})})}),c&&!m&&(0,t.jsx)(h.Tooltip,{content:"Request to join lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-primaryBlueHover/20 hover:bg-primaryBlueHover/30 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:t=>{(t.stopPropagation(),e.relationshipId)?c(e.relationshipId):N.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-login-box-line text-[14px] text-primaryBlue group-hover/btn:text-primaryBlueHover transition-colors duration-[125ms] ease-in-out"})})}),(0,t.jsx)(h.Tooltip,{content:"Unfriend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-decreaseHover/15 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:t=>{(t.stopPropagation(),e.relationshipId)?o(e.relationshipId,e.userProfile.username):N.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-minus-line text-[14px] text-decrease group-hover/btn:text-decreaseHover transition-colors duration-[125ms] ease-in-out"})})})]})]}),(0,t.jsxs)("div",{className:`flex flex-row gap-[4px] justify-between items-center p-[12px] relative ${n?"":"pt-[12px]"}`,style:{background:`linear-gradient(to right, transparent 50%, ${A})`},children:[n&&(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[8px] overflow-hidden opacity-100",children:(0,t.jsx)("div",{className:"absolute inset-0 -top-[52px]",style:{maskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)"},children:e.userProfile.bannerUrl?(0,t.jsx)(y.default,{src:e.userProfile.bannerUrl,alt:"",fill:!0,className:"object-cover blur-md",draggable:!1}):(0,t.jsx)(y.default,{src:(0,j.generateDefaultBanner)(e.userProfile.username),alt:"",fill:!0,className:"object-cover blur-md",draggable:!1})})}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[10px] min-h-[52px]",children:[(0,t.jsx)(k,{friend:e,isOnline:P,isWindowModal:a}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 ",children:[(0,t.jsxs)("div",{className:"flex flex-row h-[28px] min-h-[28px] max-h-[28px] items-center gap-[6px] min-w-0",children:[(0,t.jsx)(h.Tooltip,{content:e.userProfile.username,position:"top",quickShow:!1,children:(0,t.jsx)("span",{className:"text-[16px] font-medium text-textPrimary opacity-90 truncate",children:e.userProfile.username.length>6?`${e.userProfile.username.slice(0,6)}...`:e.userProfile.username})}),!n&&(0,t.jsxs)("div",{className:"opacity-0 group-hover/kolrow:opacity-100 flex flex-row gap-[4px] items-center z-[9999] relative",children:[i&&!p&&(0,t.jsx)(h.Tooltip,{content:"Invite to lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn hover:bg-primaryBlueHover/15 transition-colors flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full",onClick:t=>{(t.stopPropagation(),e.relationshipId)?i(e.relationshipId):N.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[14px] text-primaryBlue group-hover/btn:text-primaryBlueHover transition-colors"})})}),c&&!m&&(0,t.jsx)(h.Tooltip,{content:"Request to join lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn hover:bg-primaryBlueHover/15 transition-colors flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full",onClick:t=>{(t.stopPropagation(),e.relationshipId)?c(e.relationshipId):N.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-login-box-line text-[14px] text-primaryBlue group-hover/btn:text-primaryBlueHover transition-colors"})})}),(0,t.jsx)(h.Tooltip,{content:"Unfriend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-background/80 hover:bg-decreaseHover/10 hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full flex-shrink-0",onClick:t=>{(t.stopPropagation(),e.relationshipId)?o(e.relationshipId,e.userProfile.username):N.default.error("Friend relationship not found")},children:(0,t.jsx)("i",{className:"ri-user-minus-line text-[14px] text-decrease group-hover/btn:text-decreaseHover transition-colors"})})})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[e.userProfile.socialLinks&&Object.values(e.userProfile.socialLinks).some(e=>null!==e)&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[e.userProfile.socialLinks?.twitterHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitterHandle.startsWith("http")?e.userProfile.socialLinks.twitterHandle:`https://x.com/${e.userProfile.socialLinks.twitterHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[24px] h-[24px] justify-center items-center rounded-full flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitter-x-line text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.youtubeHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.youtubeHandle.startsWith("http")?e.userProfile.socialLinks.youtubeHandle:`https://youtube.com/@${e.userProfile.socialLinks.youtubeHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[24px] h-[24px] justify-center items-center rounded-full flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-youtube-fill text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.twitchHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitchHandle.startsWith("http")?e.userProfile.socialLinks.twitchHandle:`https://twitch.tv/${e.userProfile.socialLinks.twitchHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[24px] h-[24px] justify-center items-center rounded-full flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitch-fill text-[14px] text-textPrimary/90"})})]}),e.lobbyInfo&&e.lobbyInfo.lobbyId!==e.userProfile.userId&&e.lobbyInfo.memberCount>1&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[12px] text-primaryBlueHover"}),(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary opacity-90 truncate",children:[e.lobbyInfo.memberCount,"  ",C]})]})]})]})]}),(0,t.jsx)("div",{className:"absolute right-[12px] flex flex-row gap-[4px] z-[10]",children:(0,t.jsx)(v.FriendActivityButton,{lastPage:e.currentPage??null,subpage:e.currentSubpage??null,currentChain:e.currentChain||null,isOnline:P,lastPresenceUpdateTimestamp:e.lastUpdatedTimestamp,size:"small"})})]})]})]})});var P=e.i(741124),A=e.i(751380),C=e.i(879197),T=e.i(287052),I=e.i(846932);let M=({onClose:e,onConfirm:s,lobbyName:a,isResetLobby:l})=>{let[n,o]=(0,r.useState)(!1),{t:i}=(0,f.useTranslation)();return(0,t.jsx)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[200]",onClick:t=>{n&&t.target===t.currentTarget&&e()},onMouseDown:e=>{e.target===e.currentTarget&&o(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{o(!1)})},children:(0,t.jsx)(I.motion.div,{className:"relative w-[452px] max-h-[880px]",onClick:e=>e.stopPropagation(),initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},children:(0,t.jsxs)("div",{className:"flex flex-col w-full h-full bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,t.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:i(l?"Reset Lobby":"Leave Lobby")}),(0,t.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[16px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsx)("div",{className:"flex flex-row w-full gap-[16px] justify-start items-center",children:(0,t.jsxs)("span",{className:"text-textSecondary text-[14px] leading-[1.2rem] font-normal",children:[i(l?"Are you sure you want to reset":"Are you sure you want to leave")," ",(0,t.jsx)("span",{className:"text-textPrimary font-medium",children:l?i("your lobby"):a||i("this lobby")}),i("?")]})})})})}),(0,t.jsx)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] justify-end items-center p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:s,className:"bg-decrease flex flex-row flex-1 h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-decreaseHover transition-all duration-[125ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:i(l?"Reset":"Leave")})})})]})})})};var $=e.i(174080);let B=()=>{let{t:e}=(0,f.useTranslation)(),[a,l]=(0,r.useState)(!1),n=(0,s.useAtomValue)(g.myLobbyInfoAtom),{leaveLobby:o}=(0,u.useLobbyApi)(),i=(0,r.useCallback)(async()=>{await o(),l(!1)},[o]),c=(0,s.useAtomValue)(b.userProfileIdAtom),d=(0,r.useMemo)(()=>n?.members?.length===1&&n?.members[0]?.userProfile.userId===c,[n?.members,c]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Tooltip,{content:e(d?"Reset Lobby":"Leave Lobby"),position:"top",children:(0,t.jsx)("button",{type:"button",className:"group flex items-center justify-center w-[24px] h-[24px] rounded-[4px] hover:bg-decreaseHover/10 flex-shrink-0",onClick:e=>{e.stopPropagation(),l(!0)},children:(0,t.jsx)("i",{className:`ri-${d?"refresh-line":"logout-box-line"} text-[16px] text-decreaseHover group-hover:text-decreaseHover`})})}),a&&(0,$.createPortal)((0,t.jsx)(M,{onClose:()=>l(!1),onConfirm:i,lobbyName:n?.name,isResetLobby:d}),document.body)]})};e.s(["LeaveResetLobby",0,B],481240);let L=(0,r.memo)(function({isWindowModal:e=!1,showBanners:a=!0}){let l=(0,s.useAtomValue)(g.myLobbyInfoAtom),n=(0,s.useAtomValue)(b.userProfileIdAtom),o=(0,r.useMemo)(()=>l?.leaderUserId===n,[l?.leaderUserId,n]),i=(0,r.useMemo)(()=>l?.members&&Array.isArray(l.members)?[...l.members].sort((e,t)=>{let r=e.userProfile.userId===l?.leaderUserId,s=t.userProfile.userId===l?.leaderUserId;return r&&!s?-1:!r&&s?1:0}):[],[l?.members,l?.leaderUserId]),c=(0,r.useMemo)(()=>{let e=l?.name??"Lobby";return e.length>28?`${e.slice(0,28)}...`:e},[l?.name]);return i.length?(0,t.jsxs)("div",{className:"flex flex-col gap-[8px] pb-[6px]",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full h-[28px] items-center justify-between gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[16px] text-primaryBlueHover"}),(0,t.jsxs)("span",{className:"text-[14px] text-textSecondary",children:[c," ",i.length,"/10"]})]}),(0,t.jsx)(B,{})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[12px] overflow-y-auto custom-scrollbar",children:i.map(r=>(0,t.jsx)(F,{member:r,isLeader:o,leaderUserId:l?.leaderUserId??"",isWindowModal:e,showBanners:a},r.userProfile.userId))})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-[8px] h-full",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full items-center gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-team-line text-[14px] text-primaryBlueHover"}),(0,t.jsxs)("span",{className:"text-[14px] text-textSecondary",children:[c," 0/10"]})]}),(0,t.jsx)("div",{className:"text-[14px] text-textSecondary text-center py-[16px]",children:"No members in lobby"})]})}),U=(0,r.memo)(function({chainTotal:e,displayWallets:s}){let{t:a}=(0,f.useTranslation)(),l=P.chainToInfoMap[e.chain],n=e.pnl>=0,o=(0,r.useCallback)(e=>{navigator.clipboard.writeText(e).then(()=>{N.default.success({message:a("Address copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})},{duration:1500})}).catch(()=>{N.default.error(a("Failed to copy to clipboard"))})},[a]),i=(0,r.useCallback)(e=>e.length<=10?e:`${e.slice(0,4)}...${e.slice(-3)}`,[]),c=s.filter(t=>t.chain===e.chain),u=c.length>0?(0,t.jsx)("div",{className:"-mx-[8px] -my-[4px]",onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),role:"presentation",children:(0,t.jsx)("div",{className:"max-h-[240px] overflow-y-auto custom-scrollbar",children:(0,t.jsx)("div",{className:"flex flex-col gap-[4px] pt-[4px] px-[4px] pb-[6px]",children:c.map(e=>{let r=P.chainToInfoMap[e.chain];return(0,t.jsxs)("div",{className:"group/wallet flex flex-row items-center justify-between gap-[8px] p-[8px] rounded-[8px] hover:bg-white/[0.02] transition-colors duration-200",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px] min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"border border-textPrimary/[0.05] flex flex-row h-[26px] pl-[6px] pr-[8px] gap-[4px] justify-start items-center rounded-full bg-backgroundPrimary/40 flex-shrink-0",children:[(0,t.jsx)(y.default,{src:r.icon,alt:r.full,width:16,height:16,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"text-textSecondary text-[12px] leading-[16px] font-medium opacity-90",dangerouslySetInnerHTML:{__html:(0,C.getFormattedNumber)(e.balance,4)}})]}),(0,t.jsx)("span",{className:"text-[12px] leading-[16px] font-normal text-textTertiary opacity-70 truncate",children:i(e.walletAddress)})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:[(0,t.jsx)(h.Tooltip,{content:"Copy address",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),o(e.walletAddress)},className:"group/copy bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full flex-shrink-0",children:(0,t.jsx)("i",{className:"ri-file-copy-line text-[13px] text-textPrimary/70 group-hover/copy:text-textPrimary/90"})})}),(0,t.jsx)(h.Tooltip,{content:`Open in ${P.chainToInfoMap[e.chain].explorer.name}`,position:"top",children:(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),t.preventDefault(),window.open(P.chainToInfoMap[e.chain].explorer.link({address:e.walletAddress}),"_blank")},className:"group/share bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full flex-shrink-0",children:(0,t.jsx)("i",{className:"ri-share-box-line text-[13px] text-textPrimary/70 group-hover/share:text-textPrimary/90"})})})]})]},`${e.chain}-${e.walletAddress}`)})})})}):(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary",children:[l.full," wallets"]});return(0,t.jsx)(h.Tooltip,{content:u,position:"bottom",persistent:!0,vibrancy:!0,quickShow:!1,width:"auto",maxWidth:"248px",rounded:"12px",children:(0,t.jsxs)("div",{className:"relative flex flex-row justify-start items-center h-[28px] px-[8px] gap-[8px] rounded-full border-[2px] border-textPrimary/[0.05] bg-backgroundPrimary/40 cursor-pointer hover:bg-backgroundPrimary/60 transition-colors duration-200",onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),role:"presentation",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)("i",{className:"ri-wallet-line text-[14px] text-textTertiary opacity-90"}),(0,t.jsx)("span",{className:"text-[12px] font-medium text-textSecondary opacity-90",children:e.count})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px]",children:[(0,t.jsx)(y.default,{src:l.icon,alt:l.full,width:14,height:14,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"text-[12px] font-medium text-textSecondary opacity-90",dangerouslySetInnerHTML:{__html:(0,C.getFormattedNumber)(e.balance,4)}})]}),(0,t.jsx)("div",{className:"flex flex-row items-center gap-[4px]",children:(0,t.jsx)("span",{className:`text-[12px] font-medium opacity-90 ${n?"text-increase":"text-decrease"}`,dangerouslySetInnerHTML:{__html:`${n?"+":""}${(0,C.getFormattedNumber)(e.pnl,4)}`}})})]})]})})}),F=(0,r.memo)(function({member:e,isLeader:a,leaderUserId:l,isWindowModal:n=!1,showBanners:i=!0}){let{transferOwnership:c,kickFromLobby:d}=(0,u.useLobbyApi)(),x=(0,s.useAtomValue)(b.userProfileIdAtom),{avatarBackground:p,avatarFallback:m}=(0,r.useMemo)(()=>{let t=(0,w.generateDefaultProfilePicture)(e.userProfile.username??e.userProfile.userId??"?");return{avatarBackground:e.userProfile.avatarUrl??t,avatarFallback:t}},[e.userProfile.avatarUrl,e.userProfile.username,e.userProfile.userId]),{chainTotals:f,displayWallets:g}=(0,r.useMemo)(()=>{let t=[],r=[];try{if(!e?.sharedWallets)return{chainTotals:t,displayWallets:r};if(e.sharedWallets.sol)try{let s=e.sharedWallets.sol,a=s?.sharedWalletBalances||{},l=s?.stats||{totalBalance:0,totalPnl:0},n=Object.keys(a);if(n.length>0){t.push({chain:"sol",balance:l.totalBalance??0,pnl:l.totalPnl??0,count:n.length});let e=l.totalBalance??0,s=l.totalPnl??0;for(let[t,l]of Object.entries(a)){let a=e>0?(l??0)/e*s:0;r.push({walletAddress:t,chain:"sol",balance:l??0,pnl:a})}}}catch(e){console.error("Error processing SOL wallets for member:",e)}if(e.sharedWallets.bnb)try{let s=e.sharedWallets.bnb,a=s?.sharedWalletBalances||{},l=s?.stats||{totalBalance:0,totalPnl:0},n=Object.keys(a);if(n.length>0){t.push({chain:"bnb",balance:l.totalBalance??0,pnl:l.totalPnl??0,count:n.length});let e=l.totalBalance??0,s=l.totalPnl??0;for(let[t,l]of Object.entries(a)){let a=e>0?(l??0)/e*s:0;r.push({walletAddress:t,chain:"bnb",balance:l??0,pnl:a})}}}catch(e){console.error("Error processing BNB wallets for member:",e)}}catch(e){console.error("Error processing member wallets:",e)}return{chainTotals:t,displayWallets:r}},[e?.sharedWallets]),N=(0,s.useAtomValue)(b.friendListAtom),{addFriend:S}=(0,o.useSocialTracker)(),P=(0,r.useMemo)(()=>N.has(e.userProfile.username),[N,e.userProfile.username]),C=(0,r.useCallback)(()=>{e.userProfile.username&&!P&&S(e.userProfile.username)},[S,e.userProfile.username,P]),I=(0,T.useRedirectToProfile)()(e.userProfile.userId),M=(0,r.useMemo)(()=>n?"bg-background":"bg-backgroundSecondary",[n]),$=(0,r.useMemo)(()=>"offline"!==e.presence,[e.presence]),B=(0,r.useMemo)(()=>{let t=e.userProfile.color||"#FFFFFF",r=$?.35:.05;if(t.startsWith("#")){let e=t.slice(1),s=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),l=parseInt(e.substring(4,6),16);return`rgba(${s}, ${a}, ${l}, ${r})`}return t},[e.userProfile.color,$]),L=(0,r.useMemo)(()=>{let t=N.get(e.userProfile.username);return{userProfile:e.userProfile,relationshipId:t?.relationshipId??null,currentPage:e.currentPage,currentSubpage:e.currentSubpage,lastUpdatedTimestamp:e.lastUpdatedTimestamp,currentChain:e.currentChain,presence:e.presence}},[e,N]),F=(0,r.useMemo)(()=>e.userProfile.userId===x,[e.userProfile.userId,x]),{canFollowUser:E,handleFollowLobby:R,isFollowingUser:_}=(0,A.useFollowUser)(e);return(0,t.jsxs)("div",{className:"group/kolrow flex flex-col rounded-[12px] overflow-hidden border border-white/[0.065] bg-backgroundSecondary relative flex-shrink-0 cursor-pointer",onClick:I,children:[_&&(0,t.jsx)("div",{className:"absolute -inset-[1px] rounded-[12px] border-[2px] border-primaryBlueHover z-[99] pointer-events-none animate-pulse"}),(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.035] border-[1px] rounded-[12px] z-[15] pointer-events-none"}),(0,t.jsx)("div",{className:"group-hover/kolrow:bg-white/[0.02] absolute inset-0 rounded-[12px] pointer-events-none z-[100] transition-all duration-350"}),(0,t.jsxs)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] opacity-[0.55] group-hover/kolrow:opacity-[0.75] z-[0] transition-opacity duration-350",children:[(0,t.jsxs)("div",{className:"absolute inset-0 w-full h-full blur-[80px] saturate-[1.3] brightness-[0.65] rounded-[12px] overflow-hidden",children:[e.userProfile.avatarUrl?(0,t.jsx)(y.default,{src:p,alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src=""},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(y.default,{src:m,alt:"Profile Picture Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"}),(0,t.jsx)("div",{className:"absolute left-0 right-0 bottom-0 h-[150px] bg-gradient-to-t from-backgroundSecondary to-transparent z-10"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px] scale-110 rounded-[12px]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[400px] h-[400px] rounded-full blur-[60px] opacity-30",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[300px] h-[300px] rounded-full blur-[50px] opacity-25",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}})]}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] bg-gradient-to-br from-white/[0.02] to-transparent z-[5] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsxs)("div",{className:"flex flex-col relative z-[10]",children:[i&&(0,t.jsx)("div",{className:`relative h-[52px] w-full ${M}`,children:e.userProfile.bannerUrl?(0,t.jsx)(y.default,{src:e.userProfile.bannerUrl,alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1}):(0,t.jsx)(y.default,{src:(0,j.generateDefaultBanner)(e.userProfile.username),alt:`${e.userProfile.username}'s banner`,fill:!0,className:"object-cover",draggable:!1})}),(0,t.jsxs)("div",{className:`flex flex-row gap-[4px] justify-between items-center p-[12px] relative ${i?"":"pt-[12px]"}`,style:{background:`linear-gradient(to right, transparent 50%, ${B})`},children:[i&&(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[8px] overflow-hidden opacity-100",children:(0,t.jsx)("div",{className:"absolute inset-0 -top-[52px]",style:{maskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)"},children:e.userProfile.bannerUrl?(0,t.jsx)(y.default,{src:e.userProfile.bannerUrl,alt:"",fill:!0,className:"object-cover blur-md",draggable:!1}):(0,t.jsx)(y.default,{src:(0,j.generateDefaultBanner)(e.userProfile.username),alt:"",fill:!0,className:"object-cover blur-md",draggable:!1})})}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[10px] min-h-[52px] max-h-[52px]",children:[(0,t.jsx)(k,{friend:L,isOnline:$,isWindowModal:n}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex flex-row h-[28px] min-h-[28px] max-h-[28px] items-center gap-[6px] min-w-0",children:[e.userProfile.userId===l?(0,t.jsx)(h.Tooltip,{content:`${e.userProfile.username} (Lobby Leader)`,position:"top",quickShow:!1,children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px]",children:[(0,t.jsx)("i",{className:"ri-vip-crown-line text-[14px] text-yellow-500 flex-shrink-0"}),(0,t.jsx)("span",{className:`text-[16px] font-medium truncate cursor-default ${F?"text-primaryBlueHover":"text-textPrimary opacity-90"}`,children:e.userProfile.username.length>6?`${e.userProfile.username.slice(0,6)}...`:e.userProfile.username})]})}):(0,t.jsx)(h.Tooltip,{content:e.userProfile.username,position:"top",quickShow:!1,children:(0,t.jsx)("span",{className:`text-[16px] font-medium truncate ${F?"text-primaryBlueHover":"text-textPrimary opacity-90"}`,children:e.userProfile.username.length>6?`${e.userProfile.username.slice(0,6)}...`:e.userProfile.username})}),e.userProfile.socialLinks&&Object.values(e.userProfile.socialLinks).some(e=>null!==e)&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[4px] flex-shrink-0",children:[e.userProfile.socialLinks?.twitterHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitterHandle.startsWith("http")?e.userProfile.socialLinks.twitterHandle:`https://x.com/${e.userProfile.socialLinks.twitterHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[24px] h-[24px] justify-center items-center rounded-full flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitter-x-line text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.youtubeHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.youtubeHandle.startsWith("http")?e.userProfile.socialLinks.youtubeHandle:`https://youtube.com/@${e.userProfile.socialLinks.youtubeHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[24px] h-[24px] justify-center items-center rounded-full flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-youtube-fill text-[14px] text-textPrimary/90"})}),e.userProfile.socialLinks?.twitchHandle&&(0,t.jsx)("a",{href:e.userProfile.socialLinks.twitchHandle.startsWith("http")?e.userProfile.socialLinks.twitchHandle:`https://twitch.tv/${e.userProfile.socialLinks.twitchHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[24px] h-[24px] justify-center items-center rounded-full flex-shrink-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitch-fill text-[14px] text-textPrimary/90"})})]})]}),!F&&(0,t.jsxs)("div",{className:"flex flex-row gap-[6px] items-center",children:[(0,t.jsx)(h.Tooltip,{content:_?"Stop following":E?"Follow user":"Cannot follow user",position:"top",children:(0,t.jsx)("button",{type:"button",disabled:!E&&!_,className:`group/btn flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer ${_?"bg-primaryBlueHover/20 hover:bg-primaryBlueHover/30":"bg-gray-500/15 hover:bg-gray-500/20"} ${!E&&!_?"opacity-50 cursor-not-allowed":""}`,onClick:e=>{e.stopPropagation(),R()},children:(0,t.jsx)("i",{className:`ri-crosshair-2-line text-[14px] transition-colors duration-[125ms] ease-in-out ${_?"text-primaryBlueHover":"text-white/80"}`})})}),a&&e.userProfile.userId!==x&&(0,t.jsx)(h.Tooltip,{content:"Transfer ownership",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:t=>{t.stopPropagation(),e.userProfile.userId&&c(e.userProfile.userId)},children:(0,t.jsx)("i",{className:"ri-vip-crown-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),!P&&(0,t.jsx)(h.Tooltip,{content:"Add friend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:e=>{e.stopPropagation(),C()},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[14px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),a&&e.userProfile.userId!==x&&(0,t.jsx)(h.Tooltip,{content:"Kick from lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:t=>{t.stopPropagation(),e.userProfile.userId&&d(e.userProfile.userId)},children:(0,t.jsx)("i",{className:"ri-user-unfollow-line text-[14px] text-decrease/80 transition-colors duration-[125ms] ease-in-out"})})})]})]})]}),e.userProfile.userId!==x&&(0,t.jsx)("div",{className:"absolute right-[12px] flex flex-row gap-[4px] z-[10]",children:(0,t.jsx)(v.FriendActivityButton,{lastPage:e.currentPage??null,subpage:e.currentSubpage??null,currentChain:e.currentChain||null,isOnline:$,lastPresenceUpdateTimestamp:e.lastUpdatedTimestamp,size:"small"})})]})]}),f.length>0&&(0,t.jsx)("div",{className:"py-[8px] px-[12px]",children:(0,t.jsx)("div",{className:"flex flex-row items-center justify-between gap-[12px] min-w-0",children:(0,t.jsx)("div",{className:"flex flex-row flex-wrap items-center gap-[6px] flex-1 min-w-0",children:f.map(e=>(0,t.jsx)(U,{chainTotal:e,displayWallets:g},e.chain))})})})]})});e.i(645359);var E=e.i(121367),R=e.i(321207),_=e.i(695636),z=e.i(750214),D=e.i(560985),H=e.i(846211),O=e.i(490257);function W(e){let[t,s]=(0,r.useState)([]),[l,n]=(0,r.useState)(null),[o,i]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!0),[p,m]=(0,r.useState)(""),{socialApiGet:f}=(0,H.useRateLimitedSocialApi)(H.socialApiRateLimitAtom),h=(0,r.useRef)(""),b=(0,r.useRef)(!1),g=(0,z.useAtomCallback)((0,r.useCallback)(e=>e(a.userIdAtom),[])),y="incoming"===e?"/incoming-friend-requests":"/outgoing-friend-requests",v=(0,r.useCallback)(async t=>{let r=t??p;if(h.current=r,!b.current){b.current=!0,i(!0);try{let e={};r.trim()&&(e.search=r.trim());let t=await f(y,e,g()??void 0);h.current===r&&(s(t.requests),n(t.nextCursor),x(null!==t.nextCursor))}catch(t){console.error(`Error fetching ${e} friend requests:`,t),h.current===r&&(s([]),x(!1))}finally{b.current=!1,i(!1)}}},[y,p,e,g,f]),w=(0,r.useCallback)(async()=>{if(d&&!o&&!c&&l){u(!0);try{let e={cursor:l};p.trim()&&(e.search=p.trim());let t=await f(y,e,g()??void 0);s(e=>{let r=new Set(e.map(e=>e.profile.userId)),s=t.requests.filter(e=>!r.has(e.profile.userId));return[...e,...s]}),n(t.nextCursor),x(null!==t.nextCursor)}catch(t){console.error(`Error fetching more ${e} friend requests:`,t)}finally{u(!1)}}},[l,y,d,o,c,p,e,g,f]),j=(0,r.useCallback)(e=>{m(e),n(null),x(!0)},[]),k=(0,r.useCallback)(()=>{s([]),n(null),x(!0),m(""),h.current=""},[]),N=(0,r.useCallback)(e=>{s(t=>t.filter(t=>t.relationshipId!==e))},[]),S=(0,r.useCallback)(e=>{s(t=>t.filter(t=>t.profile.userId!==e))},[]),P=(0,r.useCallback)(t=>{s(r=>{r.find(e=>e.profile.userId===t.profile.userId)&&O.relationshipEvents.emitCountChange(e,-1);let s=r.filter(e=>e.profile.userId!==t.profile.userId);if(h.current){let e=h.current.toLowerCase(),a=t.profile.username.toLowerCase(),l=t.requestUsername?.toLowerCase();if(!a.startsWith(e)&&!l?.startsWith(e))return s.length!==r.length?s:r}return[t,...s]})},[e]);return(0,r.useEffect)(()=>{let t="incoming"===e?O.relationshipEvents.onIncomingRequest(P):O.relationshipEvents.onOutgoingRequest(P);return()=>{t()}},[e,P]),(0,r.useEffect)(()=>{let t="incoming"===e?O.relationshipEvents.onRemoveIncomingRequest(S):O.relationshipEvents.onRemoveOutgoingRequest(S);return()=>{t()}},[e,S]),{items:t,isLoading:o,isFetchingMore:c,hasMore:d,search:p,setSearch:j,fetchInitial:v,fetchMore:w,reset:k,removeItem:N}}var V=e.i(563150);let q=(0,r.memo)(function(){let{t:e}=(0,f.useTranslation)(),[l,n]=(0,r.useState)(!1),[i,c]=(0,r.useState)(""),u=(0,s.useSetAtom)(b.addFriendModalOpenAtom),d=(0,s.useAtomValue)(b.userProfileAtom),x=(0,s.useAtomValue)(b.addFriendModalInitialTabAtom),p=(0,s.useSetAtom)(b.addFriendModalInitialTabAtom),[h,g]=(0,r.useState)(x||"sent"),y=W("incoming"),v=W("outgoing"),[w,j]=(0,r.useState)([]),k=(0,r.useMemo)(()=>{let e=new Set,t=[];for(let r of w)e.has(r.profile.userId)||(e.add(r.profile.userId),t.push(r));for(let r of v.items)e.has(r.profile.userId)||(e.add(r.profile.userId),t.push(r));return t},[w,v.items]),S=function(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!0),[x,p]=(0,r.useState)(""),{socialApiGet:m}=(0,H.useRateLimitedSocialApi)(H.socialApiRateLimitAtom),f=(0,r.useRef)(""),h=(0,r.useRef)(!1),b=(0,z.useAtomCallback)((0,r.useCallback)(e=>e(a.userIdAtom),[])),g=(0,r.useCallback)(async e=>{let r=e??x;if(f.current=r,!h.current){h.current=!0,o(!0);try{let e={};r.trim()&&(e.search=r.trim());let s=await m("/blocked-users",e,b()??void 0);f.current===r&&(t(s.users),l(s.nextCursor),d(null!==s.nextCursor))}catch(e){console.error("Error fetching blocked users:",e),f.current===r&&(t([]),d(!1))}finally{h.current=!1,o(!1)}}},[x,b,m]),y=(0,r.useCallback)(async()=>{if(u&&!n&&!i&&s){c(!0);try{let e={cursor:s};x.trim()&&(e.search=x.trim());let r=await m("/blocked-users",e,b()??void 0);t(e=>{let t=new Set(e.map(e=>e.userProfile.userId)),s=r.users.filter(e=>!t.has(e.userProfile.userId));return[...e,...s]}),l(r.nextCursor),d(null!==r.nextCursor)}catch(e){console.error("Error fetching more blocked users:",e)}finally{c(!1)}}},[s,u,n,i,x,b,m]),v=(0,r.useCallback)(e=>{p(e),l(null),d(!0)},[]),w=(0,r.useCallback)(()=>{t([]),l(null),d(!0),p(""),f.current=""},[]),j=(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.relationshipId!==e))},[]),k=(0,r.useCallback)(e=>{t(t=>{let r=t.filter(t=>t.userProfile.userId!==e.userProfile.userId);if(f.current){let s=f.current.toLowerCase();if(!e.userProfile.username.toLowerCase().startsWith(s))return r.length!==t.length?r:t}return[e,...r]})},[]);return(0,r.useEffect)(()=>{let e=O.relationshipEvents.onBlockedUser(k);return()=>{e()}},[k]),{items:e,isLoading:n,isFetchingMore:i,hasMore:u,search:x,setSearch:v,fetchInitial:g,fetchMore:y,reset:w,removeItem:j}}(),{counts:P,fetchCounts:A,decrementCount:C,incrementCount:T}=function(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),{socialApiGet:n}=(0,H.useRateLimitedSocialApi)(H.socialApiRateLimitAtom),o=(0,z.useAtomCallback)((0,r.useCallback)(e=>e(a.userIdAtom),[])),i=(0,r.useCallback)(async()=>{l(!0);try{let e=await n("/relationship-counts",void 0,o()??void 0);t(e)}catch(e){console.error("Error fetching relationship counts:",e)}finally{l(!1)}},[o,n]),c=(0,r.useCallback)(e=>{t(t=>{if(!t)return t;let r=`${e}Count`;return{...t,[r]:Math.max(0,t[r]-1)}})},[]),u=(0,r.useCallback)(e=>{t(t=>{if(!t)return t;let r=`${e}Count`;return{...t,[r]:t[r]+1}})},[]);return(0,r.useEffect)(()=>{let e=O.relationshipEvents.onCountsUpdate(i);return()=>{e()}},[i]),(0,r.useEffect)(()=>{let e=O.relationshipEvents.onCountChange((e,r)=>{t(t=>{if(!t)return t;let s=`${e}Count`;return{...t,[s]:Math.max(0,t[s]+r)}})});return()=>{e()}},[]),{counts:e,isLoading:s,fetchCounts:i,decrementCount:c,incrementCount:u}}(),[M,B]=(0,r.useState)(""),[L,U]=(0,r.useState)(""),[F,q]=(0,r.useState)(""),X=(0,r.useRef)(null),J=(0,r.useRef)(null),Q=(0,r.useRef)(null),Z=(0,r.useRef)(null),ee=(0,r.useRef)(null),et=(0,r.useRef)(null),er=(0,r.useRef)(!1),es=(0,m.useVirtualizer)({count:y.items.length,getScrollElement:()=>Z.current,estimateSize:()=>76,overscan:3}),ea=(0,m.useVirtualizer)({count:k.length,getScrollElement:()=>ee.current,estimateSize:()=>76,overscan:3}),el=(0,m.useVirtualizer)({count:S.items.length,getScrollElement:()=>et.current,estimateSize:()=>76,overscan:3});(0,r.useEffect)(()=>{er.current||(er.current=!0,A())},[]);let en=(0,r.useCallback)(e=>{g(e),"incoming"!==e||0!==y.items.length||y.isLoading?"sent"!==e||0!==v.items.length||v.isLoading?"blocked"!==e||0!==S.items.length||S.isLoading||S.fetchInitial(F):v.fetchInitial(L):y.fetchInitial(M)},[y,v,S,M,L,F]);(0,r.useEffect)(()=>(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{y.setSearch(M),y.fetchInitial(M),Z.current&&(Z.current.scrollTop=0)},300),()=>{X.current&&clearTimeout(X.current)}),[M]),(0,r.useEffect)(()=>(J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{v.setSearch(L),v.fetchInitial(L),ee.current&&(ee.current.scrollTop=0)},300),()=>{J.current&&clearTimeout(J.current)}),[L]),(0,r.useEffect)(()=>(Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{S.setSearch(F),S.fetchInitial(F),et.current&&(et.current.scrollTop=0)},300),()=>{Q.current&&clearTimeout(Q.current)}),[F]);let eo=(0,r.useCallback)(()=>{let e=Z.current;if(!e)return;let{scrollTop:t,scrollHeight:r,clientHeight:s}=e;t+s>=r-100&&y.hasMore&&!y.isLoading&&!y.isFetchingMore&&y.fetchMore()},[y]),ei=(0,r.useCallback)(()=>{let e=ee.current;if(!e)return;let{scrollTop:t,scrollHeight:r,clientHeight:s}=e;t+s>=r-100&&v.hasMore&&!v.isLoading&&!v.isFetchingMore&&v.fetchMore()},[v]),ec=(0,r.useCallback)(()=>{let e=et.current;if(!e)return;let{scrollTop:t,scrollHeight:r,clientHeight:s}=e;t+s>=r-100&&S.hasMore&&!S.isLoading&&!S.isFetchingMore&&S.fetchMore()},[S]),eu=(0,r.useCallback)(()=>{u(!1),p(null),c(""),B(""),U(""),q(""),er.current=!1},[u,p]);(0,r.useEffect)(()=>{x&&(g(x),p(null))},[x,p]);let ed=(0,r.useCallback)(e=>{l&&e.target===e.currentTarget&&(e.stopPropagation(),eu())},[l,eu]),{addFriend:ex,acceptFriendRequest:ep,removeFriend:em,updateUserProfile:ef,blockFriend:eh,unblockUser:eb}=(0,o.useSocialTracker)(),eg=(0,z.useAtomCallback)((0,r.useCallback)(e=>e(b.usernameToDataAtom),[])),ey=(0,r.useCallback)(async()=>{try{let e=eg().get(i);if(e&&("accepted"===e.relationshipType||"outgoing"===e.relationshipType))return void N.default.error("User already accepted or sent a friend request.");let{socialProfile:t,relationshipId:r}=await ex(i),{userId:s,username:a,avatarUrl:l,bannerUrl:n,color:o,socialLinks:c}=t,u={relationshipId:r,profile:{userId:s,username:a,avatarUrl:l,bannerUrl:n,color:o,socialLinks:c},createdAt:Date.now(),requestUsername:a},d=w.some(e=>e.profile.userId===s),x=v.items.some(e=>e.profile.userId===s);d||x||T("outgoing"),j(e=>{let t=e.filter(e=>e.profile.userId!==s);return[u,...t]})}catch{}finally{c("")}},[i,ex,eg,T,w,v.items]),ev=(0,r.useCallback)(async(e,t)=>{await ep(e,t),y.removeItem(e),C("incoming")},[ep,y,C]),ew=(0,r.useCallback)(async e=>{await em(e),y.removeItem(e),C("incoming")},[em,y,C]),ej=(0,r.useCallback)(async e=>{await em(e),v.removeItem(e),j(t=>t.filter(t=>t.relationshipId!==e)),C("outgoing")},[em,v,C]),ek=(0,r.useCallback)(async(e,t)=>{await eb(e,t),S.removeItem(t),C("blocked")},[eb,S,C]),eN=(0,r.useCallback)(async()=>{await ef({disableRequests:!d?.disableRequests})},[ef,d]),eS=(0,r.useCallback)(async(e,t)=>{await eh(e,t),y.removeItem(e),C("incoming")},[eh,y,C]),eP="incoming"===h?M:"sent"===h?L:F,eA="incoming"===h?B:"sent"===h?U:q,eC="incoming"===h?y.isLoading:"sent"===h?v.isLoading:S.isLoading,[eT,eI]=(0,s.useAtom)(V.userLobbySettingsAtom),eM=(0,r.useCallback)(()=>{eI(e=>({...e,disableFriendRequestToasts:!e.disableFriendRequestToasts}))},[eI]);return(0,$.createPortal)((0,t.jsx)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[200]",onClick:ed,onMouseDown:e=>{e.target===e.currentTarget&&n(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{n(!1)})},children:(0,t.jsx)(I.motion.div,{className:"relative w-[452px] h-[calc(100vh-72px)] max-h-[880px]",onClick:e=>e.stopPropagation(),initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},children:(0,t.jsxs)("div",{className:"flex flex-col w-full h-full min-h-0 bg-backgroundTertiary border border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,t.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:e("Add Friend")}),(0,t.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:eu,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary transition-colors duration-150 ease-in-out"})})]}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"border-b border-secondaryStroke",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[16px] pt-[16px] pb-[12px]",children:[(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] items-end px-[16px]",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(D.TextInput,{placeholder:e("Enter friend's username..."),value:i,onChange:e=>c(e.toLowerCase()),onKeyDown:e=>{"Enter"===e.key&&ey()},autoFocus:!0})}),(0,t.jsx)("button",{type:"button",disabled:!i.trim(),onClick:ey,className:"bg-primaryBlue h-[32px] px-[12px] rounded-full hover:bg-primaryBlue/80 disabled:hover:bg-primaryBlue disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-150 flex items-center gap-[6px]",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:e("Send Request")})})]})}),(0,t.jsx)("div",{className:"flex flex-row gap-[16px] px-[16px] w-full",children:d?.username&&(0,t.jsx)(_.Switch,{checked:!0===d.disableRequests,onChange:eN,label:e("Disable incoming friend requests"),onlyButtonClickable:!0})}),(0,t.jsx)("div",{className:"flex flex-row gap-[16px] px-[16px] w-full",children:d?.username&&(0,t.jsx)(_.Switch,{checked:eT.disableFriendRequestToasts??!1,onChange:eM,label:e("Disable friend request toasts"),onlyButtonClickable:!0})})]}),(0,t.jsx)("div",{className:"px-[16px] pb-[3px]",children:(0,t.jsxs)(R.HorizontalScrollContainer,{children:[(0,t.jsx)(E.ButtonTab,{onClick:()=>en("sent"),selected:"sent"===h,height:"h-[36px]",isMobile:!1,isPill:!0,padding:"px-[12px]",filterNumber:P?.outgoingCount,children:e("Sent")}),(0,t.jsx)(E.ButtonTab,{onClick:()=>en("incoming"),selected:"incoming"===h,height:"h-[36px]",isMobile:!1,isPill:!0,padding:"px-[12px]",filterNumber:P?.incomingCount,children:e("Incoming")}),(0,t.jsx)(E.ButtonTab,{onClick:()=>en("blocked"),selected:"blocked"===h,height:"h-[36px]",isMobile:!1,isPill:!0,padding:"px-[12px]",filterNumber:P?.blockedCount,children:e("Blocked")})]})})]}),(0,t.jsx)("div",{className:"px-[16px] pt-[16px] pb-[4px]",children:(0,t.jsxs)("div",{className:"whitespace-nowrap font-normal border-[1px] border-secondaryStroke flex flex-row h-[28px] pl-[12px] pr-[1px] gap-[8px] justify-start items-center rounded-full transition-colors duration-[125ms] cursor-text overflow-hidden hover:bg-secondaryStroke/35",children:[(0,t.jsx)("input",{type:"text",value:eP,onChange:e=>eA(e.target.value),placeholder:e("Search by username..."),autoComplete:"new-password",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",className:"flex flex-1 min-w-[0px] text-[12px] bg-transparent outline-none text-textPrimary font-medium placeholder:text-textTertiary"}),eC&&eP&&(0,t.jsx)("div",{className:"flex items-center justify-center w-[24px] h-[24px]",children:(0,t.jsx)("i",{className:"ri-loader-4-line text-textTertiary text-[14px] animate-spin"})}),eP&&!eC&&(0,t.jsx)("button",{type:"button",onClick:()=>eA(""),className:"group flex flex-row p-[4px] w-[24px] min-w-[24px] max-w-[24px] h-[24px] pr-[6px] justify-center items-center hover:bg-secondaryStroke/60 cursor-pointer rounded-[4px] rounded-r-full transition-colors duration-[125ms]",children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textSecondary group-hover:text-textPrimary transition-colors duration-[125ms] ease-in-out"})})]})}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:["incoming"===h&&(0,t.jsx)("div",{ref:Z,className:`flex-1 overflow-y-auto transition-opacity duration-150 ${eC?"opacity-60":"opacity-100"}`,onScroll:eo,children:0===y.items.length&&y.isLoading?(0,t.jsx)("div",{className:"flex flex-col gap-[12px] p-[12px]",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(Y,{type:"incoming"},r))}):0!==y.items.length||y.isLoading?(0,t.jsxs)("div",{style:{height:`${es.getTotalSize()+24}px`,width:"100%",position:"relative"},children:[es.getVirtualItems().map(e=>{let r=y.items[e.index];return(0,t.jsx)("div",{style:{position:"absolute",top:e.start+12,left:12,right:12,height:64},children:(0,t.jsx)(G,{request:r,type:"incoming",onAccept:()=>ev(r.relationshipId,r.profile.username),onReject:()=>ew(r.relationshipId),onBlock:()=>eS(r.relationshipId,r.profile.username)})},r.relationshipId)}),y.isFetchingMore&&(0,t.jsx)("div",{className:"text-center py-[8px] text-textTertiary text-[13px]",style:{position:"absolute",bottom:8,left:0,right:0},children:"Loading more..."})]},`incoming-${y.items.length}-${M}`):(0,t.jsx)("div",{className:"text-center py-[16px] text-textTertiary text-[13px]",children:M?"No matching friend requests":"No incoming friend requests"})}),"sent"===h&&(0,t.jsx)("div",{ref:ee,className:`flex-1 overflow-y-auto transition-opacity duration-150 ${eC?"opacity-60":"opacity-100"}`,onScroll:ei,children:0===k.length&&v.isLoading?(0,t.jsx)("div",{className:"flex flex-col gap-[12px] p-[12px]",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(Y,{type:"sent"},r))}):0!==k.length||v.isLoading?(0,t.jsxs)("div",{style:{height:`${ea.getTotalSize()+24}px`,width:"100%",position:"relative"},children:[ea.getVirtualItems().map(e=>{let r=k[e.index];return(0,t.jsx)("div",{style:{position:"absolute",top:e.start+12,left:12,right:12,height:64},children:(0,t.jsx)(G,{request:r,type:"sent",onReject:()=>ej(r.relationshipId)})},r.relationshipId)}),v.isFetchingMore&&(0,t.jsx)("div",{className:"text-center py-[8px] text-textTertiary text-[13px]",style:{position:"absolute",bottom:8,left:0,right:0},children:"Loading more..."})]},`outgoing-${k.length}-${L}`):(0,t.jsx)("div",{className:"text-center py-[16px] text-textTertiary text-[13px]",children:L?"No matching friend requests":"No sent friend requests"})}),"blocked"===h&&(0,t.jsx)("div",{ref:et,className:`flex-1 overflow-y-auto transition-opacity duration-150 ${eC?"opacity-60":"opacity-100"}`,onScroll:ec,children:0===S.items.length&&S.isLoading?(0,t.jsx)("div",{className:"flex flex-col gap-[12px] p-[12px]",children:[void 0,void 0,void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(Y,{type:"blocked"},r))}):0!==S.items.length||S.isLoading?(0,t.jsxs)("div",{style:{height:`${el.getTotalSize()+24}px`,width:"100%",position:"relative"},children:[el.getVirtualItems().map(e=>{let r=S.items[e.index];return(0,t.jsx)("div",{style:{position:"absolute",top:e.start+12,left:12,right:12,height:64},children:(0,t.jsx)(K,{user:r,onUnblock:()=>ek(r.userProfile.username,r.relationshipId)})},r.relationshipId)}),S.isFetchingMore&&(0,t.jsx)("div",{className:"text-center py-[8px] text-textTertiary text-[13px]",style:{position:"absolute",bottom:8,left:0,right:0},children:"Loading more..."})]},`blocked-${S.items.length}-${F}`):(0,t.jsx)("div",{className:"text-center py-[16px] text-textTertiary text-[13px]",children:F?"No matching blocked users":"No blocked users"})})]})]})]})})}),document.body)}),G=(0,r.memo)(function({request:e,type:r,onAccept:s,onReject:a,onBlock:l}){let{t:n}=(0,f.useTranslation)(),o=e.profile.username,i=e.requestUsername,c=i&&i!==o;return(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center gap-[12px] p-[12px] border border-secondaryStroke/50 rounded-[8px] overflow-hidden h-full",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-start items-center gap-[10px]",children:[(0,t.jsxs)("div",{className:"w-[40px] h-[40px] rounded-full overflow-hidden flex-shrink-0 bg-backgroundTertiary relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,t.jsx)(y.default,{src:e.profile.avatarUrl||(0,w.generateDefaultProfilePicture)(o),alt:o||"User",width:40,height:40,className:"object-cover",draggable:!1})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center gap-[6px]",children:(0,t.jsx)("div",{className:"text-[14px] text-textPrimary font-medium truncate",children:o||"Unknown User"})}),c&&(0,t.jsxs)("div",{className:"text-[12px] text-textTertiary truncate flex items-center gap-[4px]",children:[(0,t.jsx)("span",{className:"line-through opacity-60",children:i}),(0,t.jsx)("i",{className:"ri-arrow-right-line text-[10px]"}),(0,t.jsx)("span",{children:o})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[12px] flex-shrink-0",children:["incoming"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Tooltip,{content:n("Accept"),children:(0,t.jsx)("button",{type:"button",onClick:s,className:"flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full bg-increase/10 hover:bg-increase/20 text-increase transition-colors duration-150 ease-in-out group",children:(0,t.jsx)("i",{className:"ri-check-line text-[14px] text-increase group-hover:text-increase transition-colors duration-150 ease-in-out"})})}),(0,t.jsx)(h.Tooltip,{content:n("Reject"),children:(0,t.jsx)("button",{type:"button",onClick:a,className:"flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full bg-decrease/10 hover:bg-decreaseHover/10 text-decrease transition-colors duration-150 ease-in-out group",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-decrease group-hover:text-decreaseHover transition-colors duration-150 ease-in-out"})})}),(0,t.jsx)(h.Tooltip,{content:n("Block"),children:(0,t.jsx)("button",{type:"button",onClick:l,className:"flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full bg-backgroundTertiary hover:bg-decreaseHover/10 text-textSecondary hover:text-decreaseHover transition-colors duration-150 ease-in-out group",children:(0,t.jsx)("i",{className:"ri-forbid-line text-[14px] text-textSecondary group-hover:text-decreaseHover transition-colors duration-150 ease-in-out"})})})]}),"sent"===r&&(0,t.jsx)(h.Tooltip,{content:n("Unsend"),children:(0,t.jsx)("button",{type:"button",onClick:a,className:"flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full bg-decrease/10 hover:bg-decreaseHover/10 text-decrease transition-colors duration-150 ease-in-out group",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-decrease group-hover:text-decreaseHover transition-colors duration-150 ease-in-out"})})})]})]})}),K=(0,r.memo)(function({user:e,onUnblock:r}){let{t:s}=(0,f.useTranslation)();return(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center gap-[12px] p-[12px] border border-secondaryStroke/50 rounded-[8px] overflow-hidden h-full",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-start items-center gap-[10px]",children:[(0,t.jsxs)("div",{className:"w-[40px] h-[40px] rounded-full overflow-hidden flex-shrink-0 bg-backgroundTertiary relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,t.jsx)(y.default,{src:e.userProfile.avatarUrl||(0,w.generateDefaultProfilePicture)(e.userProfile.username),alt:e.userProfile.username||"User",width:40,height:40,className:"object-cover",draggable:!1})]}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("div",{className:"flex items-center gap-[6px]",children:(0,t.jsx)("div",{className:"text-[14px] text-textPrimary font-medium truncate",children:e.userProfile.username||"Unknown User"})})})]}),(0,t.jsx)("div",{className:"flex flex-row gap-[12px] flex-shrink-0",children:(0,t.jsx)(h.Tooltip,{content:s("Unblock"),children:(0,t.jsx)("button",{type:"button",onClick:r,className:"flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full bg-decrease/10 hover:bg-decreaseHover/10 text-decrease transition-colors duration-150 ease-in-out group",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-decrease group-hover:text-decreaseHover transition-colors duration-150 ease-in-out"})})})})]})}),Y=(0,r.memo)(function({type:e}){return(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center gap-[12px] p-[12px] border border-secondaryStroke/50 rounded-[8px] overflow-hidden h-[64px]",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-start items-center gap-[10px]",children:[(0,t.jsx)("div",{className:"w-[40px] h-[40px] rounded-full bg-secondaryStroke/40 animate-pulse flex-shrink-0"}),(0,t.jsx)("div",{className:"flex flex-col gap-[6px]",children:(0,t.jsx)("div",{className:"w-[100px] h-[14px] bg-secondaryStroke/40 rounded-[4px] animate-pulse"})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[12px] flex-shrink-0",children:["incoming"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-[28px] h-[28px] rounded-full bg-secondaryStroke/40 animate-pulse"}),(0,t.jsx)("div",{className:"w-[28px] h-[28px] rounded-full bg-secondaryStroke/40 animate-pulse"}),(0,t.jsx)("div",{className:"w-[28px] h-[28px] rounded-full bg-secondaryStroke/40 animate-pulse"})]}),("sent"===e||"blocked"===e)&&(0,t.jsx)("div",{className:"w-[28px] h-[28px] rounded-full bg-secondaryStroke/40 animate-pulse"})]})]})}),X=(0,r.memo)(function({onClose:e,onConfirm:s,username:a}){let{t:l}=(0,f.useTranslation)(),[n,o]=(0,r.useState)(!1),i=(0,r.useCallback)(()=>{s(),e()},[s,e]),c=(0,r.useCallback)(t=>{n&&t.target===t.currentTarget&&e()},[n,e]);return(0,$.createPortal)((0,t.jsx)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/40 flex items-center justify-center z-[200]",onClick:c,onMouseDown:e=>{e.target===e.currentTarget&&o(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{o(!1)})},children:(0,t.jsx)(I.motion.div,{className:"relative w-[452px] max-h-[880px]",onClick:e=>e.stopPropagation(),initial:{opacity:0,y:0,scale:1},animate:{opacity:1,y:4,scale:1},exit:{opacity:0,y:0,scale:1},transition:{duration:.15,ease:"easeOut"},children:(0,t.jsxs)("div",{className:"flex flex-col w-full h-full bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:[(0,t.jsxs)("div",{className:"flex flex-row w-full h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,t.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:l("Remove Friend")}),(0,t.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,t.jsx)("div",{className:"flex flex-col gap-[16px] p-[16px] pb-[20px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[16px]",children:(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:(0,t.jsx)("div",{className:"flex flex-row w-full gap-[16px] justify-start items-center",children:(0,t.jsxs)("span",{className:"text-textSecondary text-[14px] leading-[1.2rem] font-normal",children:[l("Are you sure you want to remove")," ",(0,t.jsxs)("span",{className:"text-textPrimary font-medium",children:["@",a]})," ",l("as a friend? This action cannot be undone.")]})})})})}),(0,t.jsx)("div",{className:"border-t border-secondaryStroke/50 flex flex-row w-full h-[68px] justify-end items-center p-[16px] pb-[20px]",children:(0,t.jsx)("button",{type:"button",onClick:i,className:"bg-decrease flex flex-row flex-1 h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-decreaseHover transition-all duration-[125ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:l("Remove Friend")})})})]})})}),document.body)});var J=e.i(555702);let Q=(0,r.memo)(function({isOpen:e=!1,isWindowModal:a=!1}){let{t:l}=(0,f.useTranslation)(),n=(0,s.useAtomValue)(b.friendListAtom),i=(0,s.useAtomValue)(b.userIdToDataAtom),[c,d]=(0,r.useState)(""),[x,p]=(0,s.useAtom)(b.showFriendBannersAtom),[y,v]=(0,s.useAtom)(g.lobbyInvitesAtom),w=(0,s.useAtomValue)(g.lobbyRequestsAtom),j=(0,s.useAtomValue)(g.myLobbyInfoAtom),{removeFriend:k}=(0,o.useSocialTracker)(),P=(0,r.useRef)(null),{inviteToLobby:A,requestJoinLobby:C,acceptLobbyInvite:T,acceptLobbyRequest:I,declineLobbyRequest:M,promoteLobbyRequest:$}=(0,u.useLobbyApi)(),[B,U]=(0,r.useState)(!1),[F,E]=(0,r.useState)(null),[R,_]=(0,s.useAtom)(b.addFriendModalOpenAtom),z=(0,s.useSetAtom)(b.addFriendModalInitialTabAtom),D=(0,s.useAtomValue)(b.incomingFriendListAtom),H=(0,s.useAtomValue)(b.userProfileAtom),O=(0,r.useCallback)((e,t)=>{E({relationshipId:e,username:t}),U(!0)},[]),W=(0,r.useCallback)(async()=>{F&&(await k(F.relationshipId),U(!1),E(null))},[k,F]),V=(0,r.useCallback)(async e=>{await A(e)},[A]),G=(0,r.useCallback)(async e=>{await C(e)},[C]),K=(0,r.useCallback)(async e=>{await T(e)},[T]),Y=(0,r.useCallback)((e,t)=>{v(r=>{let s=new Map(r),a=`${e}-${t}`;return s.delete(a),s})},[v]),Q=(0,r.useCallback)(async e=>{await I(e)},[I]),Z=(0,r.useCallback)(async e=>{await M(e)},[M]),ee=(0,r.useCallback)(async e=>{let t=i.get(e);if(t){if(!t.relationshipId){console.warn("Friend relationship not found"),N.default.error("Friend relationship not found");return}await $(t.relationshipId)}else console.warn("Friend not found for requester:",e)},[$,i]),et=(0,r.useMemo)(()=>Array.from(n.values()).filter(e=>e.userProfile.username.toLowerCase().includes(c.toLowerCase())),[n,c]),{onlineAndAwayFriends:er,offlineFriends:es,offlineCount:ea,onlineCount:el}=(0,r.useMemo)(()=>{let e=[],t=[],r=new Set;return j?.members.forEach(e=>{r.add(e.userProfile.userId)}),et.forEach(s=>{let a="offline"!==s.presence;0===c.length&&r.has(s.userProfile.userId)||(a?e.push(s):t.push(s))}),{onlineAndAwayFriends:e,offlineFriends:t,offlineCount:t.length,onlineCount:e.length}},[j,et,c]),en=(0,r.useMemo)(()=>D.size,[D]),eo=(0,r.useMemo)(()=>en>0&&H?.disableRequests!==!0,[en,H?.disableRequests]),ei=(0,r.useCallback)(()=>{d("")},[]),ec=(0,r.useCallback)(()=>{z("incoming"),_(!0)},[_,z]),eu=(0,r.useMemo)(()=>j&&w.get(j.lobbyId)||[],[w,j]),ed=(0,r.useMemo)(()=>Array.from(y.values()),[y]),ex=(0,s.useAtomValue)(b.userProfileIdAtom),ep=(0,r.useMemo)(()=>j?.leaderUserId===ex,[j,ex]),em=(0,r.useMemo)(()=>{let e=[];return 0===c.length&&j&&e.push({type:"lobby",key:"lobby-members"}),el>0&&(e.push({type:"online-divider",key:"online-divider"}),er.forEach(t=>{e.push({type:"friend",key:t.userProfile.userId,friend:t})})),ea>0&&(e.push({type:"offline-divider",key:"offline-divider"}),es.forEach(t=>{e.push({type:"friend",key:t.userProfile.userId,friend:t})})),e},[c,j,el,ea,er,es]),ef=(0,r.useCallback)(e=>{let t=em[e];if(!t)return 0;switch(t.type){case"lobby":if(j)return 36+j.members.length*(x?128:76)+12;return 200;case"online-divider":case"offline-divider":return 40;case"friend":return x?140:76;default:return 76}},[em,x,j]),eh=(0,m.useVirtualizer)({count:em.length,getScrollElement:()=>P.current,estimateSize:ef,overscan:3,useAnimationFrameWithResizeObserver:!0}),eb=eh.getVirtualItems(),eg=a?"border-secondaryStroke hover:bg-secondaryStroke/35":"border-primaryStroke hover:bg-primaryStroke/35",ey=a?"hover:bg-secondaryStroke/60":"hover:bg-primaryStroke/60",ev=a?"bg-backgroundTertiary":"bg-backgroundSecondary";return(0,t.jsx)("div",{className:`h-full ${ev} ${e?"shadow-[-4px_0_24px_-4px_rgba(0,0,0,0.2)] dark:shadow-[-4px_0_24px_-4px_rgba(0,0,0,0.4)]":""}`,children:(0,t.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[8px] px-[16px] pb-[4px] flex-shrink-0",children:[eo&&(0,t.jsx)("div",{className:"flex flex-row pt-[8px] w-full items-center gap-[16px]",children:(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[l("You have")," ",(0,t.jsxs)("button",{type:"button",className:"text-primaryBlueHover font-medium hover:underline cursor-pointer bg-transparent border-none p-0",onClick:ec,children:[en," ",l("incoming")]})," ",l("friend requests")]})}),ed.length>0&&(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:ed.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[12px] px-[12px] h-[64px] rounded-[12px] bg-primaryBlue/10 border border-primaryBlue/20",children:[(0,t.jsx)("i",{className:"ri-team-line text-[24px] text-primaryBlue"}),(0,t.jsxs)("div",{className:"flex flex-col gap-[4px] flex-1 min-w-0",children:[(0,t.jsxs)("span",{className:"text-[14px] font-medium text-textPrimary truncate",children:[e.inviterUsername," invited you to"," ",e.lobbyName.length>12?`${e.lobbyName.slice(0,12)}...`:e.lobbyName]}),(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary opacity-90",children:[e.lobbyMemberCount," ",1===e.lobbyMemberCount?"member":"members"]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-[12px] items-center",children:[(0,t.jsx)(h.Tooltip,{content:"Dismiss",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:()=>Y(e.lobbyId,e.inviterUserId),className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full flex-shrink-0",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-textPrimary/90"})})}),(0,t.jsx)("button",{type:"button",onClick:()=>K(e.lobbyId),className:"px-[12px] h-[32px] rounded-full bg-primaryBlue hover:bg-primaryBlue/80 transition-all duration-150 text-[14px] font-bold text-background whitespace-nowrap",children:"Join"})]})]},`${e.lobbyId}-${e.inviterUserId}`))}),eu.length>0&&(0,t.jsx)("div",{className:"flex flex-col gap-[8px]",children:eu.map(e=>(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[12px] px-[12px] h-[64px] rounded-[12px] bg-primaryBlue/10 border border-primaryBlue/20",children:[(0,t.jsx)("i",{className:"ri-user-add-line text-[24px] text-primaryBlue"}),(0,t.jsxs)("div",{className:"flex flex-col gap-[4px] flex-1 min-w-0",children:[(0,t.jsxs)("span",{className:"text-[14px] font-medium text-textPrimary truncate",children:[e.requesterUsername," requests to join"]}),e.referredByUsername&&(0,t.jsxs)("span",{className:"text-[12px] text-textSecondary opacity-90",children:["via ",e.referredByUsername]})]}),(0,t.jsx)("div",{className:"flex flex-row gap-[12px] items-center",children:ep?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Tooltip,{content:"Dismiss",position:"top",children:(0,t.jsx)("button",{type:"button",onClick:()=>Z(e.requesterUserId),className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full flex-shrink-0",children:(0,t.jsx)("i",{className:"ri-close-line text-[14px] text-textPrimary/90"})})}),(0,t.jsx)("button",{type:"button",onClick:()=>Q(e.requesterUserId),className:"px-[12px] h-[32px] rounded-full bg-primaryBlue hover:bg-primaryBlue/80 transition-all duration-150 text-[14px] font-bold text-background whitespace-nowrap",children:"Accept"})]}):(0,t.jsx)("button",{type:"button",onClick:()=>ee(e.requesterUserId),className:"px-[12px] h-[32px] rounded-full bg-primaryBlue hover:bg-primaryBlue/80 transition-all duration-150 text-[14px] font-bold text-background whitespace-nowrap",children:"Forward to Owner"})})]},e.requesterUserId))}),(0,t.jsxs)("div",{className:`flex flex-row w-full min-w-0 items-center gap-[8px] ${!eo?"pt-[12px]":""}`,children:[(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:`group font-normal border flex flex-row w-full h-[32px] pl-[8px] pr-[2px] gap-[8px] justify-start items-center rounded-full transition-colors duration-150 cursor-text min-w-0 ${eg}`,children:[(0,t.jsx)("i",{className:"ri-search-2-line text-[16px] text-textPrimary/90 group-hover:text-textPrimary transition-colors duration-150"}),(0,t.jsx)("input",{type:"text",placeholder:"Search friends...",value:c,onChange:e=>d(e.target.value),className:"flex-1 min-w-0 text-[14px] bg-transparent outline-none text-textPrimary font-medium placeholder:text-textPrimary/60 placeholder:font-medium"}),c&&(0,t.jsx)("button",{type:"button",onClick:ei,className:`flex flex-row p-[4px] w-[24px] h-[24px] pr-[4px] justify-center items-center cursor-pointer rounded-full transition-colors duration-150 ${ey}`,children:(0,t.jsx)("i",{className:"ri-close-line text-[16px] text-textPrimary/90 hover:text-textPrimary transition-colors duration-150"})})]})}),(0,t.jsx)(h.Tooltip,{content:x?"Switch to list view":"Switch to card view",children:(0,t.jsx)("button",{type:"button",onClick:()=>p(!x),className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[32px] h-[32px] min-h-[32px] justify-center items-center gap-[8px] rounded-full flex-shrink-0",children:(0,t.jsx)("i",{className:`${x?"ri-list-check":"ri-gallery-view-2"} text-textPrimary text-[16px]`})})}),(0,t.jsx)("button",{type:"button",onClick:()=>_(!0),className:"ml-[8px] bg-primaryBlue hover:bg-primaryBlue/80 transition-colors duration-150 flex flex-row px-[12px] h-[32px] min-h-[32px] justify-center items-center rounded-full flex-shrink-0",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:l("Add Friend")})})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)("div",{ref:P,className:"h-full overflow-y-auto px-[12px] pt-[12px] pb-[16px] [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:(0,t.jsx)("div",{style:{height:`${eh.getTotalSize()}px`,width:"100%",position:"relative"},children:eb.map(e=>{let r=em[e.index];return r?(0,t.jsxs)("div",{"data-index":e.index,ref:eh.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`},children:["lobby"===r.type&&(0,t.jsx)("div",{className:"mb-[12px]",children:(0,t.jsx)(L,{isWindowModal:a,showBanners:x})}),"online-divider"===r.type&&(0,t.jsxs)("div",{className:"flex flex-row pt-[4px] pb-[12px] w-full items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[el," ",l("Online")]}),(0,t.jsx)(h.Tooltip,{content:`Max ${J.MAX_FRIENDS} friends allowed`,position:"top",children:(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[n.size," / ",J.MAX_FRIENDS]})})]}),"offline-divider"===r.type&&(0,t.jsx)("div",{className:"flex flex-row pt-[4px] pb-[12px] w-full items-center gap-[16px]",children:(0,t.jsxs)("span",{className:"text-[12px] text-textTertiary",children:[ea," ",l("Offline")]})}),"friend"===r.type&&(0,t.jsx)("div",{className:"mb-[12px]",children:(0,t.jsx)(S,{friend:r.friend,isWindowModal:a,showBanners:x,onUnfriendClick:O,onInviteToLobby:V,onRequestJoinLobby:G})})]},e.key):null})})})}),B&&F&&(0,t.jsx)(X,{onClose:()=>{U(!1),E(null)},onConfirm:W,username:F.username}),R&&(0,t.jsx)(q,{})]})})});var Z=e.i(548656);let ee=["online","away","offline"];var et=e.i(173856),er=e.i(428522),es=e.i(661756),ea=e.i(832544);let el=({src:e,alt:r,label:a,color:l,className:n="",imageSize:o=14,launchPad:i=!0,protocol:c,migratedFrom:u})=>{let d=(0,s.useAtomValue)(ea.isMobileAtom),{getProtocolBadgeBorder:x}=(0,es.useProtocolDisplay)(),p=e.startsWith("/images/")?e:`/images/${e}`,m=x(c||a,u?{migratedFrom:u}:null,0),f=l.startsWith("[#")&&l.endsWith("]"),h=f?l.substring(1,l.length-1):"",b=f?"":`border-${l}/35`,g=f?"":`bg-${l}/5`,v=f?"":`text-${l}/90`;return(0,t.jsx)("div",{className:"flex flex-row gap-[4px] justify-start items-center",children:(0,t.jsx)("button",{className:`
          flex flex-row 
          gap-[4px] 
          justify-start 
          items-center 
          grayscale-[0]
          ${n}
          flex-shrink-0
          min-w-min
          max-w-none
          overflow-visible
          cursor-default
          ${d?"active:scale-[0.98] active:opacity-[0.95]":""}
        `,type:"button",children:(0,t.jsxs)("div",{className:`
            relative 
            border-[1px] 
            ${!f?b:""}
            ${!f?g:""}
            flex flex-row h-[24px] pl-[5px] pr-[7px] gap-[3px] 
            justify-start items-center rounded-full
          `,style:{...!f?{}:{borderColor:`${h}A6`,backgroundColor:`${h}0D`,color:`${h}E6`}},children:[!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:`
                opacity-[0.05]
                absolute inset-0 rounded-full z-20
                ${m.className}
              `,style:m.style}),(0,t.jsx)("div",{className:`
                bg-backgroundTertiary 
                absolute inset-0 rounded-full z-10
              `})]}),!i&&(0,t.jsx)("div",{className:`
              absolute 
              opacity-[0.45]
              -inset-[1px] 
              rounded-full z-0 
              bg-transparent
              ${m.className}
            `,style:m.style}),(0,t.jsx)(y.default,{className:"z-30",src:p,alt:r||a,width:o,height:o,loading:"eager"}),(0,t.jsx)("span",{className:`
              ${!f?v:""}
              text-[13px] font-medium z-30 text-nowrap
            `,style:f?{color:`${h}E6`}:{},children:a})]})})})};var en=e.i(504764),eo=e.i(323954),ei=e.i(182781);let ec=(0,r.memo)(function({presets:e}){let[s,a]=(0,r.useState)("protocols"),[l,n]=(0,r.useState)("protocols"),[o,i]=(0,r.useState)("protocols");return e?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[e.newPairs&&(0,t.jsx)(ed,{title:"New Pairs",preset:e.newPairs,activeTab:s,setActiveTab:a}),e.finalStretch&&(0,t.jsx)(ed,{title:"Final Stretch",preset:e.finalStretch,activeTab:l,setActiveTab:n}),e.migrated&&(0,t.jsx)(ed,{title:"Migrated",preset:e.migrated,activeTab:o,setActiveTab:i})]}):null}),eu=({label:e,min:r,max:s})=>null==r&&null==s?null:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[e,":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:null!=r&&null!=s?`${r} - ${s}`:null!=r?`Min: ${r}`:null!=s?`Max: ${s}`:""})]}),ed=(0,r.memo)(function({title:e,preset:a,activeTab:l,setActiveTab:n}){let i=(0,s.useAtomValue)(b.userProfileAtom),c=(0,s.useAtomValue)(b.friendProfileDataAtom),u=(0,r.useMemo)(()=>c?null:i?.userId??null,[c,i]),{updateSharedPreset:d}=(0,o.useSocialTracker)(),x=(0,r.useMemo)(()=>"New Pairs"===e?"newPairs":"Final Stretch"===e?"finalStretch":"migrated",[e]),p=(0,r.useCallback)(()=>{d(x,null,"sol")},[d,x]),{t:m}=(0,f.useTranslation)(),[,h]=(0,ei.useSettings)("pulseFilters",en.DEFAULT_FILTER_STATE_PULSE,eo.isAllPulseFilters),g=(0,r.useCallback)(t=>{h(e=>({...e,[x]:t})),N.default.success(m("Preset applied to ")+e)},[h,x,e,m]),y=(0,r.useCallback)(()=>a?Object.values(a.protocols).filter(Boolean).length:0,[a]),v=(0,r.useCallback)(()=>{if(!a)return 0;let e=0;return a.dexPaid&&e++,a.mustEndInPump&&e++,(a.userCount?.min!=null||a.userCount?.max!=null)&&e++,(null!==a.age.min||null!==a.age.max)&&e++,(null!==a.top10Holders.min||null!==a.top10Holders.max)&&e++,(null!==a.devHolding.min||null!==a.devHolding.max)&&e++,(null!==a.snipers.min||null!==a.snipers.max)&&e++,(null!==a.insiders.min||null!==a.insiders.max)&&e++,(null!==a.bundle.min||null!==a.bundle.max)&&e++,(null!==a.holders.min||null!==a.holders.max)&&e++,(null!==a.botUsers.min||null!==a.botUsers.max)&&e++,(a.numMigrations?.min!==null||a.numMigrations?.max!==null)&&e++,e},[a]),w=(0,r.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.bondingCurve.min||null!==a.bondingCurve.max)&&e++,(null!==a.liquidity.min||null!==a.liquidity.max)&&e++,(null!==a.volume.min||null!==a.volume.max)&&e++,(null!==a.marketCap.min||null!==a.marketCap.max)&&e++,(a.fees?.min!==null||a.fees?.max!==null)&&e++,(null!==a.txns.min||null!==a.txns.max)&&e++,(null!==a.numBuys.min||null!==a.numBuys.max)&&e++,(null!==a.numSells.min||null!==a.numSells.max)&&e++,e},[a]),j=(0,r.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.twitter.min||null!==a.twitter.max)&&e++,a.twitterExists&&e++,a.website&&e++,a.telegram&&e++,a.atLeastOneSocial&&e++,e},[a]);return((0,r.useEffect)(()=>{let e={protocols:y(),audit:v(),metrics:w(),socials:j()};if(0===e[l]){let t=Object.keys(e).find(t=>e[t]>0);t&&n(t)}},[l,y,v,w,j,n]),a)?(0,t.jsxs)("div",{className:"relative border-[2px] border-white/5 rounded-[12px] overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.035] border-[1px] rounded-[12px] z-[15] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsxs)("div",{className:"relative z-[15] flex flex-col gap-3 p-3 pt-[8px]",children:[(0,t.jsx)("div",{className:"flex flex-row justify-between items-center",children:(0,t.jsx)("div",{className:"text-textPrimary text-[14px] font-medium",children:e})}),(a.searchKeywords.length>0||a.excludeKeywords.length>0)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2 pb-2 border-b border-secondaryStroke/50",children:[a.searchKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Search Keywords"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:a.searchKeywords.join(", ")})]}),a.excludeKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Exclude Keywords"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:a.excludeKeywords.join(", ")})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 flex-wrap",children:[y()>0&&(0,t.jsx)(er.default,{selected:"protocols"===l,onClick:()=>n("protocols"),height:"h-[40px]",filterNumber:y(),children:m("Protocols")}),v()>0&&(0,t.jsx)(er.default,{selected:"audit"===l,onClick:()=>n("audit"),height:"h-[40px]",filterNumber:v(),children:m("Audit")}),w()>0&&(0,t.jsx)(er.default,{selected:"metrics"===l,onClick:()=>n("metrics"),height:"h-[40px]",filterNumber:w(),children:m("$ Metrics")}),j()>0&&(0,t.jsx)(er.default,{selected:"socials"===l,onClick:()=>n("socials"),height:"h-[40px]",filterNumber:j(),children:m("Socials")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:["protocols"===l&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.protocols.pump&&(0,t.jsx)(el,{color:"pump",src:"pump.svg",label:m("Pump")}),a.protocols.bonk&&(0,t.jsx)(el,{color:"bonk",src:"bonk.svg",label:m("Bonk")}),a.protocols.bonkers&&(0,t.jsx)(el,{color:"bonkers",src:"bonkers.svg",label:m("Bonkers")}),a.protocols.moonshotApp&&(0,t.jsx)(el,{color:"moonshotApp",src:"moonshot-new.svg",label:m("Moonshot")}),a.protocols.bags&&(0,t.jsx)(el,{color:"bags",src:"bags.svg",label:m("Bags")}),a.protocols.launchACoin&&(0,t.jsx)(el,{color:"launchACoin",src:"launch-a-coin.svg",label:m("Believe")}),a.protocols.jupiterStudio&&(0,t.jsx)(el,{color:"jupiterStudio",src:"jupstudio.svg",label:m("Jupiter Studio")}),a.protocols.moonshot&&(0,t.jsx)(el,{color:"moonshot",src:"moonit.svg",label:m("Moonit")}),a.protocols.boop&&(0,t.jsx)(el,{color:"boop",src:"boop.svg",label:m("Boop")}),a.protocols.launchLab&&(0,t.jsx)(el,{color:"launchlab",src:"launchlab.svg",label:m("LaunchLab")}),a.protocols.virtualCurve&&(0,t.jsx)(el,{color:"virtualCurve",src:"virtual-curve.svg",label:m("Dynamic BC")}),a.protocols.raydium&&(0,t.jsx)(el,{color:"[#C4D4FF]",src:"ray.svg",label:m("Raydium"),protocol:"Raydium V4",launchPad:!1}),a.protocols.meteoraAmm&&(0,t.jsx)(el,{color:"[#FFECE7]",src:"meteora.svg",label:m("Meteora AMM"),protocol:"Meteora AMM",launchPad:!1}),a.protocols.meteoraAmmV2&&(0,t.jsx)(el,{color:"[#FFECE7]",src:"meteora.svg",label:m("Meteora AMM V2"),protocol:"Meteora AMM V2",launchPad:!1}),a.protocols.pumpAmm&&(0,t.jsx)(el,{color:"[#A2A2A2]",src:"pump-amm-temp.svg",label:m("Pump AMM"),protocol:"Pump AMM",launchPad:!1}),a.protocols.orca&&(0,t.jsx)(el,{color:"orca",src:"orca.svg",label:m("Orca")}),a.protocols.wavebreak&&(0,t.jsx)(el,{color:"[#EDD583]",src:"orca-grad.svg",label:m("Wavebreak"),protocol:"Wavebreak",launchPad:!1})]}),"audit"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[a.dexPaid&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Dex Paid"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Enabled")})]}),a.mustEndInPump&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("CA ends in 'pump'"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Enabled")})]}),(0,t.jsx)(eu,{label:m("Recent Visitors"),min:a.userCount?.min,max:a.userCount?.max}),(0,t.jsx)(eu,{label:m("Age (mins)"),min:a.age.min,max:a.age.max}),(0,t.jsx)(eu,{label:m("Top 10 Holders %"),min:a.top10Holders.min,max:a.top10Holders.max}),(0,t.jsx)(eu,{label:m("Dev Holding %"),min:a.devHolding.min,max:a.devHolding.max}),(0,t.jsx)(eu,{label:m("Snipers %"),min:a.snipers.min,max:a.snipers.max}),(0,t.jsx)(eu,{label:m("Insiders %"),min:a.insiders.min,max:a.insiders.max}),(0,t.jsx)(eu,{label:m("Bundle %"),min:a.bundle.min,max:a.bundle.max}),(0,t.jsx)(eu,{label:m("Holders"),min:a.holders.min,max:a.holders.max}),(0,t.jsx)(eu,{label:m("Pro Traders"),min:a.botUsers.min,max:a.botUsers.max}),(0,t.jsx)(eu,{label:m("Dev Migrations"),min:a.numMigrations?.min,max:a.numMigrations?.max})]}),"metrics"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(eu,{label:m("B. curve %"),min:a.bondingCurve.min,max:a.bondingCurve.max}),(0,t.jsx)(eu,{label:m("Liquidity ($)"),min:a.liquidity.min,max:a.liquidity.max}),(0,t.jsx)(eu,{label:m("Volume ($)"),min:a.volume.min,max:a.volume.max}),(0,t.jsx)(eu,{label:m("Market Cap ($)"),min:a.marketCap.min,max:a.marketCap.max}),(0,t.jsx)(eu,{label:m("Global Fees Paid (SOL)"),min:a.fees?.min,max:a.fees?.max}),(0,t.jsx)(eu,{label:m("Txns"),min:a.txns.min,max:a.txns.max}),(0,t.jsx)(eu,{label:m("Num Buys"),min:a.numBuys.min,max:a.numBuys.max}),(0,t.jsx)(eu,{label:m("Num Sells"),min:a.numSells.min,max:a.numSells.max})]}),"socials"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(eu,{label:m("Twitter Reuses"),min:a.twitter.min,max:a.twitter.max}),a.twitterExists&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Twitter"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]}),a.website&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Website"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]}),a.telegram&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Telegram"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]}),a.atLeastOneSocial&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("At Least One Social"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]})]})]}),(0,t.jsx)("div",{className:"flex flex-row flex-1 pb-[6px] pt-[10px] min-h-[4px] justify-center items-center relative z-[15]",children:u?(0,t.jsx)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row pl-[10px] pr-[8px] h-[32px] justify-center items-center gap-[4px] rounded-full w-full",onClick:p,children:(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:m("Remove Preset")})}):(0,t.jsx)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row pl-[10px] pr-[8px] h-[32px] justify-center items-center gap-[4px] rounded-full w-full",onClick:()=>g(a),children:(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:m("Use Preset")})})})]})]}):null});var ex=e.i(971257),ep=e.i(261980),em=e.i(432602);let ef=(0,r.memo)(function({presets:e}){let[s,a]=(0,r.useState)("protocols"),[l,n]=(0,r.useState)("protocols"),[o,i]=(0,r.useState)("protocols");return e?(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[e.newPairs&&(0,t.jsx)(eb,{title:"New Pairs",preset:e.newPairs,activeTab:s,setActiveTab:a}),e.finalStretch&&(0,t.jsx)(eb,{title:"Final Stretch",preset:e.finalStretch,activeTab:l,setActiveTab:n}),e.migrated&&(0,t.jsx)(eb,{title:"Migrated",preset:e.migrated,activeTab:o,setActiveTab:i})]}):null}),eh=({label:e,min:r,max:s})=>null==r&&null==s?null:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[e,":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:null!=r&&null!=s?`${r} - ${s}`:null!=r?`Min: ${r}`:null!=s?`Max: ${s}`:""})]}),eb=(0,r.memo)(function({title:e,preset:a,activeTab:l,setActiveTab:n}){let i=(0,s.useAtomValue)(b.userProfileAtom),c=(0,s.useAtomValue)(b.friendProfileDataAtom),u=(0,r.useMemo)(()=>c?null:i?.userId??null,[c,i]),{updateSharedPreset:d}=(0,o.useSocialTracker)(),x=(0,r.useMemo)(()=>"New Pairs"===e?"newPairs":"Final Stretch"===e?"finalStretch":"migrated",[e]),p=(0,r.useCallback)(()=>{d(x,null,"bnb")},[d,x]),{t:m}=(0,f.useTranslation)(),[,h]=(0,em.useEvmSettings)("pulseFilters",ep.DEFAULT_ALL_BNB_FILTERS,ex.validateAllEvmPulseFilters),g=(0,r.useCallback)(()=>{h(e=>({...e,[x]:a})),N.default.success(m("Preset applied to ")+e)},[h,x,a,e,m]),y=(0,r.useCallback)(()=>a?Object.values(a.protocols).filter(Boolean).length:0,[a]),v=(0,r.useCallback)(()=>{if(!a)return 0;let e=0;return a.dexPaid&&e++,(null!==a.age.min||null!==a.age.max)&&e++,(null!==a.top10Holders.min||null!==a.top10Holders.max)&&e++,(null!==a.devHolding.min||null!==a.devHolding.max)&&e++,(null!==a.snipers.min||null!==a.snipers.max)&&e++,(null!==a.holders.min||null!==a.holders.max)&&e++,(a.numDevMigrations?.min!==null||a.numDevMigrations?.max!==null)&&e++,(a.numDevCreations?.min!==null||a.numDevCreations?.max!==null)&&e++,e},[a]),w=(0,r.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.bondingCurve.min||null!==a.bondingCurve.max)&&e++,(null!==a.liquidity.min||null!==a.liquidity.max)&&e++,(null!==a.volume.min||null!==a.volume.max)&&e++,(null!==a.marketCap.min||null!==a.marketCap.max)&&e++,(null!==a.txns.min||null!==a.txns.max)&&e++,(null!==a.numBuys.min||null!==a.numBuys.max)&&e++,(null!==a.numSells.min||null!==a.numSells.max)&&e++,e},[a]),j=(0,r.useCallback)(()=>{if(!a)return 0;let e=0;return(null!==a.twitterHandleReuses.min||null!==a.twitterHandleReuses.max)&&e++,(a.tweetAgeMins?.min!==null||a.tweetAgeMins?.max!==null)&&e++,a.twitterExists&&e++,a.website&&e++,a.telegram&&e++,a.atLeastOneSocial&&e++,e},[a]);return((0,r.useEffect)(()=>{let e={protocols:y(),audit:v(),metrics:w(),socials:j()};if(0===e[l]){let t=Object.keys(e).find(t=>e[t]>0);t&&n(t)}},[l,y,v,w,j,n]),a)?(0,t.jsxs)("div",{className:"relative border-[2px] border-white/5 rounded-[12px] overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.035] border-[1px] rounded-[12px] z-[15] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsxs)("div",{className:"relative z-[15] flex flex-col gap-3 p-3 pt-[8px]",children:[(0,t.jsx)("div",{className:"flex flex-row justify-between items-center",children:(0,t.jsx)("div",{className:"text-textPrimary text-[14px] font-medium",children:e})}),(a.searchKeywords.length>0||a.excludeKeywords.length>0)&&(0,t.jsxs)("div",{className:"flex flex-col gap-2 pb-2 border-b border-secondaryStroke/50",children:[a.searchKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Search Keywords"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:a.searchKeywords.join(", ")})]}),a.excludeKeywords.length>0&&(0,t.jsxs)("div",{className:"flex flex-row items-start gap-2",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Exclude Keywords"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:a.excludeKeywords.join(", ")})]})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 flex-wrap",children:[y()>0&&(0,t.jsx)(er.default,{selected:"protocols"===l,onClick:()=>n("protocols"),height:"h-[40px]",filterNumber:y(),children:m("Protocols")}),v()>0&&(0,t.jsx)(er.default,{selected:"audit"===l,onClick:()=>n("audit"),height:"h-[40px]",filterNumber:v(),children:m("Audit")}),w()>0&&(0,t.jsx)(er.default,{selected:"metrics"===l,onClick:()=>n("metrics"),height:"h-[40px]",filterNumber:w(),children:m("$ Metrics")}),j()>0&&(0,t.jsx)(er.default,{selected:"socials"===l,onClick:()=>n("socials"),height:"h-[40px]",filterNumber:j(),children:m("Socials")})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:["protocols"===l&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.protocols["Fourmeme V2"]&&(0,t.jsx)(el,{color:"[#7ce660]",src:"/images/evm/protocols/fourmeme.svg",label:m("Four.meme"),protocol:"Fourmeme V2",launchPad:!0}),a.protocols.Binance&&(0,t.jsx)(el,{color:"[#F0B90B]",src:"/images/evm/protocols/binance.svg",label:m("Binance"),protocol:"Binance",launchPad:!0}),(a.protocols["Pancakeswap V2"]||a.protocols["Pancakeswap V3"]||a.protocols["Generic Pancakeswap V2"]||a.protocols["Generic Pancakeswap V3"])&&(0,t.jsx)(el,{color:"[#D1884F]",src:"/images/evm/protocols/pancake.svg",label:m("Pancakeswap"),protocol:"Pancakeswap V2",launchPad:!1}),(a.protocols["Uniswap V2"]||a.protocols["Uniswap V3"]||a.protocols["Uniswap V4"]||a.protocols["Generic Uniswap V2"]||a.protocols["Generic Uniswap V3"]||a.protocols["Generic Uniswap V4"])&&(0,t.jsx)(el,{color:"[#F50DB4]",src:"/images/evm/protocols/uniswap.svg",label:m("Uniswap"),protocol:"Uniswap V2",launchPad:!1})]}),"audit"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[a.dexPaid&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Dex Paid"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Enabled")})]}),(0,t.jsx)(eh,{label:m("Age (mins)"),min:a.age.min,max:a.age.max}),(0,t.jsx)(eh,{label:m("Top 10 Holders %"),min:a.top10Holders.min,max:a.top10Holders.max}),(0,t.jsx)(eh,{label:m("Dev Holding %"),min:a.devHolding.min,max:a.devHolding.max}),(0,t.jsx)(eh,{label:m("Snipers %"),min:a.snipers.min,max:a.snipers.max}),(0,t.jsx)(eh,{label:m("Holders"),min:a.holders.min,max:a.holders.max}),(0,t.jsx)(eh,{label:m("Dev Migrations"),min:a.numDevMigrations?.min,max:a.numDevMigrations?.max}),(0,t.jsx)(eh,{label:m("Dev Pairs Created"),min:a.numDevCreations?.min,max:a.numDevCreations?.max})]}),"metrics"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(eh,{label:m("B. curve %"),min:a.bondingCurve.min,max:a.bondingCurve.max}),(0,t.jsx)(eh,{label:m("Liquidity ($)"),min:a.liquidity.min,max:a.liquidity.max}),(0,t.jsx)(eh,{label:m("Volume ($)"),min:a.volume.min,max:a.volume.max}),(0,t.jsx)(eh,{label:m("Market Cap ($)"),min:a.marketCap.min,max:a.marketCap.max}),(0,t.jsx)(eh,{label:m("Txns"),min:a.txns.min,max:a.txns.max}),(0,t.jsx)(eh,{label:m("Num Buys"),min:a.numBuys.min,max:a.numBuys.max}),(0,t.jsx)(eh,{label:m("Num Sells"),min:a.numSells.min,max:a.numSells.max})]}),"socials"===l&&(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(eh,{label:m("Twitter Reuses"),min:a.twitterHandleReuses.min,max:a.twitterHandleReuses.max}),(0,t.jsx)(eh,{label:m("Tweet Age (mins)"),min:a.tweetAgeMins?.min,max:a.tweetAgeMins?.max}),a.twitterExists&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Twitter"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]}),a.website&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Website"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]}),a.telegram&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("Telegram"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]}),a.atLeastOneSocial&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2 py-1",children:[(0,t.jsxs)("span",{className:"text-textSecondary text-[12px] min-w-[120px]",children:[m("At Least One Social"),":"]}),(0,t.jsx)("span",{className:"text-textPrimary text-[12px]",children:m("Required")})]})]})]}),(0,t.jsx)("div",{className:"flex flex-row flex-1 pb-[6px] pt-[10px] min-h-[4px] justify-center items-center relative z-[15]",children:u?(0,t.jsx)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row pl-[10px] pr-[8px] h-[32px] justify-center items-center gap-[4px] rounded-full w-full",onClick:p,children:(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:m("Remove Preset")})}):(0,t.jsx)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row pl-[10px] pr-[8px] h-[32px] justify-center items-center gap-[4px] rounded-full w-full",onClick:g,children:(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:m("Use Preset")})})})]})]}):null}),eg=(0,r.memo)(function({sharedPresets:e,selectedChain:s}){return(0,r.useMemo)(()=>{if(!e)return!1;let t=e.sol&&(e.sol.newPairs||e.sol.finalStretch||e.sol.migrated),r=e.bnb&&(e.bnb.newPairs||e.bnb.finalStretch||e.bnb.migrated);return t||r},[e])&&e?(0,t.jsx)("div",{className:"flex flex-col gap-[6px] h-full flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0 [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:"sol"===s?(0,t.jsx)(ec,{presets:e.sol}):(0,t.jsx)(ef,{presets:e.bnb})})}):null});var ey=e.i(410152);let ev=(0,r.memo)(function({onClose:e}){let l=(0,s.useAtomValue)(ea.isMobileAtom),n=(0,s.useAtomValue)(a.userIdAtom),[o,i]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),{socialApiGet:p}=(0,H.useRateLimitedSocialApi)(H.socialApiRestrictiveRateLimitAtom);(0,r.useEffect)(()=>{(async()=>{try{let e=await p("/generate-twitter-verification-link",void 0,n??void 0),t=e.authUrl||("string"==typeof e?e:void 0);if(!t||"string"!=typeof t)throw Error("Invalid OAuth URL received from server");u(t)}catch(e){console.error("Error fetching Twitter OAuth URL:",e),N.default.error(`Failed to start verification: ${e instanceof Error?e.message:"Unknown error"}`)}finally{i(!1)}})()},[n,p]);let m=(0,r.useCallback)(t=>{d&&t.target===t.currentTarget&&(t.stopPropagation(),e())},[d,e]),f=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row w-full gap-[16px] justify-center items-center px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-start items-center"}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-center items-center",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-textSecondary text-[16px] leading-[21px] font-normal tracking-[-0.02em]",children:"Verify Twitter/X"})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-end items-center",children:(0,t.jsx)("button",{type:"button",className:"flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-primaryStroke/60 rounded-[4px]",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px]"})})})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsx)("p",{className:"text-textSecondary text-center text-[12px] leading-[16px] font-normal",children:"Verify your Twitter/X account to confirm ownership. You'll be redirected to Twitter to authorize this verification."})}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:o?(0,t.jsxs)("button",{type:"button",disabled:!0,className:"bg-[#1DA1F2] flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full opacity-50 cursor-not-allowed",children:[(0,t.jsx)("i",{className:"ri-loader-4-line text-[14px] text-background animate-spin"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Loading..."})]}):c?(0,t.jsxs)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"bg-[#1DA1F2] flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-[#1DA1F2]/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer no-underline",children:[(0,t.jsx)("i",{className:"ri-twitter-x-line text-[14px] text-background"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Verify with Twitter/X"})]}):(0,t.jsx)("button",{type:"button",disabled:!0,className:"bg-[#1DA1F2] flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full opacity-50 cursor-not-allowed",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Failed to load verification link"})})}),(0,t.jsx)("div",{className:"bg-secondaryStroke flex flex-row w-full h-[1px] justify-center items-center"}),(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal text-center px-[16px]",children:"After authorizing on Twitter, you'll be redirected back to complete the verification process."})]});return l?(0,$.createPortal)((0,t.jsx)(ey.BottomSheet,{isOpen:!0,onClose:e,children:(0,t.jsx)("div",{className:"flex flex-col w-full pt-[16px] pb-[20px] gap-[16px] bg-backgroundTertiary justify-center items-center",children:f})}),document.body):(0,$.createPortal)((0,t.jsxs)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"fixed inset-0 flex items-center justify-center z-[200]",children:[(0,t.jsx)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:m,onMouseDown:e=>{e.target===e.currentTarget&&x(!0)},onMouseUp:()=>{requestAnimationFrame(()=>x(!1))}}),(0,t.jsx)(I.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-full max-w-[312px] pt-[16px] pb-[20px] gap-[16px] bg-backgroundTertiary border border-secondaryStroke rounded-[4px] justify-center items-center z-[200] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:f})]}),document.body)}),ew=(0,r.memo)(function({onClose:e}){let l=(0,s.useAtomValue)(ea.isMobileAtom),n=(0,s.useAtomValue)(a.userIdAtom),[o,i]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),{socialApiGet:p}=(0,H.useRateLimitedSocialApi)(H.socialApiRestrictiveRateLimitAtom);(0,r.useEffect)(()=>{(async()=>{try{let e=await p("/generate-twitch-verification-link",void 0,n??void 0),t=e.authUrl||("string"==typeof e?e:void 0);if(!t||"string"!=typeof t)throw Error("Invalid OAuth URL received from server");u(t)}catch(e){console.error("Error fetching Twitch OAuth URL:",e),N.default.error(`Failed to start verification: ${e instanceof Error?e.message:"Unknown error"}`)}finally{i(!1)}})()},[n,p]);let m=(0,r.useCallback)(t=>{d&&t.target===t.currentTarget&&(t.stopPropagation(),e())},[d,e]),f=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row w-full gap-[16px] justify-center items-center px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-start items-center"}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-center items-center",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-textSecondary text-[16px] leading-[21px] font-normal tracking-[-0.02em]",children:"Verify Twitch"})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-end items-center",children:(0,t.jsx)("button",{type:"button",className:"flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-primaryStroke/60 rounded-[4px]",onClick:e,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px]"})})})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsx)("p",{className:"text-textSecondary text-center text-[12px] leading-[16px] font-normal",children:"Verify your Twitch account to confirm ownership. You'll be redirected to Twitch to authorize this verification."})}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:o?(0,t.jsxs)("button",{type:"button",disabled:!0,className:"bg-[#9146FF] flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full opacity-50 cursor-not-allowed",children:[(0,t.jsx)("i",{className:"ri-loader-4-line text-[14px] text-background animate-spin"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Loading..."})]}):c?(0,t.jsxs)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"bg-[#9146FF] flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-[#9146FF]/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer no-underline",children:[(0,t.jsx)("i",{className:"ri-twitch-line text-[14px] text-background"}),(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Verify with Twitch"})]}):(0,t.jsx)("button",{type:"button",disabled:!0,className:"bg-[#9146FF] flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full opacity-50 cursor-not-allowed",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:"Failed to load verification link"})})}),(0,t.jsx)("div",{className:"bg-secondaryStroke flex flex-row w-full h-[1px] justify-center items-center"}),(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal text-center px-[16px]",children:"After authorizing on Twitch, you'll be redirected back to complete the verification process."})]});return l?(0,$.createPortal)((0,t.jsx)(ey.BottomSheet,{isOpen:!0,onClose:e,children:(0,t.jsx)("div",{className:"flex flex-col w-full pt-[16px] pb-[20px] gap-[16px] bg-backgroundTertiary justify-center items-center",children:f})}),document.body):(0,$.createPortal)((0,t.jsxs)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"fixed inset-0 flex items-center justify-center z-[200]",children:[(0,t.jsx)(I.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:m,onMouseDown:e=>{e.target===e.currentTarget&&x(!0)},onMouseUp:()=>{requestAnimationFrame(()=>x(!1))}}),(0,t.jsx)(I.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-full max-w-[312px] pt-[16px] pb-[20px] gap-[16px] bg-backgroundTertiary border border-secondaryStroke rounded-[4px] justify-center items-center z-[200] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:f})]}),document.body)}),ej=[{key:"twitterHandle",icon:"ri-twitter-x-line",label:"Twitter/X",placeholder:"https://x.com/",color:"hover:text-[#1DA1F2]"},{key:"youtubeHandle",icon:"ri-youtube-line",label:"YouTube",placeholder:"https://youtube.com/@",color:"hover:text-[#000000]"},{key:"twitchHandle",icon:"ri-twitch-line",label:"Twitch",placeholder:"https://twitch.tv/",color:"hover:text-[#9146FF]"}],ek=(0,r.memo)(function({isUser:e}){let{t:a}=(0,f.useTranslation)(),{deleteSocialLink:l}=(0,o.useSocialTracker)(),[n,i]=(0,r.useState)(null),[c,u]=(0,s.useAtom)(b.userProfileAtom),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!e)return;d.current=new BroadcastChannel("verify-socials");let t=e=>{if(e.data?.type==="verify-complete"){let t=e.data.platform,r=e.data.twitterHandle||e.data.youtubeHandle||e.data.twitchHandle;if(r&&t){let e,s,a;if("twitter"===t)e="twitterHandle",s="https://x.com/",a="Twitter/X";else if("youtube"===t)e="youtubeHandle",s="https://youtube.com/@",a="YouTube";else{if("twitch"!==t)return;e="twitchHandle",s="https://twitch.tv/",a="Twitch"}u(t=>t?{...t,socialLinks:{...t.socialLinks,[e]:`${s}${r}`}}:null),N.default.success(`${a} verified successfully for @${r}!`,{duration:3e4}),i(null)}}else if(e.data?.type==="verify-error"){let t=e.data.platform;N.default.error(`${"twitter"===t?"Twitter/X":"youtube"===t?"YouTube":"twitch"===t?"Twitch":"Platform"} verification failed: ${e.data.error||"Unknown error"}`,{duration:3e4}),i(null)}};return d.current.addEventListener("message",t),()=>{d.current&&(d.current.removeEventListener("message",t),d.current.close())}},[e,u]);let x=(0,r.useCallback)(e=>{"twitterHandle"===e?i("twitter"):"youtubeHandle"===e?i("youtube"):"twitchHandle"===e&&i("twitch")},[]),p=(0,r.useCallback)(async e=>{try{let t={twitterHandle:"twitter",youtubeHandle:"youtube",twitchHandle:"twitch"}[e];if(!t)return void N.default.error("Invalid platform");await l(e,t),N.default.success(`${t} removed successfully`)}catch(e){console.error("Error deleting social link:",e)}},[l]),m=(0,r.useCallback)(()=>{i(null)},[]),g=(0,r.useMemo)(()=>c?.socialLinks||{twitterHandle:null,youtubeHandle:null,twitchHandle:null},[c]),y=Object.values(g).some(e=>e),v=(0,r.useCallback)(e=>{let t=g[e];if(!t)return null;let r=ej.find(t=>t.key===e)?.placeholder||"";return r&&t.startsWith(r)?t.slice(r.length):t},[g]);return y||e?(0,t.jsxs)("div",{className:"relative group w-full",children:[(0,t.jsx)("div",{className:"flex flex-col gap-[4px] w-full",children:ej.filter(e=>"youtubeHandle"!==e.key).map(r=>{let s=v(r.key),l=!!s;if(!e&&!l)return null;if(!e){let e=`${r.placeholder}${s}`;return(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:`text-textSecondary ${r.color} transition-colors w-full flex items-center gap-2 px-[12px] py-[8px]`,title:r.label,children:[(0,t.jsx)("i",{className:`${r.icon} text-[20px]`}),s]},r.key)}return(0,t.jsx)("div",{className:"relative w-full",children:l?(0,t.jsxs)("div",{className:"pl-[10px] pr-[8px] py-[8px] h-[40px] text-textPrimary text-[14px] rounded-[6px] flex items-center gap-2 w-full",children:[(0,t.jsx)("i",{className:`${r.icon} text-[16px]`}),(0,t.jsx)("span",{className:"flex-1",children:s}),(0,t.jsx)(h.Tooltip,{content:a("Unlink account"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:()=>p(r.key),className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full",children:(0,t.jsx)("i",{className:"ri-link-unlink-m text-[16px] text-textPrimary/90"})})})]}):(0,t.jsxs)("button",{type:"button",onClick:()=>x(r.key),className:"group/row px-[10px] py-[8px] h-[40px] text-textPrimary text-[14px] rounded-[6px] hover:bg-textPrimary/[0.05] transition-colors duration-125 ease-in-out flex items-center gap-2 w-full",children:[(0,t.jsx)("i",{className:`${r.icon} text-[16px] text-textSecondary group-hover/row:text-textPrimary transition-colors duration-125 ease-in-out`}),(0,t.jsxs)("span",{className:"font-medium text-[14px]",children:["Verify ",r.label]})]})},r.key)})}),"twitter"===n&&(0,t.jsx)(ev,{onClose:m}),"twitch"===n&&(0,t.jsx)(ew,{onClose:m})]}):(0,t.jsx)("div",{className:"flex items-center gap-2 text-textSecondary",children:(0,t.jsx)("span",{className:"text-[14px]",children:"No social links added"})})});e.s(["ProfileSocialLinks",0,ek],616604);var eN=e.i(937491),eS=e.i(101380),eP=e.i(538701);let eA=(0,r.memo)(function({sharedTheme:e}){let{t:a}=(0,f.useTranslation)(),[l,n]=(0,s.useAtom)(eP.themeAtom),o=(0,s.useSetAtom)(eP.selectedPresetAtom),[i,c]=(0,ei.useSettings)("customFontUrl",""),[u,d]=(0,r.useState)(null),x=(0,r.useMemo)(()=>e?(0,eN.getCurrentThemeColors)(e.primaryColor,e.isBrighterTheme,e.colorOverrides):null,[e]),p=(0,r.useCallback)(()=>{if(e)try{let t={...l,fontUrl:i};if(d(t),!e.primaryColor||!/^#[0-9A-F]{6}$/i.test(e.primaryColor))return void N.default.error(a("Invalid primary color format"));if(e.colorOverrides){let t=["background","backgroundSecondary","backgroundTertiary","primaryStroke","secondaryStroke","borderSubtle","textPrimary","textSecondary","textTertiary","increase","decrease","increaseHover","decreaseHover","chartUp","chartDown","chartUpBorder","chartUpWick","chartDownBorder","chartDownWick","primaryGreen","primaryYellow","primaryOrange","primaryOrangeHover","primaryRed","primaryLightBlue"];for(let r of Object.keys(e.colorOverrides)){if(!t.includes(r))return void N.default.error(a("Invalid color override key: ")+r);let s=e.colorOverrides[r];if(s&&!/^#[0-9A-F]{6}$/i.test(s))return void N.default.error(a("Invalid color format for ")+r+": "+s)}}let r=e.backgroundType||"solid",s={primaryColor:e.primaryColor,isBrighterTheme:e.isBrighterTheme||!1,colorOverrides:e.colorOverrides||{}};"gradient"===r?n({...l,...s,backgroundType:"gradient",gradientStartColor:e.gradientStartColor||"#181c27",gradientEndColor:e.gradientEndColor||"#131722"}):n({...l,...s,backgroundType:"solid",chartBackgroundColor:e.chartBackgroundColor||e.colorOverrides?.backgroundSecondary||eN.DEFAULT_COLORS.backgroundSecondary}),c(e.fontUrl||""),o("preset9"),N.default.success(a("Theme applied successfully"))}catch(e){console.error("Error applying theme:",e),N.default.error(a("Failed to apply theme"))}},[e,l,i,n,c,o,a]),m=(0,r.useCallback)(()=>{if(u)try{let e=u.backgroundType||"solid",t={primaryColor:u.primaryColor,isBrighterTheme:u.isBrighterTheme||!1,colorOverrides:u.colorOverrides||{}};"gradient"===e?n({...l,...t,backgroundType:"gradient",gradientStartColor:u.gradientStartColor||"#181c27",gradientEndColor:u.gradientEndColor||"#131722"}):n({...l,...t,backgroundType:"solid",chartBackgroundColor:u.chartBackgroundColor||u.colorOverrides?.backgroundSecondary||eN.DEFAULT_COLORS.backgroundSecondary}),c(u.fontUrl||""),d(null),N.default.success(a("Theme reverted successfully"))}catch(e){console.error("Error reverting theme:",e),N.default.error(a("Failed to revert theme"))}},[u,l,n,c,a]);if(!e||!x)return null;let h=e.primaryColor||"#526FFF",b=(0,eS.brightenHexColor)(h,10);return(0,t.jsx)("div",{className:"flex flex-col gap-[12px]",children:(0,t.jsxs)("div",{className:"relative border-[2px] border-white/5 rounded-[12px] overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.035] border-[1px] rounded-[12px] z-[15] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsxs)("div",{className:"relative z-[15] p-3 flex flex-col gap-[12px]",children:[(0,t.jsxs)("div",{className:"relative rounded-[4px] flex flex-row w-full h-[180px] overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full rounded-[4px] z-30"}),(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/10 border rounded-[4px] z-20"}),(0,t.jsx)("div",{className:"flex flex-col p-[12px] pb-[14px] items-center justify-center inset-0 w-full h-full rounded-[4px] z-10",style:{background:`radial-gradient(circle at 70% 40%, ${b} 0%, ${h} 70%)`},children:(0,t.jsxs)("div",{className:"flex flex-col gap-[8px] w-full h-full rounded-[4px] z-10 justify-start items-center",style:{backgroundColor:x.background||"#090909"},children:[(0,t.jsx)("div",{className:"flex flex-row w-full h-[14px] min-h-[13px] border-b-[1px]",style:{borderBottomColor:x.primaryStroke||"#22242D"}}),(0,t.jsxs)("div",{className:"flex flex-row w-full justify-end items-center pr-[8px] gap-[4px]",children:[(0,t.jsx)("div",{className:" w-[13px] h-[6px] flex flex-row justify-center items-center rounded-full",style:{backgroundColor:x.primaryStroke||"#22242D"}}),(0,t.jsx)("div",{className:" w-[13px] h-[6px] flex flex-row justify-center items-center rounded-full",style:{backgroundColor:h}})]}),(0,t.jsx)("div",{className:"flex flex-row w-full h-full px-[8px]",children:(0,t.jsx)("div",{className:"border flex flex-row w-full h-full rounded-[4px]",style:{borderColor:x.primaryStroke||"#22242D",backgroundColor:x.backgroundSecondary||"#101114"}})}),(0,t.jsx)("div",{className:"flex flex-row w-full h-[9px] min-h-[9px] border-t-[1px]",style:{borderTopColor:x.primaryStroke||"#22242D"}})]})})]}),(0,t.jsxs)("div",{className:"flex flex-row flex-1 pb-[6px] pt-[10px] min-h-[4px] justify-center items-center gap-[12px] relative z-[15]",children:[(0,t.jsx)("button",{type:"button",onClick:m,disabled:!u,className:`backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row pl-[10px] pr-[8px] h-[32px] justify-center items-center gap-[4px] rounded-full flex-1 ${u?"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] text-textPrimary cursor-pointer":"bg-textPrimary/[0.05] text-textTertiary cursor-not-allowed opacity-50"}`,children:(0,t.jsx)("span",{className:"text-[14px] font-medium truncate whitespace-nowrap",children:a("Undo")})}),(0,t.jsx)("button",{type:"button",className:"h-[32px] px-[12px] rounded-full transition-all duration-150 flex justify-center items-center gap-[6px] whitespace-nowrap flex-1 hover:opacity-80",style:{backgroundColor:h},onClick:p,children:(0,t.jsx)("span",{className:"text-[14px] font-bold truncate",style:{color:x.background||"#090909"},children:a("Use Theme")})})]})]})]})})});var eC=e.i(664727),eT=e.i(530589);let eI={width:1200,height:300},eM={width:400,height:400},e$=(0,r.memo)(function({isOpen:e,onClose:s,imageUploadSize:a,onUpload:l,title:n="Upload Image"}){let{t:o}=(0,f.useTranslation)(),[i,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[x,p]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[b,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)({x:0,y:0,width:0,height:0}),[w,j]=(0,r.useState)(!1),[k,N]=(0,r.useState)(null),[S,P]=(0,r.useState)({x:0,y:0}),[A,C]=(0,r.useState)({x:0,y:0,width:0,height:0}),T=(0,r.useRef)(null),I=(0,r.useRef)(null),M=a.width/a.height;(0,r.useEffect)(()=>{e||(c(null),d(null),p(null),h(null),v({x:0,y:0,width:0,height:0}))},[e]),(0,r.useEffect)(()=>()=>{u&&URL.revokeObjectURL(u)},[u]);let B=(0,r.useCallback)(e=>{let t=e.target.files?.[0];if(t?.type.startsWith("image/")){c(t),u&&URL.revokeObjectURL(u);let e=URL.createObjectURL(t);d(e);let r=new Image;r.onload=()=>{let e,t,s=r.width,a=r.height;p({width:s,height:a});let l=Math.min(400/s,350/a,1),n=s*l,o=a*l;h({width:n,height:o}),n/M<=o?(e=n,t=n/M):(t=o,e=o*M),v({x:(n-e)/2,y:(o-t)/2,width:e,height:t})},r.src=e}e.target.value=""},[u,M]),L=(0,r.useCallback)((e,t=null)=>{e.preventDefault(),e.stopPropagation();let r=I.current?.getBoundingClientRect();if(!r)return;let s="touches"in e?e.touches[0].clientX:e.clientX,a="touches"in e?e.touches[0].clientY:e.clientY;P({x:s-r.left,y:a-r.top}),C({...y}),t?N(t):j(!0)},[y]),U=(0,r.useCallback)(e=>{if(!w&&!k||!m)return;let t=I.current?.getBoundingClientRect();if(!t)return;let r="touches"in e?e.touches[0].clientX:e.clientX,s="touches"in e?e.touches[0].clientY:e.clientY,a=r-t.left,l=s-t.top,n=a-S.x,o=l-S.y;if(w){let e=A.x+n,t=A.y+o;e=Math.max(0,Math.min(m.width-y.width,e)),t=Math.max(0,Math.min(m.height-y.height,t)),v(r=>({...r,x:e,y:t}))}else if(k){let e=A.width,t=A.height,r=A.x,s=A.y;if("bottom-right"===k){let a=Math.abs(n)>Math.abs(o*M)?n:o*M;t=(e=Math.max(50,A.width+a))/M,r+e>m.width&&(t=(e=m.width-r)/M),s+t>m.height&&(e=(t=m.height-s)*M)}else if("bottom-left"===k){let a=-n,l=Math.abs(a)>Math.abs(o*M)?a:o*M;t=(e=Math.max(50,A.width+l))/M,(r=A.x+A.width-e)<0&&(r=0,t=(e=A.x+A.width)/M),s+t>m.height&&(e=(t=m.height-s)*M,r=A.x+A.width-e)}else if("top-right"===k){let a=Math.abs(n)>Math.abs(-o*M)?n:-o*M;t=(e=Math.max(50,A.width+a))/M,s=A.y+A.height-t,r+e>m.width&&(t=(e=m.width-r)/M,s=A.y+A.height-t),s<0&&(s=0,e=(t=A.y+A.height)*M)}else if("top-left"===k){let a=-n,l=Math.abs(a)>Math.abs(-o*M)?a:-o*M;t=(e=Math.max(50,A.width+l))/M,r=A.x+A.width-e,s=A.y+A.height-t,r<0&&(r=0,t=(e=A.x+A.width)/M,s=A.y+A.height-t),s<0&&(s=0,e=(t=A.y+A.height)*M,r=A.x+A.width-e)}e>=50&&t>=50/M&&v({x:r,y:s,width:e,height:t})}},[w,k,S,A,m,y.width,y.height,M]),F=(0,r.useCallback)(()=>{j(!1),N(null)},[]),E=(0,r.useCallback)(async()=>{if(i&&u&&x&&m)try{let e=new Image;e.src=u,await new Promise((t,r)=>{e.onload=t,e.onerror=r});let t=x.width/m.width,r=x.height/m.height,n=y.x*t,o=y.y*r,c=y.width*t,d=y.height*r,p=document.createElement("canvas");p.width=a.width,p.height=a.height;let f=p.getContext("2d");if(!f)throw Error("Could not get canvas context");f.fillStyle="black",f.fillRect(0,0,a.width,a.height),f.drawImage(e,n,o,c,d,0,0,a.width,a.height);let h=await new Promise((e,t)=>{p.toBlob(r=>{r?e(r):t(Error("Failed to create blob"))},"image/webp",.9)}),b=new File([h],i.name,{type:"image/webp"});l(b),s()}catch(e){console.error("Error cropping image:",e)}},[i,u,x,m,a,y,l,s]),R=(0,r.useCallback)(()=>{b&&s()},[b,s]);return e?(0,$.createPortal)((0,t.jsx)(eT.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-[#090909]/80 backdrop-blur-[2px] flex items-center justify-center z-[9999]",onClick:R,onMouseDown:e=>{e.target===e.currentTarget&&g(!0)},onMouseUp:()=>{requestAnimationFrame(()=>{g(!1)})},children:(0,t.jsxs)(eT.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-[460px] max-w-[90vw] bg-backgroundTertiary border-[1px] border-secondaryStroke rounded-[4px] shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",onClick:e=>e.stopPropagation(),onMouseUp:F,onMouseLeave:F,onMouseMove:U,onTouchEnd:F,onTouchCancel:F,onTouchMove:U,children:[(0,t.jsxs)("div",{className:"flex flex-row w-full min-h-[44px] h-[44px] pl-[16px] pr-[12px] justify-between items-center border-b-[1px] border-b-secondaryStroke",children:[(0,t.jsx)("span",{className:"text-textPrimary text-[14px] leading-[20px] tracking-[-0.02em] font-medium",children:o(n)}),(0,t.jsx)("button",{type:"button",className:"group flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-secondaryStroke/20 rounded-[4px] transition-colors duration-150 ease-in-out",onClick:s,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px] group-hover:text-textPrimary"})})]}),(0,t.jsx)("input",{ref:T,type:"file",accept:"image/*",onChange:B,className:"hidden"}),(0,t.jsx)("div",{className:"flex flex-col flex-1 w-full p-[16px] gap-[16px]",children:u?(0,t.jsx)("div",{className:"flex flex-col items-center gap-[16px]",children:m&&(0,t.jsxs)("div",{ref:I,className:"relative select-none",style:{width:m.width,height:m.height},children:[(0,t.jsx)("img",{src:u,alt:"Preview",className:"pointer-events-none rounded-[4px]",draggable:!1,style:{width:m.width,height:m.height}}),(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:0,left:0,right:0,height:y.y}}),(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:y.y+y.height,left:0,right:0,bottom:0}}),(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:y.y,left:0,width:y.x,height:y.height}}),(0,t.jsx)("div",{className:"absolute bg-black/60",style:{top:y.y,left:y.x+y.width,right:0,height:y.height}})]}),(0,t.jsxs)("div",{className:"absolute cursor-move border-2 border-white/80 touch-none",style:{left:y.x,top:y.y,width:y.width,height:y.height},onMouseDown:e=>L(e,null),onTouchStart:e=>L(e,null),children:[(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none grid grid-cols-3 grid-rows-3",children:["tl","tm","tr","ml","mm","mr","bl","bm","br"].map(e=>(0,t.jsx)("div",{className:"border-[0.5px] border-white/20"},e))}),(0,t.jsx)("div",{className:"absolute -top-[6px] -left-[6px] w-[12px] h-[12px] bg-white rounded-full cursor-nwse-resize shadow-md touch-none",onMouseDown:e=>L(e,"top-left"),onTouchStart:e=>L(e,"top-left")}),(0,t.jsx)("div",{className:"absolute -top-[6px] -right-[6px] w-[12px] h-[12px] bg-white rounded-full cursor-nesw-resize shadow-md touch-none",onMouseDown:e=>L(e,"top-right"),onTouchStart:e=>L(e,"top-right")}),(0,t.jsx)("div",{className:"absolute -bottom-[6px] -left-[6px] w-[12px] h-[12px] bg-white rounded-full cursor-nesw-resize shadow-md touch-none",onMouseDown:e=>L(e,"bottom-left"),onTouchStart:e=>L(e,"bottom-left")}),(0,t.jsx)("div",{className:"absolute -bottom-[6px] -right-[6px] w-[12px] h-[12px] bg-white rounded-full cursor-nwse-resize shadow-md touch-none",onMouseDown:e=>L(e,"bottom-right"),onTouchStart:e=>L(e,"bottom-right")})]})]})}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center gap-[12px]",children:(0,t.jsxs)("button",{type:"button",onClick:()=>T.current?.click(),className:"flex flex-col items-center justify-center w-full h-[200px] border-[2px] border-dashed border-secondaryStroke rounded-[8px] hover:border-primaryBlue hover:bg-primaryBlue/5 transition-all duration-150 cursor-pointer group",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-[48px] h-[48px] rounded-full bg-secondaryStroke/30 group-hover:bg-primaryBlue/20 transition-colors duration-150 mb-[12px]",children:(0,t.jsx)("i",{className:"ri-upload-cloud-2-line text-[24px] text-textSecondary group-hover:text-primaryBlue transition-colors duration-150"})}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium",children:o("Click to upload")}),(0,t.jsx)("span",{className:"text-textTertiary text-[11px] mt-[8px]",children:"PNG, JPG, GIF, WEBP"})]})})}),(0,t.jsxs)("div",{className:"flex flex-row w-full h-[56px] px-[16px] py-[12px] justify-between items-center border-t-[1px] border-t-secondaryStroke",children:[(0,t.jsx)("div",{children:u&&(0,t.jsx)("button",{type:"button",onClick:()=>T.current?.click(),className:"text-primaryBlue text-[12px] hover:text-primaryBlueHover transition-colors duration-150",children:o("Or choose different image")})}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[8px]",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"flex flex-row h-[32px] px-[16px] justify-center items-center rounded-[4px] bg-secondaryStroke/30 hover:bg-secondaryStroke/50 transition-colors duration-150",children:(0,t.jsx)("span",{className:"text-textPrimary text-[13px] font-medium",children:o("Cancel")})}),(0,t.jsx)("button",{type:"button",onClick:E,disabled:!u,className:"flex flex-row h-[32px] px-[16px] justify-center items-center rounded-[4px] bg-primaryBlue hover:bg-primaryBlueHover disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-150",children:(0,t.jsx)("span",{className:"text-white text-[13px] font-medium",children:o("Confirm")})})]})]})]})}),document.body):null});e.s(["UploadImageModal",0,e$,"bannerImageSize",0,eI,"profileImageSize",0,eM],759919);var eB=e.i(973444),eL=e.i(938943);let eU=({userProfile:e,handleStatusChange:r,onClose:s})=>(0,t.jsx)("div",{className:"flex flex-col gap-[4px] p-[4px] w-[96px]",children:ee.map(a=>{let l=e?.forcedStatus===a||!e?.forcedStatus&&"online"===a;return(0,t.jsxs)("button",{type:"button",className:`relative flex items-center gap-[8px] px-[12px] hover:bg-secondaryStroke/60 hover:opacity-100 hover:grayscale-0 ${l?"bg-secondaryStroke/40":"opacity-90 grayscale-[0.25]"} rounded-[4px] w-full text-left justify-start h-[32px] group overflow-hidden`,onClick:()=>{r(a),s?.()},children:[(0,t.jsx)("div",{className:"w-[14px] h-[14px] rounded-full flex items-center justify-center bg-backgroundTertiary flex-shrink-0",children:(0,t.jsx)("div",{className:`w-[10px] h-[10px] rounded-full ${"offline"===a?"border-[2px] border-textTertiary":"away"===a?"bg-primaryOrange":"bg-primaryGreen"}`})}),(0,t.jsx)("span",{className:`text-[12px] leading-[16px] font-medium capitalize ${l?"text-textPrimary":"text-textSecondary"}`,children:a})]},a)})}),eF=(0,r.memo)(function({setIsEditing:e,handleSave:r,handleCancel:s,isEditing:a,editedColor:l,setEditedColor:n,originalColor:o}){let{t:i}=(0,f.useTranslation)();return(0,t.jsx)("div",{className:"flex flex-row items-center gap-[6px]",children:a?(0,t.jsxs)(t.Fragment,{children:[l&&n&&(0,t.jsx)("div",{className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row px-[10px] h-[32px] justify-center items-center gap-[4px] rounded-full max-w-full",children:(0,t.jsx)(et.ColorPicker,{color:l,onChange:n,onReset:()=>n(o||"#000000"),label:""})}),(0,t.jsx)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row px-[10px] h-[32px] justify-center items-center gap-[4px] rounded-full max-w-full",onClick:s,children:(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:i("Cancel")})}),(0,t.jsx)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row px-[10px] h-[32px] justify-center items-center gap-[4px] rounded-full max-w-full",onClick:r,children:(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:i("Save")})})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(h.Tooltip,{content:"Edit Profile",position:"top",children:(0,t.jsxs)("button",{type:"button",className:"backdrop-blur-md bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row pl-[8px] pr-[10px] h-[32px] justify-center items-center gap-[4px] rounded-full max-w-full",onClick:()=>e(!0),children:[(0,t.jsx)("i",{className:"ri-pencil-line text-[14px] text-textPrimary/90 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-textPrimary text-[14px] font-medium truncate whitespace-nowrap",children:i("Edit")})]})})})})}),eE=(0,r.memo)(function(){let e=(0,s.useAtomValue)(b.userProfileAtom),l=(0,s.useAtomValue)(a.userIdAtom),n=(0,s.useAtomValue)(b.friendProfileDataAtom),i=(0,s.useAtomValue)(g.myLobbyInfoAtom),{updateUserProfilePicture:c,updateUserBanner:d}=(0,o.useSocialTracker)(),{socialApiPost:x}=(0,H.useRateLimitedSocialApi)(H.socialApiRateLimitAtom),{t:p}=(0,f.useTranslation)(),{color:m,username:k,bio:S,avatarUrl:P,bannerUrl:A,socialLinks:C,currentPage:T,currentSubpage:I,currentChain:M,lastUpdatedTimestamp:$}=(0,r.useMemo)(()=>n&&n.userProfile.userId!==e?.userId?{userId:n.userProfile.userId,username:n.userProfile.username,avatarUrl:n.userProfile.avatarUrl,bannerUrl:n.userProfile.bannerUrl,color:n.userProfile.color||"#000000",socialLinks:n.userProfile.socialLinks,bio:null,currentPage:n.currentPage||"Unknown",currentChain:n.currentChain||null,currentSubpage:n.currentSubpage||null,lastUpdatedTimestamp:n.lastUpdatedTimestamp||0}:{userId:e?.userId,username:e?.username,avatarUrl:e?.avatarUrl,bannerUrl:e?.bannerUrl,color:e?.color||"#000000",socialLinks:{twitterHandle:e?.socialLinks?.twitterHandle||null,youtubeHandle:e?.socialLinks?.youtubeHandle||null,twitchHandle:e?.socialLinks?.twitchHandle||null},bio:e?.bio,currentPage:"Unknown",currentSubpage:null,lastUpdatedTimestamp:0,currentChain:null},[e,n]),B=(0,r.useMemo)(()=>null===n||n?.userProfile.userId===e?.userId,[n,e?.userId]),L=(0,r.useMemo)(()=>!!i&&!!n&&i.members.some(e=>e.userProfile.userId===n.userProfile.userId),[i,n]),[U,F]=(0,r.useState)(null),E=(0,r.useMemo)(()=>n&&U?U.bio:S,[n,U,S]),[R,_]=(0,r.useState)(!1),[z,D]=(0,r.useState)(k),[O,W]=(0,r.useState)(E),[V,q]=(0,r.useState)(m||"#000000"),[G,K]=(0,r.useState)(!1),[Y,J]=(0,r.useState)("profile"),{updateUserProfile:Q,addFriend:ee}=(0,o.useSocialTracker)();(0,r.useEffect)(()=>{D(k),W(E),q(m||"#000000")},[k,E,m]);let et=(0,r.useCallback)(async()=>{try{Q({username:z,bio:O??void 0,color:V})}catch{N.default.error("Error updating profile")}finally{_(!1)}},[z,O,V,Q]),es=(0,r.useCallback)(()=>{D(k),W(E),q(m||"#000000"),_(!1)},[k,E,m]),ea=(0,r.useCallback)(async e=>{try{await c(e)}catch(e){console.error("Error updating profile picture:",e)}finally{_(!1)}},[c]),el=(0,r.useCallback)(async e=>{try{await d(e)}catch(e){console.error("Error updating banner:",e)}finally{_(!1)}},[d]),en=(0,r.useCallback)(()=>{J("banner"),K(!0)},[]),eo=(0,r.useCallback)(()=>{J("profile"),K(!0)},[]),ei=(0,r.useCallback)(async e=>{Q({forcedStatus:e})},[Q]),ec=(0,s.useAtomValue)(b.usernameToDataAtom),{removeFriend:eu}=(0,o.useSocialTracker)(),{inviteToLobby:ed,requestJoinLobby:ex}=(0,u.useLobbyApi)(),[ep,em]=(0,r.useState)(!1),ef=(0,r.useCallback)(()=>{em(!0)},[]),eh=(0,r.useCallback)(async()=>{if(n?.userProfile.username){let e=ec.get(n?.userProfile.username)?.relationshipId;if(!e)return void N.default.error("Friend not found");await eu(e)}else N.default.error("Friend not found")},[eu,ec,n?.userProfile.username]),eb=(0,r.useMemo)(()=>{if(!k)return!1;let e=ec.get(k);return e?.relationshipType==="accepted"},[ec,k]),ey=(0,r.useCallback)(()=>{k&&ee(k)},[ee,k]),ev=(0,s.useAtomValue)(b.sharedPresetsAtom),[ew,ej]=(0,r.useState)(null),eN=(0,s.useAtomValue)(b.sharedThemeAtom),[eS,eP]=(0,r.useState)(null),eT=(0,r.useMemo)(()=>{if(!ew)return!1;let e=ew.sol&&(ew.sol.newPairs||ew.sol.finalStretch||ew.sol.migrated),t=ew.bnb&&(ew.bnb.newPairs||ew.bnb.finalStretch||ew.bnb.migrated);return e||t},[ew]),eL=(0,r.useMemo)(()=>!!(ew?.sol&&(ew.sol.newPairs||ew.sol.finalStretch||ew.sol.migrated)),[ew]),eE=(0,r.useMemo)(()=>!!(ew?.bnb&&(ew.bnb.newPairs||ew.bnb.finalStretch||ew.bnb.migrated)),[ew]),e_=(0,r.useMemo)(()=>!!eS&&!!eS.primaryColor,[eS]),[ez,eD]=(0,r.useState)("Filters"),[eH,eO]=(0,r.useState)("sol");(0,r.useEffect)(()=>{eT&&!e_?eD("Filters"):e_&&!eT&&eD("Theme")},[eT,e_]),(0,r.useEffect)(()=>{eL&&!eE?eO("sol"):eE&&!eL?eO("bnb"):eL&&eE&&eO("sol")},[eL,eE]),(0,r.useEffect)(()=>{(async()=>{if(B)ej(ev||null),eP(eN||null);else{F(null);let{sharedPresets:e,sharedTheme:t,bio:r,forcedStatus:s}=await x("/get-shared-profile",{userId:n?.userProfile.userId},void 0,l??void 0);if(F({bio:r??null,forcedStatus:s??null}),t&&eP(t),e)try{ej({sol:{newPairs:e.sol?.newPairs||null,finalStretch:e.sol?.finalStretch||null,migrated:e.sol?.migrated||null},bnb:{newPairs:e.bnb?.newPairs||null,finalStretch:e.bnb?.finalStretch||null,migrated:e.bnb?.migrated||null}})}catch{console.error("Error parsing shared presets:",e),N.default.error("Error parsing shared presets")}}})()},[l,B,n,ev,eN,x]);let eW=(0,r.useMemo)(()=>B?e?.forcedStatus!=="offline":n?.presence!=="offline",[B,n?.presence,e?.forcedStatus]),eV=(0,r.useMemo)(()=>{if(B){let t=e?.forcedStatus;return"offline"===t?"border-[3px] border-textTertiary":"away"===t?"bg-primaryOrange":"bg-primaryGreen"}return eW?"away"===U?.forcedStatus?"bg-primaryOrange":"bg-primaryGreen":"border-[3px] border-textTertiary"},[B,e?.forcedStatus,U?.forcedStatus,eW]),eq=(0,r.useMemo)(()=>B?e?.forcedStatus||"online":eW?"away"===n?.presence?"away":"online":"offline",[B,e?.forcedStatus,n?.presence,eW]),eG=(0,r.useMemo)(()=>{let e=(R?V:m)||"#FFFFFF";if(e.startsWith("#")){let t=e.slice(1),r=parseInt(t.substring(0,2),16),s=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);return`rgba(${r}, ${s}, ${a}, 0.20)`}return e},[R,V,m]);return!k&&B?(0,t.jsx)(eR,{}):e?(0,t.jsxs)("div",{className:"flex flex-col h-full w-full relative overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[(0,t.jsxs)("div",{className:"relative w-full aspect-[3/1] flex-shrink-0 overflow-hidden group bg-background",children:[(0,t.jsx)(y.default,{src:A||(0,j.generateDefaultBanner)(k),alt:k||"",fill:!0,className:"object-cover",draggable:!1}),B&&(0,t.jsx)("button",{type:"button",onClick:en,className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 flex items-center justify-center z-5 transition-all duration-200 opacity-0 group-hover:opacity-100",children:(0,t.jsx)("i",{className:"ri-camera-line text-white text-[32px]"})}),!B&&(0,t.jsxs)("div",{className:"absolute top-[8px] left-[8px] z-[20] flex flex-row gap-[6px] items-center",children:[!L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Tooltip,{content:"Invite to lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[32px] h-[32px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:e=>{e.stopPropagation();let t=ec.get(n?.userProfile.username||"")?.relationshipId;t&&ed(t)},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})}),(0,t.jsx)(h.Tooltip,{content:"Request to join lobby",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[32px] h-[32px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:e=>{e.stopPropagation();let t=ec.get(n?.userProfile.username||"")?.relationshipId;t&&ex(t)},children:(0,t.jsx)("i",{className:"ri-login-box-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})})]}),eb?(0,t.jsx)(h.Tooltip,{content:"Remove Friend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[32px] h-[32px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:e=>{e.stopPropagation(),ef()},children:(0,t.jsx)("i",{className:"ri-user-minus-line text-[16px] text-decrease/80 transition-colors duration-[125ms] ease-in-out"})})}):(0,t.jsx)(h.Tooltip,{content:"Add Friend",position:"top",children:(0,t.jsx)("button",{type:"button",className:"group/btn bg-gray-500/15 hover:bg-gray-500/20 flex flex-row w-[32px] h-[32px] justify-center items-center rounded-full transition-all duration-[125ms] ease-in-out cursor-pointer",onClick:e=>{e.stopPropagation(),ey()},children:(0,t.jsx)("i",{className:"ri-user-add-line text-[16px] text-white/80 transition-colors duration-[125ms] ease-in-out"})})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col px-[16px] pb-[18px] relative flex-shrink-0",children:[(0,t.jsxs)("div",{className:"absolute -left-[16px] right-0 top-[0px] h-[20px] opacity-[1] pointer-events-none z-[0] overflow-hidden",style:{maskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)",WebkitMaskImage:"linear-gradient(to bottom, black 0%, black 50%, transparent 100%)"},children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full blur-[80px] saturate-[1.3] brightness-[0.65]",children:A?(0,t.jsx)(y.default,{src:A,alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",onError:e=>{e.currentTarget.src=""},loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(y.default,{src:(0,j.generateDefaultBanner)(k),alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px] scale-110",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[400px] h-[400px] rounded-full blur-[60px] opacity-30",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[300px] h-[300px] rounded-full blur-[50px] opacity-25",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}})]}),(0,t.jsxs)("div",{className:"flex flex-row items-end gap-[8px] -mt-[44px] mb-[6px] relative z-[10] pointer-events-none",children:[(0,t.jsxs)("div",{className:"relative flex-shrink-0 overflow-visible",children:[(0,t.jsxs)("div",{className:"relative w-[88px] h-[88px] rounded-full shadow-lg group overflow-visible pointer-events-auto",children:[(0,t.jsx)("div",{className:"absolute -inset-[4px] rounded-full bg-backgroundTertiary z-[0]"}),B&&(0,t.jsx)("button",{type:"button",onClick:eo,className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 flex items-center justify-center z-10 transition-all duration-200 opacity-0 group-hover:opacity-100 rounded-full pointer-events-auto",children:(0,t.jsx)("i",{className:"ri-camera-line text-white text-[24px]"})}),(0,t.jsxs)("div",{className:"relative w-full h-full rounded-full overflow-hidden flex-shrink-0 z-[1]",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full border-white/[0.1] border-[1px] z-[15] pointer-events-none rounded-full"}),(0,t.jsx)(y.default,{src:P||(0,w.generateDefaultProfilePicture)(k),alt:k||"",width:88,height:88,className:"object-cover flex-shrink-0"})]})]}),(0,t.jsx)(h.Tooltip,{content:B?p("Update Status"):eq,position:"top",children:(0,t.jsx)("div",{className:`absolute bottom-[4px] left-[44px] h-[22px] px-[6px] rounded-full z-[20] flex items-center justify-center gap-[4px] flex-shrink-0 pointer-events-auto bg-secondaryStroke border border-white/[0.035] ${B?"hover:brightness-110 cursor-pointer":"cursor-default"} transition-brightness duration-150 ease-in-out`,children:B?(0,t.jsx)(Z.Dropdown,{trigger:(0,t.jsxs)("div",{className:"flex items-center gap-[5px] cursor-pointer pointer-events-auto",children:[(0,t.jsx)("div",{className:"w-[14px] h-[14px] rounded-full flex items-center justify-center bg-secondaryStroke flex-shrink-0",children:(0,t.jsx)("div",{className:`w-[10px] h-[10px] rounded-full ${eV}`})}),(0,t.jsx)("span",{className:"text-[12px] font-medium text-textSecondary capitalize",children:eq})]}),align:"left",position:"bottom",scrimColor:!1,children:(0,t.jsx)(eU,{userProfile:e,handleStatusChange:ei})}):(0,t.jsxs)("div",{className:"flex items-center gap-[5px]",children:[(0,t.jsx)("div",{className:"w-[14px] h-[14px] rounded-full flex items-center justify-center bg-secondaryStroke flex-shrink-0",children:(0,t.jsx)("div",{className:`w-[10px] h-[10px] rounded-full ${eV}`})}),(0,t.jsx)("span",{className:"text-[12px] font-medium text-textSecondary capitalize",children:eq})]})})})]}),(0,t.jsx)("div",{className:"flex-1 flex flex-row justify-end items-start min-w-0 h-[32px] max-h-[32px] min-h-[32px] pointer-events-auto",children:B?(0,t.jsx)(eF,{setIsEditing:_,handleSave:et,handleCancel:es,isEditing:R,editedColor:V,setEditedColor:q,originalColor:m}):(0,t.jsx)(v.FriendActivityButton,{lastPage:T??null,subpage:I??null,currentChain:M,isOnline:eW,lastPresenceUpdateTimestamp:$,size:"small"})})]}),(0,t.jsx)("div",{className:"flex flex-row h-[24px] min-h-[24px] max-h-[24px] justify-between items-center relative z-[10]",children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[10px]",children:[R?(0,t.jsx)("input",{type:"text",value:z,onChange:e=>D(e.target.value),className:"text-[16px] h-[32px] font-medium text-textPrimary bg-transparent border-b border-primaryStroke focus:border-primaryBlue outline-none w-fit transition-colors duration-150",placeholder:"Enter username"}):(0,t.jsx)(h.Tooltip,{content:p("Copy Username"),position:"top",children:(0,t.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),k&&((0,eB.handleCopy)(k),N.default.success({message:p("Username copied to clipboard"),icon:(0,t.jsx)("i",{className:"ri-clipboard-line text-primaryBlue text-[16px]"})},{duration:1500}))},className:"text-textPrimary hover:text-primaryBlueHover transition-colors duration-[125ms]",children:(0,t.jsx)("span",{className:"text-[16px] font-medium",children:k})})}),Object.values(C||{}).some(e=>null!==e)&&(0,t.jsxs)("div",{className:"flex flex-row items-center gap-[6px] max-h-[27px]",children:[C?.twitterHandle&&(0,t.jsx)("a",{href:C.twitterHandle.startsWith("http")?C.twitterHandle:`https://x.com/${C.twitterHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitter-x-line text-[16px] text-textPrimary/90"})}),C?.youtubeHandle&&(0,t.jsx)("a",{href:C.youtubeHandle.startsWith("http")?C.youtubeHandle:`https://youtube.com/@${C.youtubeHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-youtube-fill text-[16px] text-textPrimary/90"})}),C?.twitchHandle&&(0,t.jsx)("a",{href:C.twitchHandle.startsWith("http")?C.twitchHandle:`https://twitch.tv/${C.twitchHandle}`,target:"_blank",rel:"noopener noreferrer",className:"bg-textPrimary/[0.05] hover:bg-textPrimary/[0.1] hover:transition-colors hover:ease-in-out hover:duration-150 flex flex-row w-[28px] h-[28px] justify-center items-center rounded-full",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("i",{className:"ri-twitch-fill text-[16px] text-textPrimary/90"})})]})]})}),(B||E)&&(0,t.jsx)("div",{className:"mt-[12px] w-full relative z-[10]",children:(0,t.jsxs)("div",{className:"relative border-[2px] border-white/5 rounded-[12px] overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute -inset-x-[100px] inset-y-[0px] opacity-[0.55] z-[0]",children:[(0,t.jsx)("div",{className:"absolute inset-0 w-full h-full blur-[80px] saturate-[1.3] brightness-[0.65] rounded-[12px] overflow-hidden",children:A?(0,t.jsx)(y.default,{src:A,alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"}):(0,t.jsx)(y.default,{src:(0,j.generateDefaultBanner)(k),alt:"Banner Background",fill:!0,className:"object-cover opacity-[0.35]",loading:"eager",draggable:!1,sizes:"150px"})}),(0,t.jsx)("div",{className:"absolute left-0 right-0 bottom-0 h-[150px] bg-gradient-to-t from-background to-transparent z-10"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/[0.15] via-white/0 to-transparent blur-[20px] scale-110 rounded-[12px] z-[1]",style:{mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[400px] h-[400px] rounded-full blur-[60px] opacity-30 z-[1]",style:{top:"-10%",left:"15%",background:"radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.08) 40%, transparent 70%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute w-[300px] h-[300px] rounded-full blur-[50px] opacity-25 z-[1]",style:{bottom:"-20%",right:"20%",background:"radial-gradient(circle, rgba(255,255,255,0.35) 0%, rgba(255,255,255,0.05) 35%, transparent 65%)",mixBlendMode:"overlay"}}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] bg-gradient-to-br from-white/[0.02] to-transparent z-[5] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsx)("div",{className:"relative z-[15]",children:R?(0,t.jsxs)("div",{className:"relative",style:{background:`linear-gradient(to right, transparent 50%, ${eG})`},children:[(0,t.jsx)("textarea",{value:O??"",onChange:e=>{e.target.value.length<=100&&W(e.target.value)},maxLength:100,className:"text-[14px] text-textSecondary bg-transparent border-0 focus:border-0 outline-none px-[12px] pt-[8px] pb-[10px] resize-none w-full break-words relative z-[15]",placeholder:"Tell us about yourself...",rows:3}),(0,t.jsxs)("div",{className:"absolute bottom-[8px] right-[12px] text-[12px] text-textTertiary z-[20]",children:[O?.length||0," / ",100]})]}):E?(0,t.jsx)("div",{className:"text-[14px] text-textSecondary px-[12px] pt-[8px] pb-[10px] break-words relative z-[15]",style:{background:`linear-gradient(to right, transparent 50%, ${eG})`},children:E}):B&&(0,t.jsx)("div",{className:"text-[14px] text-textTertiary px-[12px] pt-[8px] pb-[10px] break-words relative z-[15]",style:{background:`linear-gradient(to right, transparent 50%, ${eG})`},children:"Tell us about yourself..."})})]})}),B&&(0,t.jsxs)("div",{className:"mt-[16px] w-full relative z-[10]",children:[(0,t.jsxs)("div",{className:"flex flex-row h-[28px] min-h-[28px] max-h-[28px] w-full items-center gap-[6px] mb-[6px]",children:[(0,t.jsx)("i",{className:"ri-link-m text-[16px] text-primaryBlueHover"}),(0,t.jsx)("span",{className:"text-[14px] text-textSecondary",children:p("Link Accounts")})]}),(0,t.jsxs)("div",{className:"relative border-[2px] p-[4px] border-white/5 rounded-[12px] overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute -inset-x-[1px] -inset-y-[1px] translate-y-[1px] border-white/[0.035] border-[1px] rounded-[12px] z-[15] pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-[12px] shadow-[inset_0_1px_2px_rgba(0,0,0,0.05)] z-[10] pointer-events-none"}),(0,t.jsx)("div",{className:"relative z-[15]",children:(0,t.jsx)(ek,{isUser:B})})]})]})]}),ep&&n&&(0,t.jsx)(X,{onClose:()=>em(!1),onConfirm:eh,username:n.userProfile.username}),(0,t.jsx)(e$,{isOpen:G,onClose:()=>K(!1),imageUploadSize:"banner"===Y?eI:eM,onUpload:"banner"===Y?el:ea,title:"banner"===Y?"Upload Banner":"Upload Profile Picture"}),(0,t.jsxs)("div",{className:"px-[16px] pb-[20px] gap-[12px] flex flex-col",children:[eT&&e_&&(0,t.jsxs)("div",{className:"flex flex-row h-[32px] min-h-[32px] max-h-[32px] justify-between items-center flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-[8px] items-center",children:[(0,t.jsx)(er.default,{selected:"Filters"===ez,onClick:()=>eD("Filters"),height:"h-[40px]",children:p("Filters")}),(0,t.jsx)(er.default,{selected:"Theme"===ez,onClick:()=>eD("Theme"),height:"h-[40px]",children:p("Theme")})]}),"Filters"===ez&&(0,t.jsx)(eC.ChainSelector,{selectedChain:eH,onChainChange:eO,hasSolPresets:eL,hasBnbPresets:eE})]}),(eT&&!e_||eT&&e_&&"Filters"===ez)&&ew&&(0,t.jsx)("div",{className:"px-[0px] flex flex-col",children:(0,t.jsx)(eg,{sharedPresets:ew,selectedChain:eH})}),(e_&&!eT||eT&&e_&&"Theme"===ez)&&eS&&(0,t.jsx)("div",{className:"px-[0px] flex flex-col",children:(0,t.jsx)(eA,{sharedTheme:eS})})]})]}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full",children:(0,t.jsx)("span",{className:"text-textSecondary text-[14px]",children:"Loading..."})})}),eR=(0,r.memo)(function(){let{t:e}=(0,f.useTranslation)(),[l,i]=(0,r.useState)(!1),c=(0,s.useAtomValue)(a.userIdAtom),u=(0,s.useAtomValue)(a.usernameAtom),{data:d}=(0,n.useSocialInfo)(c??"",u),{initializeSocialData:x}=(0,o.useSocialTracker)();return(0,r.useEffect)(()=>{d&&x(d)},[d,x]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-[16px] px-[24px]",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-[8px] text-center max-w-[400px]",children:[(0,t.jsx)("div",{className:"text-textSecondary text-[18px] font-medium tracking-[-0.02rem]",children:e("No username set")}),(0,t.jsx)("div",{className:"text-textTertiary text-[14px] leading-[20px]",children:e("Please set your username to continue")})]}),(0,t.jsx)("button",{type:"button",onClick:()=>i(!0),className:"bg-primaryBlue flex flex-row h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[16px] font-bold text-background",children:e("Set Username")})})]}),l&&(0,$.createPortal)((0,t.jsx)(eL.EditReferralModal,{onClose:()=>i(!1),onSuccess:()=>i(!1)}),document.body)]})});e.s(["ProfileBody",0,eE,"UserWithoutProfile",0,eR],692298);let e_=(0,r.memo)(function({isWindowModal:e=!1}){let n=(0,s.useAtomValue)(a.usernameAtom),o=(0,s.useAtomValue)(l.socialFriendsOpenAtom),i=(0,s.useSetAtom)(l.socialFriendsOpenAtom),u=(0,r.useCallback)(()=>{i(!1)},[i]);return n?(0,t.jsxs)("div",{className:"relative h-full overflow-hidden",children:[(0,t.jsx)("div",{className:"w-full h-full flex flex-col overflow-hidden",children:(0,t.jsx)(c.SocialLobby,{isWindowModal:e})}),(0,t.jsx)("button",{type:"button",className:`absolute inset-0 w-full h-full bg-[#090909]/80 backdrop-blur-[2px] cursor-pointer z-20 transition-all duration-200 ${o?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{transitionTimingFunction:"cubic-bezier(0.32, 0.72, 0, 1)"},onClick:u,"aria-label":"Close sidebar"}),(0,t.jsx)("div",{className:`absolute right-0 top-0 h-full w-[95%] z-30 transition-transform duration-[250ms] ${o?"translate-x-0":"translate-x-full"}`,style:{transitionTimingFunction:"cubic-bezier(0.32, 0.72, 0, 1)"},children:(0,t.jsx)(Q,{isOpen:o,isWindowModal:e})})]}):(0,t.jsx)(eR,{})}),ez=(0,r.memo)(function(){let e=(0,s.useAtomValue)(a.userIdAtom),t=(0,s.useAtomValue)(a.usernameAtom),{data:l}=(0,n.useSocialInfo)(e,t),{initializeSocialData:c}=(0,o.useSocialTracker)(),{initializeLobby:m}=(0,u.useLobbyApi)();return(0,r.useEffect)(()=>{l&&(c(l),m())},[l,c,m]),(0,i.useFriendWebsocket)(),(0,d.useUpdateSocialPrice)(),(0,x.useSocialTransactionsWebsocket)(),(0,p.useUpdateWallets)(),null});e.s(["SocialTrackerBody",0,e_,"SocialTrackerUpdater",0,ez],337587),e.s(["EditLobbyName",0,()=>{let e=(0,s.useAtomValue)(g.myLobbyInfoAtom),a=(0,s.useAtomValue)(b.userProfileIdAtom),{updateLobby:l}=(0,u.useLobbyApi)(),[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(null),c=a&&e?.leaderUserId===a;(0,r.useEffect)(()=>{n&&i.current&&(i.current.focus(),i.current.select())},[n]);let d=(0,r.useCallback)(async t=>{let r=t.trim();r?(r!==e?.name&&await l({name:r}),o(!1)):N.default.error("Lobby name cannot be empty")},[e?.name,l]),x=(0,r.useCallback)(t=>{t.stopPropagation(),"Enter"===t.key&&(t.preventDefault(),d(t.currentTarget.value)),"Escape"===t.key&&(t.currentTarget.value=e?.name||"",o(!1))},[d,e?.name]),p=(0,r.useCallback)(e=>{d(e.currentTarget.value)},[d]),m=(0,r.useCallback)(e=>{e.stopPropagation(),c&&o(!0)},[c]);return e?.name?(0,t.jsx)("div",{className:`group/name inline-flex flex-row items-center gap-0 min-w-0 overflow-hidden ${c?"cursor-text":""}`,onMouseDown:e=>e.stopPropagation(),onClick:m,children:(0,t.jsxs)("div",{className:"contents",children:[n&&c?(0,t.jsx)("input",{ref:i,type:"text",defaultValue:e.name,className:"text-textPrimary font-medium text-[14px] bg-transparent outline-none border-b border-textTertiary min-w-[40px] max-w-[160px] cursor-text",onKeyDown:x,onBlur:p,onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation()}):(0,t.jsx)("span",{className:"text-textPrimary font-medium text-[14px] truncate",children:e.name}),c&&!n&&(0,t.jsx)("button",{type:"button",onClick:m,className:"w-0 group-hover/name:w-[16px] opacity-0 group-hover/name:opacity-100 transition-all duration-150 overflow-hidden flex-shrink-0 ml-[2px]",children:(0,t.jsx)("i",{className:"ri-pencil-line text-[14px] text-textPrimary hover:text-textPrimary/80"})})]})}):null}],229878)}]);

//# debugId=af6943f9-25ea-7a03-5fd3-1e2f2a209926
//# sourceMappingURL=86e3e2cb36f0f729.js.map