;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a9a78737-2b99-81c6-7351-46327ab07344")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,612494,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(846932),s=e.i(542119),l=e.i(672464),n=e.i(834938),i=e.i(217968),x=e.i(458768),o=e.i(247317),c=e.i(32374),p=e.i(592846),d=e.i(252436),u=e.i(815062),f=e.i(268804),m=e.i(57895),h=e.i(522016);function y({onSwitchToLogin:e,onSuccess:n,onClose:d}){let{t:u}=(0,p.useTranslation)(),[y,w]=(0,r.useState)(1),[v,N]=(0,r.useState)(""),b=(0,r.useRef)(null),[S,k]=(0,l.useAtom)(s.referrerAtom),C=(0,l.useSetAtom)(s.isSignupModalOpenAtom),[T,A]=(0,r.useState)(!1),P=(0,l.useAtomValue)(s.isAuthedAtom),[B,E]=(0,r.useState)(!1);async function D(){if(P)return x.default.error(u("You are already signed in"));if(B)return x.default.error(u("Please wait for the signup to complete"));E(!0);try{if(!(0,i.default)(v.trim(),{domain_specific_validation:!0}))throw Error(u("Invalid email"));await f.axiomApi.post("/register-email",{email:v.trim()}),w(2)}catch(e){x.default.error((0,o.getErrorMessage)(e))}finally{E(!1)}}let I=()=>{C(!1),d?.()};return(0,t.jsxs)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"fixed inset-0 flex items-center justify-center z-50",children:[(0,t.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"absolute inset-0 bg-[#090909]/80 backdrop-blur-[2px]",onClick:2===y||3===y?()=>{}:e=>{T&&e.target===e.currentTarget&&I()},onMouseDown:e=>{e.target===e.currentTarget&&A(!0)},onMouseUp:()=>{requestAnimationFrame(()=>A(!1))}}),(0,t.jsx)(a.motion.div,{initial:{scale:.98,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.98,opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"flex flex-col w-full max-w-[312px] pt-[16px] pb-[20px] gap-[16px] bg-backgroundTertiary border border-secondaryStroke rounded-[4px] justify-center items-center z-50 shadow-[0_4px_4px_0_rgba(0,0,0,0.30),0_8px_8px_0_rgba(0,0,0,0.45)]",children:1===y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row w-full gap-[16px]justify-center items-center px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-start items-center"}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-center items-center",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-textSecondary text-[16px] leading-[21px] font-normal tracking-[-0.02em]",children:u("Sign Up")})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-end items-center",children:(0,t.jsx)("button",{className:"flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-primaryStroke/60 rounded-[4px]",onClick:I,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px]"})})})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:[(0,t.jsxs)("div",{className:"flex flex-col w-full gap-[4px] justify-start items-start",children:[(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:u("Email")}),(0,t.jsx)("input",{placeholder:u("Enter email"),value:v,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&b.current?.focus()},className:"bg-transparent text-textSecondary placeholder:text-textTertiary text-[12px] leading-[16px] font-normal flex flex-row w-full h-[32px] px-[12px] gap-[4px] justify-start items-center rounded-[999px] border border-secondaryStroke outline-none"})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[4px] justify-start items-start",children:(0,t.jsx)("input",{ref:b,placeholder:u("Invite code (optional)"),value:S||"",onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D()},className:"bg-transparent text-textSecondary placeholder:text-textTertiary text-[12px] leading-[16px] font-normal flex flex-row w-full h-[32px] px-[12px] gap-[4px] justify-start items-center rounded-[999px] border border-secondaryStroke outline-none"})})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsx)("button",{onClick:D,className:"bg-primaryBlue flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:u("Sign Up")})})}),(0,t.jsxs)("div",{className:"flex items-center w-full px-[16px]",children:[(0,t.jsx)("div",{className:"flex-grow h-[1px] bg-secondaryStroke"}),(0,t.jsx)("span",{className:"px-3 text-textTertiary text-[12px] leading-[16px] font-normal",children:u("Or Sign Up")}),(0,t.jsx)("div",{className:"flex-grow h-[1px] bg-secondaryStroke"})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsx)(c.default,{onSuccess:()=>{C(!1),n?.()}})}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsx)(m.default,{onSuccess:()=>{C(!1),n?.()}})}),(0,t.jsxs)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal text-center px-[16px]",children:[u("Already have an account?")," ",(0,t.jsx)("button",{className:"text-primaryBlue hover:brightness-110 transition-colors",onClick:()=>{C(!1),e?.()},children:u("Login")})]}),(0,t.jsxs)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal text-center px-[16px]",children:[u("By creating an account, you agree to Axiom's")," ",(0,t.jsx)(h.default,{href:"/privacy",className:"text-primaryBlue hover:brightness-110 transition-colors",children:u("Privacy Policy")})," ",u("and")," ",(0,t.jsx)(h.default,{href:"/terms",className:"text-primaryBlue hover:brightness-110 transition-colors",children:u("Terms of Service")})]})]}):2===y?(0,t.jsx)(g,{email:v,onBack:()=>w(1),onSuccess:()=>w(3),onClose:I}):3===y?(0,t.jsx)(j,{email:v,setStep:w,onSuccess:n,onClose:I}):(0,t.jsx)("div",{children:(0,t.jsx)("span",{children:u("Step 4")})})})]})}function g({email:e,onBack:a,onSuccess:s,onClose:l}){let{t:n}=(0,p.useTranslation)(),[i,c]=(0,r.useState)(["","","","","",""]),[d,u]=(0,r.useState)(""),m=(0,r.useRef)([]),[y,g]=(0,r.useState)(60),j=(0,r.useRef)(void 0),[w,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>(N(),()=>clearInterval(j.current)),[]);let N=()=>{j.current&&clearInterval(j.current),j.current=setInterval(()=>{g(e=>e<=1?(clearInterval(j.current),0):e-1)},1e3)},b=async t=>{if(w)return x.default.error(n("Please wait for the verification to complete"));if(v(!0),t.every(e=>""!==e)){let r=t.join("");try{await f.axiomApiV2.post("/verify-otp",{code:r,email:e.trim()}),u(""),s()}catch{u(n("Invalid verification code")),c(["","","","","",""]),m.current[0]?.focus()}finally{v(!1)}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row w-full gap-[16px] justify-center items-center px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-start items-center",children:(0,t.jsx)("button",{onClick:a,className:"flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-primaryStroke/60 rounded-[4px]",children:(0,t.jsx)("i",{className:"ri-arrow-left-line text-textSecondary text-[16px]"})})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-center items-center tracking-[-0.02em]",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-textSecondary text-[16px] leading-[21px] text-center font-normal",children:n("Confirmation Code")})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-end items-center",children:(0,t.jsx)("button",{className:"flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-primaryStroke/60 rounded-[4px]",onClick:l,children:(0,t.jsx)("i",{className:"ri-close-line text-textSecondary text-[16px]"})})})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsxs)("span",{className:"text-textSecondary text-center text-[12px] leading-[16px] font-normal",children:[n("We've sent a verification code to")," ",e]})}),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-[16px] justify-center items-center px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-row w-full h-[56px] gap-[8px] justify-start items-start",children:[0,1,2,3,4,5].map(e=>(0,t.jsx)("input",{ref:t=>{m.current[e]=t},type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:1,value:i[e],onChange:t=>{let r=t.target.value.replace(/[^0-9]/g,""),a=[...i];a[e]=r,c(a),r&&(e<5?m.current[e+1]?.focus():b(a))},onKeyDown:t=>{if("Backspace"===t.key){t.preventDefault();let r=[...i];r[e]="",c(r),e>0&&(m.current[e-1]?.focus(),r[e-1]="",c(r))}},onPaste:e=>{e.preventDefault();let t=e.clipboardData.getData("text").replace(/[^0-9]/g,"").slice(0,6),r=[...i];t.split("").forEach((e,t)=>{t<6&&(r[t]=e)}),c(r);let a=Math.min(t.length-1,5);m.current[a]?.focus(),r.every(e=>""!==e)&&b(r)},className:"bg-transparent text-white placeholder:text-textTertiary text-center text-[14px] leading-[21px] font-normal flex flex-row flex-1 w-full h-[56px] px-[12px] gap-[4px] justify-start items-center rounded-[4px] border border-secondaryStroke outline-none"},e))}),d&&(0,t.jsx)("span",{className:"text-decrease text-[12px] leading-[16px] font-normal",children:d}),y>0?(0,t.jsxs)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:[n("You can resend a new code in")," ",(0,t.jsx)("span",{className:"text-textSecondary",children:y})," ",n("seconds")]}):(0,t.jsx)("button",{onClick:async()=>{try{await f.axiomApi.post("/register-email",{email:e}),g(60),N(),c(["","","","","",""]),m.current[0]?.focus()}catch(e){x.default.error((0,o.getErrorMessage)(e))}},className:"text-primaryBlue hover:brightness-110 text-[12px] leading-[16px] font-normal transition-all",children:n("Resend code")})]}),(0,t.jsx)("div",{className:"bg-secondaryStroke flex flex-row w-full h-[1px] justify-center items-center"}),(0,t.jsxs)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal text-center px-[16px]",children:[n("By creating an account, you agree to Axiom's")," ",(0,t.jsx)(h.default,{href:"/privacy",className:"text-primaryBlue hover:brightness-110 transition-colors",children:n("Privacy Policy")})," ",n("and")," ",(0,t.jsx)(h.default,{href:"/terms",className:"text-primaryBlue hover:brightness-110 transition-colors",children:n("Terms of Service")})]})]})}function j({email:e,setStep:a,onSuccess:i,onClose:c}){let{t:m}=(0,p.useTranslation)(),[y,g]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),[b,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),T=(0,r.useRef)(null),A=(0,l.useAtomValue)(s.referrerAtom)?.trim().toLowerCase(),P=(0,l.useSetAtom)(s.isPhraseModalOpenAtom),B=(0,l.useSetAtom)(s.isJustSignedUpAtom),E=(0,u.useOnAuth)(),[D,I]=(0,r.useState)(!1),K=()=>{i?.(),B(!0),P(!0),c()};async function M(){let t=v.trim(),r=b.trim();if(t.length<8)return void C(m("Password must be at least 8 characters"));if(t.length>128)return void C(m("Password must be less than 128 characters"));if(!t||!r)return void C(m("Please fill in both password fields"));if(t!==r)return void C(m("Passwords do not match"));if(D)return x.default.error(m("Please wait for the signup to complete"));I(!0);let a=x.default.loading(m("Signing up..."),{duration:1/0}),s=await (0,n.hashPassword)(t),{privateKey:l,clientSecret:i,publicKey:c}=await (0,d.generateApiKey)(t);try{let{orgId:t,userId:r}=await f.axiomApiV2.post("/register-password",{email:e,b64Password:s,referrer:A,apiPublicKey:c,clientSecret:i});E({type:"api",apiPrivateKey:l},t,r,"email",K),x.default.success(m("Signed up"),{toastId:a})}catch(e){x.default.error(m("Failed signing up: ")+(0,o.getErrorMessage)(e),{toastId:a}),C((0,o.getErrorMessage)(e));return}finally{I(!1)}}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-row w-full gap-[16px] justify-center items-center px-[16px]",children:[(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-start items-center",children:(0,t.jsx)("button",{onClick:()=>a(1),className:"flex flex-row p-[4px] w-[24px] h-[24px] justify-center items-center hover:bg-primaryStroke/60 rounded-[4px]",children:(0,t.jsx)("i",{className:"ri-arrow-left-line text-textSecondary text-[16px]"})})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-center items-center",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-textSecondary text-[16px] leading-[21px] font-normal",children:m("Create password")})}),(0,t.jsx)("div",{className:"flex flex-row flex-1 gap-[4px] justify-end items-center"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:[(0,t.jsxs)("div",{className:"flex flex-col w-full gap-[4px] justify-start items-start",children:[(0,t.jsx)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal",children:m("Password")}),(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("input",{type:y?"text":"password",placeholder:m("Enter password"),value:v,onChange:e=>{N(e.target.value),C("")},onKeyDown:e=>{"Enter"===e.key&&T.current?.focus()},autoComplete:"new-password",className:"bg-transparent text-textSecondary placeholder:text-textTertiary text-[12px] leading-[16px] font-normal flex flex-row w-full h-[32px] px-[12px] pr-[36px] gap-[4px] justify-start items-center rounded-[999px] border border-secondaryStroke outline-none"}),(0,t.jsx)("button",{onClick:()=>g(!y),className:"absolute right-[12px] top-1/2 -translate-y-1/2",children:(0,t.jsx)("i",{className:`ri-${y?"eye-line":"eye-off-line"} text-textTertiary text-[14px] hover:text-textSecondary`})})]})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[4px] justify-start items-start",children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("input",{ref:T,type:j?"text":"password",placeholder:m("Confirm password"),value:b,onChange:e=>{S(e.target.value),C("")},onKeyDown:e=>{"Enter"===e.key&&M()},autoComplete:"new-password",className:"bg-transparent text-white placeholder:text-textTertiary text-[12px] leading-[16px] font-normal flex flex-row w-full h-[32px] px-[12px] pr-[36px] gap-[4px] justify-start items-center rounded-[999px] border border-secondaryStroke outline-none"}),(0,t.jsx)("button",{onClick:()=>w(!j),className:"absolute right-[12px] top-1/2 -translate-y-1/2",children:(0,t.jsx)("i",{className:`ri-${j?"eye-line":"eye-off-line"} text-textTertiary text-[14px] hover:text-textSecondary`})})]})}),k&&(0,t.jsx)("span",{className:"text-decrease text-[12px] leading-[16px] font-normal",children:k})]}),(0,t.jsx)("div",{className:"flex flex-col w-full gap-[8px] justify-center items-center px-[16px]",children:(0,t.jsx)("button",{onClick:M,className:"bg-primaryBlue flex flex-row w-full h-[32px] px-[12px] gap-[8px] justify-center items-center rounded-full hover:bg-primaryBlue/80 hover:brightness-110 transition-all duration-[150ms] cursor-pointer",children:(0,t.jsx)("span",{className:"text-[14px] font-bold text-background",children:m("Continue")})})}),(0,t.jsx)("div",{className:"bg-secondaryStroke flex flex-row w-full h-[1px] justify-center items-center"}),(0,t.jsxs)("span",{className:"text-textTertiary text-[12px] leading-[16px] font-normal text-center px-[16px]",children:[m("By creating an account, you agree to Axiom's")," ",(0,t.jsx)(h.default,{href:"/privacy",className:"text-primaryBlue hover:brightness-110 transition-colors",children:m("Privacy Policy")})," ",m("and")," ",(0,t.jsx)(h.default,{href:"/terms",className:"text-primaryBlue hover:brightness-110 transition-colors",children:m("Terms of Service")})]})]})}e.s(["default",()=>y])},694647,e=>{e.n(e.i(612494))}]);

//# debugId=a9a78737-2b99-81c6-7351-46327ab07344
//# sourceMappingURL=c4a5d7823f547341.js.map